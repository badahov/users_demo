{"version":3,"sources":["webpack:///./modules/users/index.js","webpack:///./modules/users/state.js","webpack:///./modules/users/api.js","webpack:///./modules/users/component/user_table_item.jsx","webpack:///./modules/users/component/forms/add/form.jsx","webpack:///./modules/users/component/forms/add/index.js","webpack:///./modules/users/component/main.jsx","webpack:///./modules/users/component/index.js","webpack:///./modules/users/main.jsx"],"names":["getComponent","nextState","component","then","mad","noop","createStoreWithMiddleware","applyMiddleware","middleware","thunk","createStore","combineReducers","system","reducer","name","models","points","entryPoints","query","pointApi","data","type","Query","post","api","action","callback","code","login","status","result","domain","appConfig","auth","get","UserTableItem","this","props","isAdmin","isReprintAdmin","userCode","userName","userLogin","access","userId","admin","reprintAdmin","className","Group","user","update","title","to","onConfirm","onDeleteUser","okText","cancelText","placement","zIndex","size","icon","Component","style","position","left","bottom","width","borderTop","padding","background","textAlign","formItemLayout","labelCol","xs","span","sm","wrapperCol","UserAddFormModel","DrawerWidth","DrawerZIndex","e","preventDefault","form","validateFieldsAndScroll","err","values","confirm","submitForm","onClose","value","target","setState","confirmDirty","state","rule","getFieldValue","validateFields","force","getFieldDecorator","visible","onSubmit","handleSubmit","gutter","marginBottom","Item","label","hasFeedback","rules","required","message","min","placeholder","validator","validateToNextPassword","Password","compareToFirstPassword","onBlur","handleConfirmBlur","valuePropName","onClick","marginRight","htmlType","Form","create","mapPropsToFields","FormAdd","Header","Layout","Content","Sider","Users","nextProps","items","location","header","modelItems","loading","page","collapsedSiderMenu","visibleUserAddForm","Filters","params","nextHeader","isUpdate","siderWidth","menuSelectedKeys","modelCurrentUser","modelServer","trigger","collapsible","collapsed","theme","mode","defaultSelectedKeys","key","tip","spinning","subTitle","switchSiderMenu","extra","onOpenUserAddForm","overlayClassName","striped","thead","setHeader","model","isFocus","id","fsort","sort","map","item","operator_id","operator_code","operator_name","operator_login","is_admin","is_reprint_admin","modelDelete","paginate","url","onQuery","urlQuery","modelAdd","onCloseUserAddForm","wrappedComponentRef","React","defaultProps","connectAdvanced","dispatch","module","ownProps","sendTo","creator","modelHeader","json","nextOwnProps","isNull","nextResult","userItems","userHeader","current","userCurrent","shallowEqual","Module","store","UserStore"],"mappings":"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","file":"users.js?hash=d8023f4346ee3332092c","sourcesContent":["import noop from 'lodash/noop';\n\nexport default {\n  getComponent(nextState, component) {\n    import('./main').then((mad) => component(null, mad.default)).catch(() => noop);\n  },\n};","'use strict';\n\nimport { createStore, combineReducers, applyMiddleware } from 'redux';\n\nimport middleware from '../app/middleware';\nimport reducer from '../app/reducer';\n\nimport thunk from 'redux-thunk';\n// import {createLogger} from 'redux-logger';\n\nconst module = {\n  name: 'system',\n  models: [\n    {\n      name: 'user',\n      points: ['header', 'items', 'current']\n    }\n  ]\n};\n\nconst createStoreWithMiddleware = applyMiddleware(\n  middleware('system'),\n  thunk,\n  // createLogger({collapsed:true}),\n)(createStore);\n\nexport default createStoreWithMiddleware(combineReducers({\n  system: reducer(module)\n}));\n","'use strict';\n\nimport { Query } from 'modules/app/core';\n\nimport appConfig from 'config';\n\nconst entryPoints = {\n  items: 'interface-users/items',\n  delete: 'interface-users/user-delete',\n  add: 'interface-users/user-add',\n  current: 'interface-users/user-current'\n};\n\nfunction query(pointApi, data, type = Query.post) {\n  return new Query({\n    pointApi: pointApi,\n    type: type,\n    data: data\n  });\n}\n\nexport default function api(action, data, callback) {\n  switch (action) {\n    case 'userHeader':\n      return {\n        code: (data.code !== 0) ? data.code : '',\n        name: (data.name !== 0) ? data.name : '',\n        login: (data.login !== 0) ? data.login : '',\n        status: (data.status === 0) ? '0' : '1'\n      };\n    case 'userItems':\n      let queryItems = new Query({\n        pointApi: entryPoints.items,\n        data: data\n      });\n\n      return queryItems.result();\n    case 'userDelete':\n      return query(entryPoints.delete, data, Query.post).result(callback);\n    case 'userAdd':\n      return query(entryPoints.add, data, Query.post).result(callback);\n    case 'userCurrent':\n      let queryCurrent = new Query({\n        domain: appConfig.domain.auth,\n        type: Query.get,\n        pointApi: entryPoints.current\n      });\n\n      return queryCurrent.result();\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Icon, Button, Popconfirm } from 'antd';\n\nimport { Link } from 'react-router';\n\nclass UserTableItem extends Component {\n  render() {\n    const { isAdmin, isReprintAdmin, userCode, userName, userLogin, access, userId } = this.props;\n\n    let admin = (isAdmin) ? 'Да' : 'Нет';\n    let reprintAdmin = (isReprintAdmin) ? 'Да' : 'Нет';\n\n    return (\n      <tr>\n        <td>{userCode}</td>\n        <td>{userName}</td>\n        <td>{userLogin}</td>\n        <td>{admin}</td>\n        <td>{reprintAdmin}</td>\n\n        <td className=\"box-button\">\n          <Button.Group>\n            {\n              (access.user.update)\n                ?\n                <Link className=\"ant-btn ant-btn-primary ant-btn-sm ant-btn-icon-only\"\n                      title=\"Изменить\" to={`/user/edit/${userId}/data`}>\n                  <Icon type=\"edit\"/>\n                </Link>\n                : null\n            }\n            {\n              (access.user.delete)\n                ?\n                <Popconfirm\n                  title=\"Удалить пользователя?\"\n                  onConfirm={() => this.props.onDeleteUser(userId)}\n                  okText=\"Да\"\n                  cancelText=\"Нет\"\n                  placement=\"left\"\n                  zIndex={1050}\n                >\n                  <Button type=\"primary\" size=\"small\" icon=\"delete\"/>\n                </Popconfirm>\n                : null\n            }\n          </Button.Group>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUserTableItem.propTypes = {\n  access: PropTypes.objectOf(PropTypes.shape({\n    user: PropTypes.arrayOf(PropTypes.shape({\n      delete: PropTypes.bool.isRequired,\n      update: PropTypes.bool.isRequired,\n    })),\n  })),\n  isAdmin: PropTypes.bool,\n  isReprintAdmin: PropTypes.bool,\n  userCode: PropTypes.number,\n  userId: PropTypes.number.isRequired,\n  userLogin: PropTypes.string.isRequired,\n  userName: PropTypes.string.isRequired,\n};\n\nexport default UserTableItem;\n","import React, { Component } from 'react';\n\nimport { Form, Button, Row, Input, InputNumber, Switch, Drawer } from 'antd';\n\nconst style = {\n  position: 'absolute',\n  left: 0,\n  bottom: 0,\n  width: '100%',\n  borderTop: '1px solid #e9e9e9',\n  padding: '10px 16px',\n  background: '#fff',\n  textAlign: 'right',\n  zIndex: 2000,\n};\n\nconst formItemLayout = {\n  labelCol: {\n    xs: { span: 24 },\n    sm: { span: 7 },\n  },\n  wrapperCol: {\n    xs: { span: 24 },\n    sm: { span: 12 },\n  },\n};\n\nclass UserAddFormModel extends Component {\n  state = {\n    DrawerWidth: 550,\n    DrawerZIndex: 1050,\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        delete values.confirm;\n        this.props.submitForm(values);\n      }\n    });\n  };\n\n  onClose = () => {\n    this.props.onClose();\n  };\n\n  handleConfirmBlur = e => {\n    const { value } = e.target;\n    this.setState({ confirmDirty: this.state.confirmDirty || !!value });\n  };\n\n  compareToFirstPassword = (rule, value, callback) => {\n    const { form } = this.props;\n    if (value && value !== form.getFieldValue('password')) {\n      callback('Пароли не совпадают!');\n    } else {\n      callback();\n    }\n  };\n\n  validateToNextPassword = (rule, value, callback) => {\n    const { form } = this.props;\n    if (value && this.state.confirmDirty) {\n      form.validateFields(['confirm'], { force: true });\n    }\n    callback();\n  };\n\n  render() {\n    const { form: {getFieldDecorator} } = this.props;\n\n    return (\n      <Drawer\n        title={this.props.title}\n        width={this.state.DrawerWidth}\n        onClose={this.onClose}\n        visible={this.props.visible}\n        zIndex={this.state.DrawerZIndex}\n      >\n        <Form {...formItemLayout} onSubmit={this.handleSubmit}>\n          <Row gutter={16} style={{ marginBottom: '20px' }}>\n            <Form.Item label=\"Код\" hasFeedback>\n              {getFieldDecorator('operator_code', {\n                rules: [\n                  { required: true, message: 'Пожалуйста, ввидите код пользователя' },\n                ],\n              })(<InputNumber style={{ width: '65%' }} min={1} placeholder=\"Код пользователя\"/>)}\n            </Form.Item>\n\n            <Form.Item label=\"Имя\" hasFeedback>\n              {getFieldDecorator('operator_name', {\n                rules: [\n                  { required: true, message: 'Пожалуйста, ввидите имя пользователя' },\n                ],\n              })(<Input placeholder=\"Имя пользователя\"/>)}\n            </Form.Item>\n\n            <Form.Item label=\"Логин\" hasFeedback>\n              {getFieldDecorator('operator_login', {\n                rules: [\n                  { required: true, message: 'Пожалуйста, ввидите логин пользователя' },\n                ],\n              })(<Input placeholder=\"Логин пользователя\"/>)}\n            </Form.Item>\n\n            <Form.Item label=\"Пароль\" hasFeedback>\n              {getFieldDecorator('password', {\n                rules: [\n                  {\n                    required: true,\n                    message: 'Пожалуйста, введите пароль!',\n                  },\n                  {\n                    validator: this.validateToNextPassword,\n                  },\n                ],\n              })(<Input.Password/>)}\n            </Form.Item>\n            <Form.Item label=\"Повторить пароль\" hasFeedback>\n              {getFieldDecorator('confirm', {\n                rules: [\n                  {\n                    required: true,\n                    message: 'Пожалуйста, повторите пароль!',\n                  },\n                  {\n                    validator: this.compareToFirstPassword,\n                  },\n                ],\n              })(<Input.Password onBlur={this.handleConfirmBlur}/>)}\n            </Form.Item>\n            <Form.Item label=\"Администратор\">\n              {getFieldDecorator('is_admin', { valuePropName: 'checked' })(<Switch/>)}\n            </Form.Item>\n            <Form.Item label=\"Перепечать\">\n              {getFieldDecorator('is_reprint_admin', { valuePropName: 'checked' })(<Switch/>)}\n            </Form.Item>\n          </Row>\n          <Row style={style}>\n            <Button onClick={this.onClose} style={{ marginRight: 8 }}>\n              Закрыить\n            </Button>\n            <Button type=\"primary\" htmlType=\"submit\">\n              Отправить\n            </Button>\n          </Row>\n        </Form>\n      </Drawer>\n    );\n  }\n}\n\nexport default UserAddFormModel;\n","import React from \"react\";\n\nimport Form from 'antd/lib/form';\n\nimport FormAdd from './form';\n\nexport default Form.create({\n  name: 'user_add_form',\n  mapPropsToFields(props) {\n    return {\n\n    };\n  },\n})(FormAdd);\n","'use strict';\n\nimport React from 'react';\nimport Helmet from 'react-helmet';\nimport { Link } from 'react-router';\n\nimport {\n  Pagination,\n  Filter,\n  Sorting,\n  Search,\n  Table,\n  Logout,\n  Text,\n  Filters,\n} from 'modules/app/core';\n\nimport { Menu, PageHeader, Layout, Row, Col, Spin, Icon, Button } from 'antd';\n\nconst { Header, Content, Sider } = Layout;\n\nimport UserTableItem from './user_table_item';\nimport UserAddForm from './forms/add';\n\nclass Users extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      siderWidth: 200,\n      menuSelectedKeys: ['left-menu-1'],\n\n      collapsedSiderMenu: props.collapsedSiderMenu,\n      visibleUserAddForm: props.visibleUserAddForm,\n    };\n\n    props.modelCurrentUser();\n    props.modelServer();\n  }\n\n  shouldComponentUpdate = (nextProps, nextState) => {\n    const { items, location, header, modelItems, loading, location: {query} } = this.props;\n    const { page, collapsedSiderMenu, visibleUserAddForm } = this.state;\n\n    const params = ['name', 'code', 'login'];\n\n    (new Filters({\n      params: params,\n      query: location.query,\n      nextHeader: nextProps.header,\n      header: header,\n      page: page,\n      action: () => {\n        modelItems(query);\n      },\n    })).isUpdate();\n\n    return loading !== nextProps.loading ||\n      collapsedSiderMenu !== nextState.collapsedSiderMenu ||\n      visibleUserAddForm !== nextState.visibleUserAddForm ||\n      header !== nextProps.header ||\n      items !== nextProps.items;\n  };\n\n  /**\n   * Open the add user form\n   */\n  onCloseUserAddForm = () => {\n    this.setState({\n      visibleUserAddForm: false,\n    });\n  };\n\n  /**\n   * Close the add user form\n   */\n  onOpenUserAddForm = () => {\n    this.setState({\n      visibleUserAddForm: !this.state.visibleUserAddForm,\n    });\n  };\n\n  /**\n   * Open or close the menu\n   * @private\n   */\n  switchSiderMenu = () => {\n    this.setState({\n      collapsedSiderMenu: !this.state.collapsedSiderMenu,\n    });\n  };\n\n  render() {\n    return (\n      <Layout>\n        <Sider width={this.state.siderWidth} trigger={null} collapsible\n               collapsed={this.state.collapsedSiderMenu}>\n          <div className=\"logo\">USER</div>\n          <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={this.state.menuSelectedKeys}>\n            <Menu.Item key=\"left-menu-1\">\n              <Link to=\"/\"><Icon type=\"team\"/><span>Пользователи</span></Link>\n            </Menu.Item>\n            <Menu.Item key=\"left-menu-2\">\n              <Link to=\"/role\"><Icon type=\"cluster\"/><span>Роли</span></Link>\n            </Menu.Item>\n          </Menu>\n        </Sider>\n        <Layout>\n          <Spin tip=\"Загрузка...\" size=\"large\" spinning={this.props.loading}>\n            <Helmet title=\"Users\"/>\n            <Header>\n              <PageHeader\n                subTitle=\"Пользователи\"\n                title={<span>\n                  <Icon\n                    className=\"trigger\"\n                    type={this.state.collapsedSiderMenu ? 'menu-unfold' : 'menu-fold'}\n                    onClick={this.switchSiderMenu}\n                  />Users\n                </span>}\n                extra={[\n                  <Button\n                    key=\"add-user\"\n                    className=\"btn-user-add\"\n                    type=\"primary\"\n                    icon=\"user-add\"\n                    size=\"small\"\n                    onClick={() => this.onOpenUserAddForm()}\n                  >\n                    Добавить пользователя\n                  </Button>,\n                  <Logout key=\"logout-1\"/>,\n                ]}\n              />\n            </Header>\n            <Content className='user-list'>\n              <Row>\n                <Col span={24}>\n                  <Table overlayClassName=\"table-users\" striped={false} thead={[\n                    <th key=\"ht-1\">\n                      <Filter>\n                        <Search\n                          callback={this.props.setHeader}\n                          model=\"code\"\n                          value={this.props.header.code}\n                          placeholder=\"Код\"\n                          isFocus={true}\n                        />\n                        <Sorting id='code' fsort={this.props.sort}/>\n                      </Filter>\n                    </th>,\n                    <th key=\"ht-2\">\n                      <Filter>\n                        <Search\n                          callback={this.props.setHeader}\n                          model=\"name\"\n                          value={this.props.header.name}\n                          placeholder=\"Имя\"\n                        />\n                        <Sorting id='name' fsort={this.props.sort}/>\n                      </Filter>\n                    </th>,\n                    <th key=\"ht-3\">\n                      <Filter>\n                        <Search\n                          callback={this.props.setHeader}\n                          model=\"login\"\n                          value={this.props.header.login}\n                          placeholder=\"Логин\"\n                        />\n                        <Sorting id='login' fsort={this.props.sort}/>\n                      </Filter>\n                    </th>,\n                    <th key=\"ht-4\">\n                      <Text>Админ</Text>\n                    </th>,\n                    <th key=\"ht-5\">\n                      <Text>Перепечать</Text>\n                    </th>,\n                    <th key=\"ht-6\"></th>,\n                  ]}>\n                    {\n                      (this.props.items)\n                        ?\n                        this.props.items.map((item) => <UserTableItem\n                          key={item.operator_id}\n                          userId={item.operator_id}\n                          userCode={item.operator_code}\n                          userName={item.operator_name}\n                          userLogin={item.operator_login}\n                          isAdmin={item.is_admin}\n                          isReprintAdmin={item.is_reprint_admin}\n\n                          access={this.props.access}\n\n                          onDeleteUser={this.props.modelDelete}\n                        />)\n                        : null\n                    }\n                  </Table>\n                </Col>\n                <Col span={24}>\n                  {\n                    (this.props.paginate)\n                      ?\n                      <Pagination\n                        url=\"/\"\n                        data={this.props.paginate}\n                        onQuery={this.props.modelItems}\n                      />\n                      : null\n                  }\n                </Col>\n                <UserAddForm\n                  title=\"Добавить пользователя\"\n                  visible={this.state.visibleUserAddForm}\n                  urlQuery={this.props.location.query}\n                  submitForm={this.props.modelAdd}\n                  onClose={this.onCloseUserAddForm}\n                  wrappedComponentRef={(form) => this.form = form}\n                />\n              </Row>\n            </Content>\n          </Spin>\n        </Layout>\n      </Layout>\n    );\n  }\n}\n\nUsers.defaultProps = {\n  loading: true,\n  location: {\n    query: {},\n  },\n};\n\nexport default Users;\n","import { shallowEqual } from 'react-redux';\nimport { connectAdvanced } from 'react-redux';\n\nimport creator from '../../app/creator';\nimport api from '../api';\n\nimport Users from './main';\n\nexport default connectAdvanced((dispatch) => {\n  const module = 'system';\n  let ownProps = {};\n  let result = {};\n\n  const sendTo = creator(api, module, dispatch);\n\n  const modelCurrentUser = () => sendTo('userCurrent');\n\n  const modelItems  = (data) => sendTo('userItems', data);\n  const modelHeader = (data) => sendTo('userHeader', data);\n\n  const modelAdd = (data) => sendTo('userAdd', data, (json) => {\n    modelItems(ownProps.location.query);\n    return json;\n  });\n\n  /**\n   * User delete\n   * @param id\n   */\n  const modelDelete = (id) => sendTo('userDelete', {id: id}, (json) => {\n    modelItems(ownProps.location.query);\n    return json;\n  });\n\n  /**\n   * Downloading data from a remote server\n   * @private\n   */\n  const modelServer = () => {\n    modelHeader(ownProps.location.query);\n    modelItems(ownProps.location.query);\n  };\n\n  const setHeader = (name, value) => {\n    ownProps.location.query[name] = value;\n    modelHeader(ownProps.location.query);\n  };\n\n  const sort = (sort) => {\n    ownProps.location.query.sort = sort;\n    modelItems(ownProps.location.query);\n  };\n\n  return (nextState, nextOwnProps) => {\n    const isNull = (value) => value === null;\n\n    const loading  = isNull(nextState[module].userItems) ? true : false;\n    const header   = isNull(nextState[module].userItems) ? []   : nextState[module].userHeader;\n    const items    = isNull(nextState[module].userItems) ? null : nextState[module].userItems.data;\n    const paginate = isNull(nextState[module].userItems) ? null : nextState[module].userItems.paginate;\n    const access   = isNull(nextState[module].userItems) ? null : nextState[module].userItems.access;\n    const current  = isNull(nextState[module].userCurrent) ? null : nextState[module].userCurrent.data;\n\n    const nextResult = {\n      ...nextOwnProps,\n      loading,\n      header,\n      items,\n      paginate,\n      access,\n      current,\n      setHeader,\n      modelCurrentUser,\n      modelItems,\n      modelHeader,\n      modelServer,\n      modelAdd,\n      modelDelete,\n      sort\n    };\n    ownProps = nextOwnProps;\n    if (!shallowEqual(result, nextResult)) {\n      result = nextResult\n    }\n\n    return result;\n  }\n})(Users);\n","import React from 'react';\nimport { Provider } from 'react-redux';\n\nimport UserStore from './state';\n\nimport Index from './component';\n\nimport './css/index.less';\n\nconst Module = (props) => {\n  const {location, visibleUserAddForm, collapsedSiderMenu} = props;\n\n  return (\n    <Provider store={UserStore}>\n      <Index\n        location={location}\n        visibleUserAddForm={visibleUserAddForm}\n        collapsedSiderMenu={collapsedSiderMenu}\n      />\n    </Provider>\n  );\n};\n\nModule.defaultProps = {\n  visibleUserAddForm: false,\n  collapsedSiderMenu: true,\n};\n\nexport default Module;\n"],"sourceRoot":""}
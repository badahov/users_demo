{"version":3,"sources":["webpack:///./modules/users/index.js","webpack:///./modules/users/config.js","webpack:///./modules/users/store/middlewares/user.js","webpack:///./modules/users/store/reducers/user.js","webpack:///./modules/users/store/state.js","webpack:///./modules/users/store/api/user.js","webpack:///./modules/users/store/actions/user.js","webpack:///./modules/users/component/main/user_table_item.jsx","webpack:///./modules/users/component/main/form_add/form.jsx","webpack:///./modules/users/component/main/form_add/index.jsx","webpack:///./modules/users/component/main/main.jsx","webpack:///./modules/users/component/main/index.jsx","webpack:///./modules/users/main.jsx"],"names":["getComponent","location","cb","require","model","api","items","delete","add","current","middleware","store","next","action","config","includes","type","middlewareAction","MODEL","toUpperCase","actionReducers","status","state","data","combineForms","loading","save","header","createStoreWithMiddleware","applyMiddleware","user","thunk","createStore","combineReducers","reducers","query","pointApi","Query","post","modelUser","callback","code","name","login","result","then","json","domain","appConfig","auth","get","actionKey","actions","promise","UserTableItem","this","props","isAdmin","isReprintAdmin","userCode","userName","userLogin","access","userId","admin","reprintAdmin","className","Group","update","title","to","onConfirm","onDeleteUser","okText","cancelText","placement","zIndex","size","icon","Component","propTypes","PropTypes","objectOf","shape","arrayOf","bool","isRequired","number","string","style","position","left","bottom","width","borderTop","padding","background","textAlign","formItemLayout","labelCol","xs","span","sm","wrapperCol","UserAddFormModel","DrawerWidth","DrawerZIndex","e","preventDefault","form","validateFieldsAndScroll","err","values","confirm","submitForm","onClose","value","target","setState","confirmDirty","rule","getFieldValue","validateFields","force","getFieldDecorator","visible","onSubmit","handleSubmit","gutter","marginBottom","Item","label","hasFeedback","rules","required","message","min","placeholder","validator","validateToNextPassword","Password","compareToFirstPassword","onBlur","handleConfirmBlur","valuePropName","onClick","marginRight","htmlType","Form","create","mapPropsToFields","FormAdd","Header","Layout","Content","Sider","Users","nextProps","nextState","Filters","params","nextHeader","page","modelItems","isUpdate","collapsedSiderMenu","visibleUserAddForm","siderWidth","menuSelectedKeys","modelCurrentUser","modelServer","trigger","collapsible","collapsed","theme","mode","defaultSelectedKeys","key","tip","spinning","subTitle","switchSiderMenu","extra","onOpenUserAddForm","overlayClassName","striped","thead","setHeader","id","fsort","sort","map","item","operator_id","operator_code","operator_name","operator_login","is_admin","is_reprint_admin","modelDelete","paginate","url","onQuery","urlQuery","modelAdd","onCloseUserAddForm","wrappedComponentRef","React","defaultProps","connectAdvanced","dispatch","ownProps","bindActionCreators","actionUser","modelHeader","nextOwnProps","isNull","nextResult","shallowEqual","UsersMain","UserStore"],"mappings":"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","file":"users.js?hash=1ce53e48e812d39741fd","sourcesContent":["'use strict';\n\nexport default {\n    getComponent(location, cb) {\n        require.ensure([], (require) => {\n            cb(null, require('./main').default);\n        });\n    }\n};","'use strict';\n\nexport default {\n    model: 'user',\n    api: {\n        items:   'interface-users/items',\n        delete:  'interface-users/user-delete',\n        add:     'interface-users/user-add',\n        current: 'interface-users/user-current'\n    },\n    middleware: [\n        'USER_ADD',\n        'USER_DELETE',\n        'USER_ITEMS',\n        'USER_CURRENT',\n        'USER_HEADER'\n    ]\n}\n","'use strict';\n\nimport middlewareAction from 'modules/app/component/core/middleware';\n\nimport config from '../../config';\n\nconst middleware = store => next => action => {\n    if (config.middleware.includes(action.type)) {\n        middlewareAction(store, action);\n    } else {\n        return next(action);\n    }\n};\n\nexport default middleware;\n","'use strict';\n\nimport {combineForms} from 'react-redux-form';\nimport config from '../../config';\n\nconst MODEL = config.model.toUpperCase();\n\nconst actionReducers = status => (state = null, action) => {\n    if (status.includes(action.type)) {\n        return action.data;\n    } else {\n        return state;\n    }\n};\n\nexport default combineForms({\n    loading:  actionReducers([\n        `${MODEL}_ITEMS_LOADING`,\n        `${MODEL}_DELETE_LOADING`\n    ]),\n    items: actionReducers([\n        `${MODEL}_ITEMS_LOADED`\n    ]),\n    save: actionReducers([\n        `${MODEL}_ADD_LOADED`\n    ]),\n    header: actionReducers([\n        `${MODEL}_HEADER_LOADED`\n    ]),\n    current: actionReducers([\n        `${MODEL}_CURRENT_LOADED`\n    ])\n}, config.model);\n","'use strict';\n\nimport {createStore, combineReducers, applyMiddleware} from 'redux';\nimport thunk from 'redux-thunk';\n//import {createLogger} from 'redux-logger';\n\nimport user from './middlewares/user';\n\n//Найдет и загрузит все reducers из папки\nimport * as reducers from './reducers';\n\nconst createStoreWithMiddleware = applyMiddleware(\n    user,\n    thunk//, createLogger({collapsed:true})\n)(createStore);\n\nexport default createStoreWithMiddleware(combineReducers(reducers));\n","'use strict';\n\nimport {Query} from 'modules/app/core';\n\nimport appConfig from 'config';\nimport config from '../../config';\n\nfunction query (pointApi, data, type = Query.post) {\n    return new Query({\n        pointApi: pointApi,\n        type: type,\n        data: data\n    });\n}\n\nexport function modelUser(action, data, callback)\n{\n    switch (action.toUpperCase()) {\n        case 'HEADER':\n            return {\n                code: (data.code !== 0)? data.code : '',\n                name: (data.name !== 0)? data.name : '',\n                login: (data.login !== 0)? data.login : '',\n                status: (data.status === 0)? \"0\" : \"1\"\n            };\n        case 'ITEMS':\n            let queryItems = new Query({\n                pointApi: config.api.items,\n                data: data\n            });\n\n            return queryItems.result();\n        case 'DELETE':\n            return query(config.api.delete, data, Query.post).result(callback).then((json) => {\n                if (json) {\n                    return query(config.api.items).result();\n                }\n            });\n        case 'ADD':\n            return query(config.api.add, data, Query.post).result(callback).then((json) => {\n                if (json) {\n                    return query(config.api.items).result();\n                }\n            });\n        case 'CURRENT':\n            let queryCurrent = new Query({\n                domain: appConfig.domain.auth,\n                type: Query.get,\n                pointApi: config.api.current\n            });\n\n            return queryCurrent.result();\n    }\n}\n","'use strict';\n\nimport {modelUser} from '../api/user';\nimport config from \"../../config\";\n\nconst MODEL = config.model.toUpperCase();\n\nexport default function user(action, data, callback) {\n    const actionKey = action.toUpperCase();\n\n    return {\n        type: `${MODEL}_${actionKey}`,\n        actions: [`${MODEL}_${actionKey}_LOADING`,`${MODEL}_${actionKey}_LOADED`,`${MODEL}_${actionKey}_LOAD_FAILURE`],\n        promise: modelUser(action, data, callback),\n    };\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Icon, Button, Popconfirm } from 'antd';\n\nimport { Link } from 'react-router';\n\nclass UserTableItem extends Component {\n  render() {\n    const { isAdmin, isReprintAdmin, userCode, userName, userLogin, access, userId } = this.props;\n\n    let admin = (isAdmin) ? 'Да' : 'Нет';\n    let reprintAdmin = (isReprintAdmin) ? 'Да' : 'Нет';\n\n    return (\n      <tr>\n        <td>{userCode}</td>\n        <td>{userName}</td>\n        <td>{userLogin}</td>\n        <td>{admin}</td>\n        <td>{reprintAdmin}</td>\n\n        <td className=\"box-button\">\n          <Button.Group>\n            {\n              (access.user.update)\n                ?\n                <Link className=\"ant-btn ant-btn-primary ant-btn-sm ant-btn-icon-only\"\n                      title=\"Изменить\" to={`/user/edit/${userId}/data`}>\n                  <Icon type=\"edit\"/>\n                </Link>\n                : null\n            }\n            {\n              (access.user.delete)\n                ?\n                <Popconfirm\n                  title=\"Удалить пользователя?\"\n                  onConfirm={() => this.props.onDeleteUser(userId)}\n                  okText=\"Да\"\n                  cancelText=\"Нет\"\n                  placement=\"left\"\n                  zIndex={1050}\n                >\n                  <Button type=\"primary\" size=\"small\" icon=\"delete\"/>\n                </Popconfirm>\n                : null\n            }\n          </Button.Group>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUserTableItem.propTypes = {\n  access: PropTypes.objectOf(PropTypes.shape({\n    user: PropTypes.arrayOf(PropTypes.shape({\n      delete: PropTypes.bool.isRequired,\n      update: PropTypes.bool.isRequired,\n    })),\n  })),\n  isAdmin: PropTypes.bool,\n  isReprintAdmin: PropTypes.bool,\n  userCode: PropTypes.number,\n  userId: PropTypes.number.isRequired,\n  userLogin: PropTypes.string.isRequired,\n  userName: PropTypes.string.isRequired,\n};\n\nexport default UserTableItem;\n","import React, { Component } from 'react';\n\nimport { Form, Button, Row, Input, InputNumber, Switch, Drawer } from 'antd';\n\nconst style = {\n  position: 'absolute',\n  left: 0,\n  bottom: 0,\n  width: '100%',\n  borderTop: '1px solid #e9e9e9',\n  padding: '10px 16px',\n  background: '#fff',\n  textAlign: 'right',\n  zIndex: 2000,\n};\n\nconst formItemLayout = {\n  labelCol: {\n    xs: { span: 24 },\n    sm: { span: 7 },\n  },\n  wrapperCol: {\n    xs: { span: 24 },\n    sm: { span: 12 },\n  },\n};\n\nclass UserAddFormModel extends Component {\n  state = {\n    DrawerWidth: 550,\n    DrawerZIndex: 1050,\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        delete values.confirm;\n        this.props.submitForm(values);\n      }\n    });\n  };\n\n  onClose = () => {\n    this.props.onClose();\n  };\n\n  handleConfirmBlur = e => {\n    const { value } = e.target;\n    this.setState({ confirmDirty: this.state.confirmDirty || !!value });\n  };\n\n  compareToFirstPassword = (rule, value, callback) => {\n    const { form } = this.props;\n    if (value && value !== form.getFieldValue('password')) {\n      callback('Пароли не совпадают!');\n    } else {\n      callback();\n    }\n  };\n\n  validateToNextPassword = (rule, value, callback) => {\n    const { form } = this.props;\n    if (value && this.state.confirmDirty) {\n      form.validateFields(['confirm'], { force: true });\n    }\n    callback();\n  };\n\n  render() {\n    const { form: {getFieldDecorator} } = this.props;\n\n    return (\n      <Drawer\n        title={this.props.title}\n        width={this.state.DrawerWidth}\n        onClose={this.onClose}\n        visible={this.props.visible}\n        zIndex={this.state.DrawerZIndex}\n      >\n        <Form {...formItemLayout} onSubmit={this.handleSubmit}>\n          <Row gutter={16} style={{ marginBottom: '20px' }}>\n            <Form.Item label=\"Код\" hasFeedback>\n              {getFieldDecorator('operator_code', {\n                rules: [\n                  { required: true, message: 'Пожалуйста, ввидите код пользователя' },\n                ],\n              })(<InputNumber style={{ width: '65%' }} min={1} placeholder=\"Код пользователя\"/>)}\n            </Form.Item>\n\n            <Form.Item label=\"Имя\" hasFeedback>\n              {getFieldDecorator('operator_name', {\n                rules: [\n                  { required: true, message: 'Пожалуйста, ввидите имя пользователя' },\n                ],\n              })(<Input placeholder=\"Имя пользователя\"/>)}\n            </Form.Item>\n\n            <Form.Item label=\"Логин\" hasFeedback>\n              {getFieldDecorator('operator_login', {\n                rules: [\n                  { required: true, message: 'Пожалуйста, ввидите логин пользователя' },\n                ],\n              })(<Input placeholder=\"Логин пользователя\"/>)}\n            </Form.Item>\n\n            <Form.Item label=\"Пароль\" hasFeedback>\n              {getFieldDecorator('password', {\n                rules: [\n                  {\n                    required: true,\n                    message: 'Пожалуйста, введите пароль!',\n                  },\n                  {\n                    validator: this.validateToNextPassword,\n                  },\n                ],\n              })(<Input.Password/>)}\n            </Form.Item>\n            <Form.Item label=\"Повторить пароль\" hasFeedback>\n              {getFieldDecorator('confirm', {\n                rules: [\n                  {\n                    required: true,\n                    message: 'Пожалуйста, повторите пароль!',\n                  },\n                  {\n                    validator: this.compareToFirstPassword,\n                  },\n                ],\n              })(<Input.Password onBlur={this.handleConfirmBlur}/>)}\n            </Form.Item>\n            <Form.Item label=\"Администратор\">\n              {getFieldDecorator('is_admin', { valuePropName: 'checked' })(<Switch/>)}\n            </Form.Item>\n            <Form.Item label=\"Перепечать\">\n              {getFieldDecorator('is_reprint_admin', { valuePropName: 'checked' })(<Switch/>)}\n            </Form.Item>\n          </Row>\n          <Row style={style}>\n            <Button onClick={this.onClose} style={{ marginRight: 8 }}>\n              Закрыить\n            </Button>\n            <Button type=\"primary\" htmlType=\"submit\">\n              Отправить\n            </Button>\n          </Row>\n        </Form>\n      </Drawer>\n    );\n  }\n}\n\nexport default Form.create({\n  name: 'user_add_form',\n  mapPropsToFields(props) {\n    return {};\n  },\n})(UserAddFormModel);\n","import React from \"react\";\n\nimport Form from 'antd/lib/form';\n\nimport FormAdd from './form';\n\nexport default Form.create({\n  name: 'user_add_form',\n  mapPropsToFields(props) {\n    return {\n\n    };\n  },\n})(FormAdd);\n","'use strict';\n\nimport React from 'react';\nimport Helmet from 'react-helmet';\nimport { Link } from 'react-router';\n\nimport {\n  Pagination,\n  Filter,\n  Sorting,\n  Search,\n  Table,\n  Logout,\n  Text,\n  Filters,\n} from 'modules/app/core';\n\nimport { Menu, PageHeader, Layout, Row, Col, Spin, Icon, Button, message } from 'antd';\n\nconst { Header, Content, Sider } = Layout;\n\nimport UserTableItem from './user_table_item';\nimport UserAddForm from './form_add';\n\nclass Users extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      siderWidth: 200,\n      menuSelectedKeys: ['left-menu-1'],\n\n      collapsedSiderMenu: props.collapsedSiderMenu,\n      visibleUserAddForm: props.visibleUserAddForm,\n    };\n\n    props.modelCurrentUser();\n    props.modelServer();\n  }\n\n  shouldComponentUpdate = (nextProps, nextState) => {\n    const { location, header } = this.props;\n\n    const params = ['name', 'code', 'login'];\n\n    (new Filters({\n      params: params,\n      query: location.query,\n      nextHeader: nextProps.header,\n      header: header,\n      page: this.state.page,\n      action: () => {\n        this.props.modelItems(this.props.location.query);\n      },\n    })).isUpdate();\n\n    return this.props.loading !== nextProps.loading ||\n      this.state.collapsedSiderMenu !== nextState.collapsedSiderMenu ||\n      this.state.visibleUserAddForm !== nextState.visibleUserAddForm ||\n      this.props.items !== nextProps.items;\n  };\n\n  /**\n   * Open the add user form\n   */\n  onCloseUserAddForm = () => {\n    this.setState({\n      visibleUserAddForm: false,\n    });\n  };\n\n  /**\n   * Close the add user form\n   */\n  onOpenUserAddForm = () => {\n    this.setState({\n      visibleUserAddForm: !this.state.visibleUserAddForm,\n    });\n  };\n\n  /**\n   * Open or close the menu\n   * @private\n   */\n  switchSiderMenu = () => {\n    this.setState({\n      collapsedSiderMenu: !this.state.collapsedSiderMenu,\n    });\n  };\n\n  render() {\n    return (\n      <Layout>\n        <Sider width={this.state.siderWidth} trigger={null} collapsible\n               collapsed={this.state.collapsedSiderMenu}>\n          <div className=\"logo\">USER</div>\n          <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={this.state.menuSelectedKeys}>\n            <Menu.Item key=\"left-menu-1\">\n              <Link to=\"/\"><Icon type=\"team\"/><span>Пользователи</span></Link>\n            </Menu.Item>\n            <Menu.Item key=\"left-menu-2\">\n              <Link to=\"/role\"><Icon type=\"cluster\"/><span>Роли</span></Link>\n            </Menu.Item>\n          </Menu>\n        </Sider>\n        <Layout>\n          <Spin tip=\"Загрузка...\" size=\"large\" spinning={this.props.loading}>\n            <Helmet title=\"Users\"/>\n            <Header>\n              <PageHeader\n                subTitle=\"Пользователи\"\n                title={<span>\n                  <Icon\n                    className=\"trigger\"\n                    type={this.state.collapsedSiderMenu ? 'menu-unfold' : 'menu-fold'}\n                    onClick={this.switchSiderMenu}\n                  />Users\n                </span>}\n                extra={[\n                  <Button\n                    key=\"add-user\"\n                    className=\"btn-user-add\"\n                    type=\"primary\"\n                    icon=\"user-add\"\n                    size=\"small\"\n                    onClick={() => this.onOpenUserAddForm()}\n                  >\n                    Добавить пользователя\n                  </Button>,\n                  <Logout key=\"logout-1\"/>,\n                ]}\n              />\n            </Header>\n            <Content className='user-list'>\n              <Row>\n                <Col span={24}>\n                  <Table overlayClassName=\"table-users\" striped={false} thead={[\n                    <th key=\"ht-1\">\n                      <Filter>\n                        <Search\n                          callback={this.props.setHeader}\n                          model=\"code\"\n                          value={this.props.header.code}\n                          placeholder=\"Код\"\n                        />\n                        <Sorting id='code' fsort={this.props.sort}/>\n                      </Filter>\n                    </th>,\n                    <th key=\"ht-2\">\n                      <Filter>\n                        <Search\n                          callback={this.props.setHeader}\n                          model=\"name\"\n                          value={this.props.header.name}\n                          placeholder=\"Имя\"\n                        />\n                        <Sorting id='name' fsort={this.props.sort}/>\n                      </Filter>\n                    </th>,\n                    <th key=\"ht-3\">\n                      <Filter>\n                        <Search\n                          callback={this.props.setHeader}\n                          model=\"login\"\n                          value={this.props.header.login}\n                          placeholder=\"Логин\"\n                        />\n                        <Sorting id='login' fsort={this.props.sort}/>\n                      </Filter>\n                    </th>,\n                    <th key=\"ht-4\">\n                      <Filter>\n                        <Text>Админ</Text>\n                      </Filter>\n                    </th>,\n                    <th key=\"ht-5\">\n                      <Filter>\n                        <Text>Перепечать</Text>\n                      </Filter>\n                    </th>,\n                    <th key=\"ht-6\"></th>,\n                  ]}>\n                    {\n                      (this.props.items)\n                        ?\n                        this.props.items.map((item) => <UserTableItem\n                          key={item.operator_id}\n                          userId={item.operator_id}\n                          userCode={item.operator_code}\n                          userName={item.operator_name}\n                          userLogin={item.operator_login}\n                          isAdmin={item.is_admin}\n                          isReprintAdmin={item.is_reprint_admin}\n\n                          access={this.props.access}\n\n                          onDeleteUser={this.props.modelDelete}\n                        />)\n                        : null\n                    }\n                  </Table>\n                </Col>\n                <Col span={24}>\n                  {\n                    (this.props.paginate)\n                      ?\n                      <Pagination\n                        url=\"/\"\n                        data={this.props.paginate}\n                        onQuery={this.props.modelItems}\n                      />\n                      : null\n                  }\n                </Col>\n                <UserAddForm\n                  title=\"Добавить пользователя\"\n                  visible={this.state.visibleUserAddForm}\n                  urlQuery={this.props.location.query}\n                  submitForm={this.props.modelAdd}\n                  onClose={this.onCloseUserAddForm}\n                  wrappedComponentRef={(form) => this.form = form}\n                />\n              </Row>\n            </Content>\n          </Spin>\n        </Layout>\n      </Layout>\n    );\n  }\n}\n\nUsers.defaultProps = {\n  loading: true,\n  location: {\n    query: {},\n  },\n};\n\nexport default Users;\n","import { bindActionCreators } from 'redux';\nimport { shallowEqual } from 'react-redux';\nimport { connectAdvanced } from 'react-redux';\n\nimport model from '../../store/actions/user';\n\nimport Users from './main';\n\nexport default connectAdvanced((dispatch) => {\n  let ownProps = {};\n  let result = {};\n\n  const actions = bindActionCreators({model}, dispatch);\n\n  const actionUser = (action, data, callback) => actions.model(action, data, callback);\n\n  const modelCurrentUser = () => actions.model('current');\n\n  const modelItems  = (data) => actions.model('items', data);\n  const modelHeader = (data) => actions.model('header', data);\n\n  const modelAdd = (data) => actions.model('add', data, (json) => {\n    modelItems(ownProps.location.query);\n    return json;\n  });\n\n  /**\n   * User delete\n   * @param id\n   */\n  const modelDelete = (id) => actions.model('delete', {id: id}, (json) => {\n    modelItems(ownProps.location.query);\n    return json;\n  });\n\n  /**\n   * Downloading data from a remote server\n   * @private\n   */\n  const modelServer = () => {\n    modelHeader(ownProps.location.query);\n    modelItems(ownProps.location.query);\n  };\n\n  const setHeader = (name, value) => {\n    ownProps.location.query[name] = value;\n    modelHeader(ownProps.location.query);\n  };\n\n  const sort = (sort) => {\n    ownProps.location.query.sort = sort;\n    modelItems(ownProps.location.query);\n  };\n\n  return (nextState, nextOwnProps) => {\n    const isNull = (value) => value === null;\n\n    const loading  = isNull(nextState.user.items) ? true : false;\n    const header   = isNull(nextState.user.items) ? [] : nextState.user.header;\n    const items    = isNull(nextState.user.items) ? null : nextState.user.items.data;\n    const paginate = isNull(nextState.user.items) ? null : nextState.user.items.paginate;\n    const access   = isNull(nextState.user.items) ? null : nextState.user.items.access;\n    const current  = isNull(nextState.user.items) ? null : nextState.user.current;\n\n    const nextResult = {\n      ...nextOwnProps,\n      loading,\n      header,\n      items,\n      paginate,\n      access,\n      current,\n      actionUser,\n      modelCurrentUser,\n      modelItems,\n      modelHeader,\n      modelServer,\n      modelAdd,\n      modelDelete,\n      sort\n    };\n    ownProps = nextOwnProps;\n    if (!shallowEqual(result, nextResult)) {\n      result = nextResult\n    }\n\n    return result;\n  }\n})(Users);\n","import React, {Component} from 'react';\nimport {Provider} from 'react-redux';\n\nimport UserStore from './store/state';\n\nimport Index from './component/main';\n\nimport './less/index.less';\n\nclass UsersMain extends Component {\n\n    static defaultProps = {\n        visibleUserAddForm: false,\n        collapsedSiderMenu: true\n    };\n\n    render() {\n        return (\n            <Provider store={UserStore}>\n                <Index\n                    header={this.props.header}\n                    location={this.props.location}\n                    visibleUserAddForm={this.props.visibleUserAddForm}\n                    collapsedSiderMenu={this.props.collapsedSiderMenu}\n                />\n            </Provider>\n        );\n    }\n}\n\nexport default UsersMain;"],"sourceRoot":""}
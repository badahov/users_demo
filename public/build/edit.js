(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[7],{157:function(e,t,r){"use strict";var n=r(42),a=r.n(n);t.a={path:"user/edit/:userId/:page",getComponent:function(e,t){Promise.all([r.e(1),r.e(0),r.e(3),r.e(2),r.e(5),r.e(4),r.e(6),r.e(7),r.e(19)]).then(r.bind(null,284)).then((function(e){return t(null,e.default)})).catch((function(){return a.a}))}}},282:function(e,t,r){},284:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(14),i=r(11),l=r(59),c=r(56),u=r(48),s=Object(i.a)(Object(l.a)("system"),u.a)(i.d)(Object(i.c)({system:Object(c.a)({name:"system",models:[{name:"user",points:["item","current"]}]})})),p=r(60),f=r(21),m=r(4),b="interface-users/user",d="interface-users/user-edit",y="interface-users/user-current";function h(e,t,r){switch(e){case"userItem":return new f.a({data:t,pointApi:b,type:"GET"}).result();case"userCurrent":return new f.a({domain:m.a.domain.auth,type:"GET",pointApi:y}).result();case"userEdit":return new f.a({data:t,pointApi:d}).result()}}var g=r(69),O=r.n(g),v=r(15),E=r(298),w=r(163),j=r(308),_=r(61),P=r(31),S=r(301),k=r(304),x=r(302),C=r(29);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?R(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:5}}},U=function(e){function t(){var e,r;I(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return q(R(r=A(this,(e=N(t)).call.apply(e,[this].concat(a)))),"handleSubmit",(function(e){e.preventDefault(),r.props.form.validateFieldsAndScroll((function(e,t){e||(t.operator_id=Number(r.props.user_id),r.props.submit(t))}))})),q(R(r),"handleConfirmBlur",(function(e){var t=e.target.value;r.setState({confirmDirty:r.state.confirmDirty||!!t})})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=!this.props.item;return a.a.createElement(w.a,{tip:"Загрузка...",size:"large",spinning:t},a.a.createElement(_.a,null,a.a.createElement(P.a,{span:24},a.a.createElement(j.a,T({},z,{onSubmit:this.handleSubmit}),a.a.createElement(_.a,{gutter:16,style:{marginBottom:"50px"}},a.a.createElement(j.a.Item,{label:"Код",hasFeedback:!0},e("operator_code",{rules:[{required:!0,message:"Пожалуйста, ввидите код пользователя"}]})(a.a.createElement(S.a,{style:{width:"65%"},min:0,placeholder:"Код пользователя"}))),a.a.createElement(j.a.Item,{label:"Имя",hasFeedback:!0},e("operator_name",{rules:[{required:!0,message:"Пожалуйста, ввидите имя пользователя"}]})(a.a.createElement(k.a,{placeholder:"Имя пользователя"}))),a.a.createElement(j.a.Item,{label:"Логин",hasFeedback:!0},e("operator_login",{rules:[{required:!0,message:"Пожалуйста, ввидите логин пользователя"}]})(a.a.createElement(k.a,{placeholder:"Логин пользователя"}))),a.a.createElement(j.a.Item,{label:"Администратор"},e("is_admin",{valuePropName:"checked"})(a.a.createElement(x.a,null))),a.a.createElement(j.a.Item,{label:"Перепечать"},e("is_reprint_admin",{valuePropName:"checked"})(a.a.createElement(x.a,null)))),a.a.createElement(_.a,{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px 0 10px",background:"#fff",textAlign:"left"}},a.a.createElement(C.a,{type:"primary",htmlType:"submit"},"Изменить"))))))}}])&&D(r.prototype,n),o&&D(r,o),t}(n.Component);q(U,"defaultProps",{item:null});var G=U;function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V=j.a.create({name:"user_data_form",mapPropsToFields:function(e){return{operator_code:j.a.createFormField(H({},e.item.operator_code,{value:e.item.operator_code})),operator_name:j.a.createFormField(H({},e.item.operator_name,{value:e.item.operator_name})),operator_login:j.a.createFormField(H({},e.item.operator_login,{value:e.item.operator_login})),is_admin:j.a.createFormField(H({},e.item.is_admin,{value:e.item.is_admin})),is_reprint_admin:j.a.createFormField(H({},e.item.is_reprint_admin,{value:e.item.is_reprint_admin}))}}})(G);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:5}}},ee=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=W(t).call(this,e),r=!a||"object"!==L(a)&&"function"!=typeof a?X(n):a,Z(X(r),"handleSubmit",(function(e){e.preventDefault(),r.props.form.validateFieldsAndScroll((function(e,t){e||(delete t.confirm,t.operator_id=Number(r.props.user_id),r.props.submit(t))}))})),Z(X(r),"handleConfirmBlur",(function(e){var t=e.target.value;r.setState({confirmDirty:r.state.confirmDirty||!!t})})),Z(X(r),"compareToFirstPassword",(function(e,t,n){var a=r.props.form;t&&t!==a.getFieldValue("password")?n("Пароли не совпадают!"):n()})),Z(X(r),"validateToNextPassword",(function(e,t,n){var a=r.props.form;t&&r.state.confirmDirty&&a.validateFields(["confirm"],{force:!0}),n()})),r.state={confirmDirty:!1},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return a.a.createElement(_.a,null,a.a.createElement(P.a,{span:24},a.a.createElement(j.a,M({},$,{onSubmit:this.handleSubmit}),a.a.createElement(_.a,{gutter:16,style:{marginBottom:"50px"}},a.a.createElement(j.a.Item,{label:"Пароль",hasFeedback:!0},e("password",{rules:[{required:!0,message:"Пожалуйста, введите пароль!"},{validator:this.validateToNextPassword}]})(a.a.createElement(k.a.Password,null))),a.a.createElement(j.a.Item,{label:"Повторить пароль",hasFeedback:!0},e("confirm",{rules:[{required:!0,message:"Пожалуйста, повторите пароль!"},{validator:this.compareToFirstPassword}]})(a.a.createElement(k.a.Password,{onBlur:this.handleConfirmBlur})))),a.a.createElement(_.a,{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px 0 10px",background:"#fff",textAlign:"left"}},a.a.createElement(C.a,{type:"primary",htmlType:"submit"},"Изменить")))))}}])&&Q(r.prototype,n),o&&Q(r,o),t}(n.Component),te=j.a.create({name:"user_password_form",mapPropsToFields:function(){return null}})(ee),re=r(71);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var se=re.a.Option,pe={labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:15}}},fe=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=ie(t).call(this,e),r=!o||"object"!==ne(o)&&"function"!=typeof o?le(n):o,ue(le(r),"handleSubmit",(function(e){e.preventDefault(),r.props.form.validateFieldsAndScroll((function(e,t){if(!e){t.operator_id=Number(r.props.user_id);var n=t.roles.map((function(e){return{id:Number(e)}}));t.roles=n,r.props.submit(t)}}))})),ue(le(r),"handleSelectedChange",(function(e){r.setState({selected:e})})),ue(le(r),"shouldComponentUpdate",(function(e,t){return t.options!==r.state.options||t.selected!==r.state.selected})),new f.a({pointApi:"interface-users/role-select"}).send().then((function(e){var t=[];e.map((function(e){t.push(a.a.createElement(se,{key:e.id},e.title))})),r.setState({options:t})})),r.state={options:[],selected:[]},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return a.a.createElement(_.a,null,a.a.createElement(P.a,{span:24},a.a.createElement(j.a,ae({},pe,{onSubmit:this.handleSubmit}),a.a.createElement(_.a,{gutter:16,style:{marginBottom:"50px"}},a.a.createElement(j.a.Item,{label:"Выбор ролей",hasFeedback:!0},e("roles",{})(a.a.createElement(re.a,{mode:"multiple",style:{width:"100%"},placeholder:"Пожалуйста, выберите роли",onChange:this.handleSelectedChange},this.state.options)))),a.a.createElement(_.a,{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px 0 10px",background:"#fff",textAlign:"left"}},a.a.createElement(C.a,{type:"primary",htmlType:"submit"},"Изменить")))))}}])&&oe(r.prototype,n),o&&oe(r,o),t}(n.Component);function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ye=j.a.create({name:"user_roles_form",mapPropsToFields:function(e){var t=[];return e.item.roles&&(t=e.item.roles.map((function(e){return String(e.id)}))),{roles:j.a.createFormField(be({},e.operator_code,{value:t}))}}})(fe),he=r(10),ge=r(305),Oe=r(3),ve=r(115),Ee=E.a.Header,we=function(e){return a.a.createElement(Ee,null,a.a.createElement(ge.a,{title:a.a.createElement("span",null,a.a.createElement(Oe.a,{className:"trigger",type:e.collapsed?"menu-unfold":"menu-fold",onClick:e.toggle}),e.title),subTitle:e.subTitle,extra:e.extra}),a.a.createElement(ve.a,{mode:"horizontal"},a.a.createElement(ve.a.Item,{key:"team"},a.a.createElement(he.a,{to:"/"},a.a.createElement(Oe.a,{type:"team"}),"Пользователи")),a.a.createElement(ve.a.Item,{key:"role"},a.a.createElement(he.a,{to:"/role"},a.a.createElement(Oe.a,{type:"cluster"}),"Роли"))))},je=E.a.Sider,_e=function(e){var t=e.collapsed,r=e.userId,n="1";switch(e.page){case"data":n="1";break;case"password":n="3";break;case"roles":n="4"}return a.a.createElement(je,{width:250,trigger:null,collapsible:!0,collapsed:t},a.a.createElement("div",{className:"logo"},"USER"),a.a.createElement(ve.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[n]},a.a.createElement(ve.a.Item,{key:"1"},a.a.createElement(he.a,{to:"/user/edit/".concat(r,"/data")},a.a.createElement(Oe.a,{type:"idcard"}),a.a.createElement("span",null,"Данные пользователя"))),a.a.createElement(ve.a.Item,{key:"3"},a.a.createElement(he.a,{to:"/user/edit/".concat(r,"/password")},a.a.createElement(Oe.a,{type:"safety"}),a.a.createElement("span",null,"Изменение пароля"))),a.a.createElement(ve.a.Item,{key:"4"},a.a.createElement(he.a,{to:"/user/edit/".concat(r,"/roles")},a.a.createElement(Oe.a,{type:"control"}),a.a.createElement("span",null,"Управление ролями")))))};function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Te=E.a.Content,Ie=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=ke(t).call(this,e),r=!o||"object"!==Pe(o)&&"function"!=typeof o?xe(n):o,Fe(xe(r),"toggle",(function(){r.setState({collapsed:!r.state.collapsed})})),Fe(xe(r),"renderTemplate",(function(e){var t,n=r.props,o=n.item,i=n.params.userId,l=n.modelEdit;switch(e){case"password":t=a.a.createElement(te,{title:"Добавить пользователя",user_id:i,submit:l,wrappedComponentRef:function(e){return r.form=e}});break;case"roles":t=a.a.createElement(ye,{title:"Добавить пользователя",user_id:i,item:o,submit:l,wrappedComponentRef:function(e){return r.form=e}});break;default:t=a.a.createElement(V,{title:"Добавить пользователя",user_id:i,item:o,submit:l,wrappedComponentRef:function(e){return r.form=e}})}return t})),r.state={collapsed:!1},e.modelServer(),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.item,r=e.current,n=e.params,o=n.page,i=n.userId,l=this.state.collapsed;if(t&&r){var c=t.operator_name,u=t.operator_login,s=!r;return a.a.createElement(E.a,null,a.a.createElement(_e,{collapsed:l,page:o,userId:i}),a.a.createElement(E.a,null,a.a.createElement(O.a,{title:"Users"}),a.a.createElement(we,{title:c,subTitle:"login: ".concat(u),collapsed:l,toggle:this.toggle,extra:[a.a.createElement(v.c,{key:"logout-1"})]}),a.a.createElement(Te,{className:"user-edit"},a.a.createElement(w.a,{tip:"Загрузка...",size:"large",spinning:s},this.renderTemplate(o)))))}return null}}])&&Se(r.prototype,n),o&&Se(r,o),t}(a.a.Component);Ie.defaultProps={params:{userId:null}};var De=Ie;function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Re=Object(o.c)((function(e){var t={},r={},n=Object(p.a)(h,"system",e),a=function(e){return n("userItem",e)},i=function(e){return n("userEdit",e,(function(e){return a(t.location.query),e}))},l=function(){n("userCurrent"),a({id:t.params.userId})};return function(e,n){var a=function(e){return null===e},c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){Ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n,{loading:!!a(e.system.userItem),item:a(e.system.userItem)?null:e.system.userItem.data,access:a(e.system.userItem)?null:e.system.userItem.access,current:a(e.system.userCurrent)?null:e.system.userCurrent.data,modelEdit:i,modelServer:l});return t=n,Object(o.d)(r,c)||(r=c),r}}))(De);r(282),t.default=function(e){var t=e.location,r=e.params;return a.a.createElement(o.a,{store:s},a.a.createElement(Re,{location:t,params:r}))}}}]);
//# sourceMappingURL=edit.js.map
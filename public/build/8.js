(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[8],{111:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return b});var r=n(1),o=n.n(r),a=n(8),i=n(439),s=n(138),c=n(62);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=i.a.confirm,y=e.env.API_AUTH,b=function(t){function n(){var t,r,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return o=this,i=(t=p(n)).call.apply(t,[this].concat(c)),r=!i||"object"!==l(i)&&"function"!=typeof i?f(o):i,m(f(r),"loginPage",function(){a.c.push("/login")}),m(f(r),"handleLogout",function(){var t=f(r);h({title:"Вы хотите выйти?",okText:"Да",okType:"danger",cancelText:"Нет",onOk:function(){var n=y+e.env.SET_POINT+"/auth/log-out",r=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);r.open("POST",n,!0),r.withCredentials=!0,r.send(),r.onload=function(){var n=e.env.API+e.env.SET_POINT+"/auth/log-out",r=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);r.open("POST",n,!0),r.withCredentials=!0,r.send(),r.onload=function(){t.loginPage()}}},onCancel:function(){console.log("Cancel")}})}),r}var i,b,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,r["Component"]),i=n,(b=[{key:"render",value:function(){return o.a.createElement(s.a,{type:"danger",size:"small",onClick:this.handleLogout},o.a.createElement(c.a,{type:"logout"})," Выход")}}])&&u(i.prototype,b),v&&u(i,v),n}()}).call(this,n(27))},416:function(e,t,n){"use strict";(function(e){var r=n(1),o=n.n(r),a=n(124),i=n.n(a),s=n(55),c=n.n(s),l=n(8),u=n(71),p=n(67),f=n(417),d=n(429),m=n(431),h=n(441),y=n(435),b=n(428),v=n(62),E=n(438),g=n(410),O=n(323),w=n(328),S=n(445),R=n(433),_=n(111),T=n(423);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=m.a.Header,D=m.a.Content,L=m.a.Sider,x=h.a.Panel,U=y.a.Meta,M=function(t){function n(t){var r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,a=A(n).call(this,t),r=!a||"object"!==P(a)&&"function"!=typeof a?j(o):a,C(j(r),"toggle",function(){r.setState({collapsed:!r.state.collapsed})}),C(j(r),"onClose",function(){r.setState({visibleSourceAddForm:!1})}),C(j(r),"onOpen",function(){r.setState({visibleSourceAddForm:!r.state.visibleSourceAddForm,visibleId:1})}),C(j(r),"onRoleSelect",function(t){for(var n=0;n<r.props.role.length;n++){var o=r.props.role[n];if(o.id===t){r.setState({selectRoleName:o.name,selectRoleId:o.id}),r.props.actionPermission("item",{id:o.id});break}}e(".list-role-item").css({background:"#fff"}),e(".list-role-item-"+t).css({background:"#fafafa"})}),C(j(r),"shouldComponentUpdate",function(e,t){return e.permission!==r.props.permission||t.visibleSourceAddForm!==r.state.visibleSourceAddForm||t.collapsed!==r.state.collapsed||e.role!==r.props.role}),C(j(r),"permissionsSwitch",function(e,t,n){r.props.actionPermission("switch",{enabled:n,permission_id:t,role_id:r.state.selectRoleId})}),r.state={selectRoleName:"Гость",selectRoleId:0,collapsed:!0,visibleSourceAddForm:!1,visibleId:null,items:t.items,loading:!0,operationId:""},r.props.actionCurrent(),r.props.actionRole("items"),r.props.actionPermission("item",{id:0}),r}var r,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(n,o.a.Component),r=n,(a=[{key:"render",value:function(){var e=this;if(this.props.current){var t=!this.props.current;return o.a.createElement(m.a,null,o.a.createElement(L,{width:300,trigger:null,collapsible:!0,collapsed:this.state.collapsed},o.a.createElement("div",{className:"logo"},"SUP"),o.a.createElement(b.b,{theme:"dark",mode:"inline",defaultSelectedKeys:["2"]},o.a.createElement(b.b.Item,{key:"1"},o.a.createElement(l.a,{to:"/"},o.a.createElement(v.a,{type:"team"}),o.a.createElement("span",null,"Пользователи"))),o.a.createElement(b.b.Item,{key:"2"},o.a.createElement(l.a,{to:"/role"},o.a.createElement(v.a,{type:"cluster"}),o.a.createElement("span",null,"Роли"))),o.a.createElement(b.b.ItemGroup,{key:"roles",title:""},this.props.role?this.props.role.map(function(t){return o.a.createElement(b.b.Item,{onClick:function(){e.onRoleSelect(t.id)},key:"role-".concat(t.id)},o.a.createElement(v.a,{type:"property-safety"}),o.a.createElement("span",null,t.name))}):null))),o.a.createElement(m.a,null,o.a.createElement(i.a,{title:this.state.selectRoleName}),o.a.createElement(N,null,o.a.createElement(E.a,{title:o.a.createElement("span",null,o.a.createElement(v.a,{className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle}),"Управление ролями"),subTitle:"текущая: ".concat(this.state.selectRoleName),extra:[o.a.createElement(l.a,{key:"add-user"},o.a.createElement(v.a,{type:"plus",onClick:function(){return e.onOpen()}})),o.a.createElement(_.a,{key:"logout-1"})]})),o.a.createElement(D,{className:"user-list"},o.a.createElement(g.a,{tip:"Загрузка...",size:"large",spinning:t},o.a.createElement(O.a,null,o.a.createElement(w.a,{span:24},o.a.createElement(h.a,{defaultActiveKey:["1"]},this.props.permission.modules?this.props.permission.modules.map(function(t){return o.a.createElement(x,{header:"".concat(t.name,": ").concat(t.desc),key:t.group},o.a.createElement(S.a,{grid:{gutter:16,xs:1,sm:1,md:2,lg:3,xl:4,xxl:4},dataSource:t.permissions,renderItem:function(t,n){return o.a.createElement(S.a.Item,null,o.a.createElement(l.a,{onClick:function(){e.permissionsSwitch(t.group,t.id,t.enabled)}},o.a.createElement(R.a,{content:t.desc,title:t.name},o.a.createElement(y.a,{className:c()("permissions-default",{"permissions-enabled":t.enabled}),size:"small"},o.a.createElement(U,{avatar:t.enabled?o.a.createElement(v.a,{type:"check"}):o.a.createElement(v.a,{type:"stop"}),title:t.name})))))}}))}):null)),o.a.createElement(T.a,{visible:this.state.visibleSourceAddForm,visibleId:this.state.visibleId,title:"Роли",onRoleSelect:this.onRoleSelect,roleList:this.props.role,actionRole:this.props.actionRole,onClose:this.onClose,wrappedComponentRef:function(t){return e.form=t}}))))))}return null}}])&&I(r.prototype,a),s&&I(r,s),n}();t.a=Object(u.connect)(function(e){return{access:e.user.access,action:e.user.action,current:e.user.current,role:e.role.role,permission:e.role.permission}},function(e){return Object(p.bindActionCreators)({actionCurrent:f.a,actionEdit:f.b,actionPermission:d.a,actionRole:d.b,dispatch:e},e)})(M)}).call(this,n(101))},417:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a});var r=n(418);function o(){return{type:"USER_CURRENT",actions:["USER_CURRENT_LOADING","USER_CURRENT_LOADED","USER_CURRENT_LOAD_FAILURE"],promise:Object(r.a)()}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"USER_EDIT",actions:["USER_EDIT_LOADED"],model:Object(r.b)(e,t,n)}}},418:function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(90);function o(e){return new r.a({pointApi:"interface-users/user",type:r.a.get,data:e}).result()}function a(){return new r.a({domain:e.env.API_AUTH,type:r.a.get,pointApi:"interface-users/user-current"}).result()}function i(e,t,n){return new r.a({pointApi:"interface-users/user-edit",data:e}).result().then(function(e){e&&n instanceof Function&&n(t)})}}).call(this,n(27))},423:function(e,t,n){"use strict";(function(e){var r=n(1),o=n.n(r),a=n(8),i=n(138),s=n(440),c=n(444),l=n(443),u=n(323),p=n(328),f=n(434),d=n(445),m=n(432),h=n(62);function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){w(e,t,n[t])})}return e}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=i.a.Group,R=s.a.Search,_=function(t){function n(t){var r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,a=E(n).call(this,t),r=!a||"object"!==b(a)&&"function"!=typeof a?g(o):a,w(g(r),"handleSubmit",function(e){e.preventDefault(),r.props.form.validateFieldsAndScroll(function(e,t){e||(delete t.confirm,r.props.actionRole("add",t))})}),w(g(r),"onClose",function(){r.props.onClose()}),w(g(r),"onRoleEditAction",function(t){e(".link-role-name-"+t).hide(),e(".input-role-name-"+t).show(),e(".btn-role-edit-"+t).hide(),e(".btn-role-delete-"+t).hide(),e(".btn-role-save-"+t).show()}),w(g(r),"onRoleDelete",function(e){r.props.actionRole("delete",{id:e},function(e){return"ok"===e.status?(e.msg&&(c.a.success(e.msg),r.props.onRoleSelect(0)),!e.result||e.result):e.msg?(c.a.error(r._errorMsg(e.msg)),!1):void 0})}),w(g(r),"onRoleEdit",function(t,n){r.props.actionRole("edit",{id:t,name:n},function(n){return"ok"===n.status?(n.msg&&c.a.success(n.msg),!n.result||(e(".link-role-name-"+t).show(),e(".input-role-name-"+t).hide(),e(".btn-role-edit-"+t).show(),e(".btn-role-delete-"+t).show(),e(".btn-role-save-"+t).hide(),n.result)):n.msg?(c.a.error(r._errorMsg(n.msg)),!1):void 0})}),w(g(r),"shouldComponentUpdate",function(e,t){return r.props.visible!==e.visible&&r.setState({visible:e.visible}),!0}),r.state={visible:t.visible},r}var y,_,T;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(n,r["Component"]),y=n,(_=[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return o.a.createElement(l.a,{title:this.props.title,width:550,onClose:this.onClose,visible:this.state.visible,zIndex:1050},o.a.createElement(u.a,{style:{marginBottom:"20px"}},o.a.createElement(p.a,{span:24},o.a.createElement(f.a,{layout:"inline",onSubmit:this.handleSubmit},o.a.createElement(f.a.Item,{hasFeedback:!0},t("name",{})(o.a.createElement(s.a,{placeholder:"Название новой роли"}))),o.a.createElement(f.a.Item,null,o.a.createElement(i.a,{type:"primary",htmlType:"submit"},"Добавить")))),o.a.createElement(p.a,{span:24},o.a.createElement(d.a,{size:"small",style:{marginTop:"10px"},bordered:!0,dataSource:this.props.roleList,renderItem:function(t){return o.a.createElement(d.a.Item,{className:"list-role-item list-role-item-".concat(t.id),actions:t.editable?[o.a.createElement(S,null,o.a.createElement(i.a,{className:"btn-role-edit btn-role-edit-".concat(t.id),onClick:function(){return e.onRoleEditAction(t.id)},size:"small",icon:"edit"}),o.a.createElement(m.a,{title:"Удалить роль?",onConfirm:function(){return e.onRoleDelete(t.id)},okText:"Да",cancelText:"Нет",placement:"left",zIndex:1050},o.a.createElement(i.a,{className:"btn-role-delete btn-role-delete-".concat(t.id),size:"small",icon:"delete"})))]:null},o.a.createElement(a.a,{onClick:function(){return e.props.onRoleSelect(t.id)},className:"link-role-name link-role-name-".concat(t.id),style:{width:"100%"}},t.name),o.a.createElement(R,{className:"input-role-name input-role-name-".concat(t.id),placeholder:"Название новой роли",enterButton:o.a.createElement(h.a,{type:"save"}),size:"small",defaultValue:t.name,onSearch:function(n){return e.onRoleEdit(t.id,n)}}))}}))))}}])&&v(y.prototype,_),T&&v(y,T),n}();w(_,"defaultProps",{visible:!0,visibleId:null,successionId:null,operationId:null,inputSourceId:null,stageId:null,title:null}),t.a=f.a.create({name:"user_add_form",mapPropsToFields:function(e){return{title:f.a.createFormField(y({},e.sourceTitle,{value:e.sourceTitle}))}}})(_)}).call(this,n(101))},424:function(e,t,n){},429:function(e,t,n){"use strict";var r=n(90);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a.post;return new r.a({pointApi:e,type:n,data:t})}function a(e,t,n){switch(e){case"item":return o("interface-users/permission",t,r.a.get).result();case"switch":return o("interface-users/role-permission",t,r.a.post).result().then(function(e){if(e)return o("interface-users/permission",{id:t.role_id},r.a.get).result()})}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;switch(e){case"items":return o("interface-users/roles",t,r.a.get).result();case"add":return o("interface-users/role-add",t,r.a.post).result().then(function(e){if(e)return o("interface-users/roles").result()});case"edit":return o("interface-users/role-edit",t,r.a.post).result().then(function(e){if(e)return o("interface-users/roles").result(n)});case"delete":return o("interface-users/role-delete",t,r.a.post).result(n).then(function(e){if(e)return o("interface-users/roles").result()})}}function s(e,t,n){return{type:"PERMISSION",actions:["PERMISSION_LOADING","PERMISSION_LOADED","PERMISSION_LOAD_FAILURE"],promise:a(e,t)}}function c(e,t,n){return{type:"ROLE",actions:["ROLE_LOADING","ROLE_LOADED","ROLE_LOAD_FAILURE"],promise:i(e,t,n)}}n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c})},442:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"user",function(){return d}),n.d(r,"role",function(){return m});var o=n(1),a=n.n(o),i=n(71),s=n(67),c=n(113);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var u=function(e){return function(t){return function(n){switch(n.type){case"USER_CURRENT":case"USER_ITEM":var r=l(n.actions,3),o=r[0],a=r[1],i=r[2];e.dispatch({type:o,data:"start"}),n.promise.then(function(t){e.dispatch({type:a,data:t}),e.dispatch({type:o,data:"end"})},function(t){e.dispatch({type:i,error:t})});break;default:return t(n)}}}};function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var f=function(e){return function(t){return function(n){switch(n.type){case"PERMISSION":case"ROLE":var r=p(n.actions,3),o=r[0],a=r[1],i=r[2];e.dispatch({type:o}),n.promise.then(function(t){e.dispatch({type:a,data:t})},function(t){e.dispatch({type:i,error:t})});break;default:return t(n)}}}},d=Object(s.combineReducers)({action:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ITEM_LOADING":return t.data;default:return e}},current:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_CURRENT_LOADED":return t.data;default:return e}},item:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ITEM_LOADED":return t.data;default:return e}}}),m=Object(s.combineReducers)({role:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ROLE_LOADED":return t.data;default:return e}},permission:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PERMISSION_LOADED":return t.data;default:return e}}}),h=Object(s.applyMiddleware)(u,f,c.a)(s.createStore)(Object(s.combineReducers)(r)),y=n(416);n(424);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,g(t).apply(this,arguments))}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){return a.a.createElement(i.Provider,{store:h},a.a.createElement(y.a,{header:this.props.header,location:this.props.location,params:this.props.params}))}}])&&v(n.prototype,r),s&&v(n,s),t}();t.default=w},80:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return f});var r=n(114),o=n.n(r),a=n(8),i=n(79),s=n.n(i),c=e.env.API_AUTH;function l(){return o.a.get("token")}function u(t){var n=c+e.env.SET_POINT+"/auth/get-xdomain-token",r=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);r.open("POST",n,!0),r.withCredentials=!0,r.send(),r.onload=function(){switch(this.status){case 401:p();break;case 200:var n=JSON.parse(this.responseText),r=t.split("/"),o=r[0]+"//"+r[2]+e.env.SET_POINT+"auth/login",a=new FormData;a.append("xdomainToken",n.xdomainToken);var i=new XMLHttpRequest;i.open("POST",o,!0),i.withCredentials=!0,i.send(a),i.onload=function(){JSON.parse(this.responseText);switch(this.status){case 401:p();break;case 200:location.reload()}}}}}function p(){a.c.push("/login")}function f(){a.c.push("/")}s.a.options={closeButton:!0,progressBar:!0,showMethod:"slideDown",timeOut:4e3}}).call(this,n(27))},90:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var r=n(79),o=n.n(r),a=n(80);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(176);o.a.options={closeButton:!0,progressBar:!0,showMethod:"slideDown",timeOut:4e3};var c=function t(n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"type","POST"),i(this,"data",null),i(this,"pointApi",null),i(this,"domain",e.env.API),i(this,"send",function(){return r._fetch()}),i(this,"result",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return r.send().then(function(t){return e instanceof Function?e(t):"ok"===t.status?(t.msg&&o.a.success(t.msg),!t.result||t.result):t.msg?(o.a.error(r._errorMsg(t.msg)),!1):void 0})}),i(this,"_getUrl",function(){var n="";if(r.type===t.get){var o=null;r.data&&(o=r._getParams(r.data)),n=o?r.domain+e.env.SET_POINT+r.pointApi+"&"+o:r.domain+e.env.SET_POINT+r.pointApi}else n=r.domain+e.env.SET_POINT+r.pointApi;return n}),i(this,"_getFetchParam",function(){return r.type===t.get?{method:t.get,headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}:{method:t.post,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r.data),credentials:"include"}}),i(this,"_fetch",function(){var t=r._getUrl(),n=r._getFetchParam();return s(t,n).then(function(n){if(200===n.status)return n.json();if(500===n.status)throw o.a.error(e.env.ERROR_500),n.statusText;if(404===n.status)throw o.a.error(e.env.ERROR_404),n.statusText;if(417===n.status)throw n.json().then(function(t){t.status?o.a.error(e.env.ERROR_417):o.a.error(r._errorMsg(t.msg))}),n.statusText;if(423===n.status)throw o.a.error(e.env.ERROR_423),n.statusText;if(401!==n.status)throw 403===n.status?(o.a.error(e.env.ERROR_403),n.statusText):n.statusText;Object(a.c)(t)})}),i(this,"_errorMsg",function(e){if("string"==typeof e)return e;var t=['<ul class="list-unstyled">'];return e.map(function(e){return t.push("<li>"+e+"</li>")}),t.push("</ul>"),t.join(" ")}),i(this,"_getParams",function(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&")}),void 0!==n.type&&(this.type=n.type),void 0!==n.data&&(this.data=n.data),void 0!==n.pointApi&&(this.pointApi=n.pointApi),void 0!==n.domain&&(this.domain=n.domain)};i(c,"post","POST"),i(c,"get","GET")}).call(this,n(27))}}]);
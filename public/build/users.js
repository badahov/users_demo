(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[8],{151:function(e,t,r){"use strict";t.a={getComponent:function(e,t){Promise.all([r.e(1),r.e(2),r.e(0),r.e(5),r.e(3),r.e(4),r.e(7),r.e(6),r.e(8),r.e(9),r.e(11),r.e(19)]).then(function(e){t(null,r(274).default)}.bind(null,r)).catch(r.oe)}}},16:function(e,t,r){"use strict";t.a={model:"user",api:{items:"interface-users/items",delete:"interface-users/user-delete",add:"interface-users/user-add",current:"interface-users/user-current"},middleware:["USER_ADD","USER_DELETE","USER_ITEMS","USER_CURRENT","USER_HEADER"]}},269:function(e,t,r){},274:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"user",(function(){return b}));var o=r(0),a=r.n(o),i=r(17),l=r(9),s=r(47),c=r(41),u=r(16),p=function(e){return function(t){return function(r){if(!u.a.middleware.includes(r.type))return t(r);Object(c.a)(e,r)}}},d=r(107),m=u.a.model.toUpperCase(),f=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return e.includes(r.type)?r.data:t}},b=Object(d.combineForms)({loading:f(["".concat(m,"_ITEMS_LOADING"),"".concat(m,"_DELETE_LOADING")]),items:f(["".concat(m,"_ITEMS_LOADED")]),save:f(["".concat(m,"_ADD_LOADED")]),header:f(["".concat(m,"_HEADER_LOADED")]),current:f(["".concat(m,"_CURRENT_LOADED")])},u.a.model),y=Object(l.applyMiddleware)(p,s.a)(l.createStore)(Object(l.combineReducers)(n)),h=r(4),E=r(5);function v(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.e.post;return new h.e({pointApi:e,type:r,data:t})}function g(e,t,r){switch(e.toUpperCase()){case"HEADER":return{code:0!==t.code?t.code:"",name:0!==t.name?t.name:"",login:0!==t.login?t.login:"",status:0===t.status?"0":"1"};case"ITEMS":return new h.e({pointApi:u.a.api.items,data:t}).result();case"DELETE":return v(u.a.api.delete,t,h.e.post).result(r).then((function(e){if(e)return v(u.a.api.items).result()}));case"ADD":return v(u.a.api.add,t,h.e.post).result(r).then((function(e){if(e)return v(u.a.api.items).result()}));case"CURRENT":return new h.e({domain:E.a.domain.auth,type:h.e.get,pointApi:u.a.api.current}).result()}}var O=u.a.model.toUpperCase();function w(e,t,r){var n=e.toUpperCase();return{type:"".concat(O,"_").concat(n),actions:["".concat(O,"_").concat(n,"_LOADING"),"".concat(O,"_").concat(n,"_LOADED"),"".concat(O,"_").concat(n,"_LOAD_FAILURE")],promise:g(e,t,r)}}var _=r(48),S=r.n(_),j=r(12),A=r(288),P=r(109),D=r(3),C=r(157),k=r(295),U=r(27),F=r(58),R=r(30),T=r(1),I=r.n(T),x=r(289);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B=function(e){function t(){return N(this,t),L(this,H(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props,r=t.isAdmin,n=t.isReprintAdmin,o=t.userCode,i=t.userName,l=t.userLogin,s=t.access,c=t.userId,u=r?"Да":"Нет",p=n?"Да":"Нет";return a.a.createElement("tr",null,a.a.createElement("td",null,o),a.a.createElement("td",null,i),a.a.createElement("td",null,l),a.a.createElement("td",null,u),a.a.createElement("td",null,p),a.a.createElement("td",{className:"box-button"},a.a.createElement(U.a.Group,null,s.user.update?a.a.createElement(j.a,{className:"ant-btn ant-btn-primary ant-btn-sm ant-btn-icon-only",title:"Изменить",to:"/user/edit/".concat(c,"/data")},a.a.createElement(D.a,{type:"edit"})):null,s.user.delete?a.a.createElement(x.a,{title:"Удалить пользователя?",onConfirm:function(){return e.props.onDeleteUser(c)},okText:"Да",cancelText:"Нет",placement:"left",zIndex:1050},a.a.createElement(U.a,{type:"primary",size:"small",icon:"delete"})):null)))}}])&&M(r.prototype,n),o&&M(r,o),t}(o.Component);B.propTypes={access:I.a.objectOf(I.a.shape({user:I.a.arrayOf(I.a.shape({delete:I.a.bool.isRequired,update:I.a.bool.isRequired}))})),isAdmin:I.a.bool,isReprintAdmin:I.a.bool,userCode:I.a.number,userId:I.a.number.isRequired,userLogin:I.a.string.isRequired,userName:I.a.string.isRequired};var G=B,W=r(156),K=r.n(W),J=r(290),Q=r(298),Z=r(291),V=r(294),X=r(292);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function re(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?oe(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var le={position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:2e3},se={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12}}},ce=function(e){function t(){var e,r;ee(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return ie(oe(r=re(this,(e=ne(t)).call.apply(e,[this].concat(o)))),"state",{DrawerWidth:550,DrawerZIndex:1050}),ie(oe(r),"handleSubmit",(function(e){e.preventDefault(),r.props.form.validateFieldsAndScroll((function(e,t){e||(delete t.confirm,r.props.submitForm(t))}))})),ie(oe(r),"onClose",(function(){r.props.onClose()})),ie(oe(r),"handleConfirmBlur",(function(e){var t=e.target.value;r.setState({confirmDirty:r.state.confirmDirty||!!t})})),ie(oe(r),"compareToFirstPassword",(function(e,t,n){var o=r.props.form;t&&t!==o.getFieldValue("password")?n("Пароли не совпадают!"):n()})),ie(oe(r),"validateToNextPassword",(function(e,t,n){var o=r.props.form;t&&r.state.confirmDirty&&o.validateFields(["confirm"],{force:!0}),n()})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return a.a.createElement(J.a,{title:this.props.title,width:this.state.DrawerWidth,onClose:this.onClose,visible:this.props.visible,zIndex:this.state.DrawerZIndex},a.a.createElement(Q.a,$({},se,{onSubmit:this.handleSubmit}),a.a.createElement(F.a,{gutter:16,style:{marginBottom:"20px"}},a.a.createElement(Q.a.Item,{label:"Код",hasFeedback:!0},e("operator_code",{rules:[{required:!0,message:"Пожалуйста, ввидите код пользователя"}]})(a.a.createElement(Z.a,{style:{width:"65%"},min:1,placeholder:"Код пользователя"}))),a.a.createElement(Q.a.Item,{label:"Имя",hasFeedback:!0},e("operator_name",{rules:[{required:!0,message:"Пожалуйста, ввидите имя пользователя"}]})(a.a.createElement(V.a,{placeholder:"Имя пользователя"}))),a.a.createElement(Q.a.Item,{label:"Логин",hasFeedback:!0},e("operator_login",{rules:[{required:!0,message:"Пожалуйста, ввидите логин пользователя"}]})(a.a.createElement(V.a,{placeholder:"Логин пользователя"}))),a.a.createElement(Q.a.Item,{label:"Пароль",hasFeedback:!0},e("password",{rules:[{required:!0,message:"Пожалуйста, введите пароль!"},{validator:this.validateToNextPassword}]})(a.a.createElement(V.a.Password,null))),a.a.createElement(Q.a.Item,{label:"Повторить пароль",hasFeedback:!0},e("confirm",{rules:[{required:!0,message:"Пожалуйста, повторите пароль!"},{validator:this.compareToFirstPassword}]})(a.a.createElement(V.a.Password,{onBlur:this.handleConfirmBlur}))),a.a.createElement(Q.a.Item,{label:"Администратор"},e("is_admin",{valuePropName:"checked"})(a.a.createElement(X.a,null))),a.a.createElement(Q.a.Item,{label:"Перепечать"},e("is_reprint_admin",{valuePropName:"checked"})(a.a.createElement(X.a,null)))),a.a.createElement(F.a,{style:le},a.a.createElement(U.a,{onClick:this.onClose,style:{marginRight:8}},"Закрыить"),a.a.createElement(U.a,{type:"primary",htmlType:"submit"},"Отправить"))))}}])&&te(r.prototype,n),o&&te(r,o),t}(o.Component),ue=Q.a.create({name:"user_add_form",mapPropsToFields:function(e){return{}}})(ce),pe=K.a.create({name:"user_add_form",mapPropsToFields:function(e){return{}}})(ue);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ee=A.a.Header,ve=A.a.Content,ge=A.a.Sider,Oe=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=fe(t).call(this,e),r=!o||"object"!==de(o)&&"function"!=typeof o?be(n):o,he(be(r),"shouldComponentUpdate",(function(e,t){var n=r.props,o=n.location,a=n.header;return new h.b({params:["name","code","login"],query:o.query,nextHeader:e.header,header:a,page:r.state.page,action:function(){r.props.modelItems(r.props.location.query)}}).isUpdate(),r.props.loading!==e.loading||r.state.collapsedSiderMenu!==t.collapsedSiderMenu||r.state.visibleUserAddForm!==t.visibleUserAddForm||r.props.items!==e.items})),he(be(r),"onCloseUserAddForm",(function(){r.setState({visibleUserAddForm:!1})})),he(be(r),"onOpenUserAddForm",(function(){r.setState({visibleUserAddForm:!r.state.visibleUserAddForm})})),he(be(r),"switchSiderMenu",(function(){r.setState({collapsedSiderMenu:!r.state.collapsedSiderMenu})})),r.state={siderWidth:200,menuSelectedKeys:["left-menu-1"],collapsedSiderMenu:e.collapsedSiderMenu,visibleUserAddForm:e.visibleUserAddForm},e.modelCurrentUser(),e.modelServer(),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return a.a.createElement(A.a,null,a.a.createElement(ge,{width:this.state.siderWidth,trigger:null,collapsible:!0,collapsed:this.state.collapsedSiderMenu},a.a.createElement("div",{className:"logo"},"USER"),a.a.createElement(P.a,{theme:"dark",mode:"inline",defaultSelectedKeys:this.state.menuSelectedKeys},a.a.createElement(P.a.Item,{key:"left-menu-1"},a.a.createElement(j.a,{to:"/"},a.a.createElement(D.a,{type:"team"}),a.a.createElement("span",null,"Пользователи"))),a.a.createElement(P.a.Item,{key:"left-menu-2"},a.a.createElement(j.a,{to:"/role"},a.a.createElement(D.a,{type:"cluster"}),a.a.createElement("span",null,"Роли"))))),a.a.createElement(A.a,null,a.a.createElement(C.a,{tip:"Загрузка...",size:"large",spinning:this.props.loading},a.a.createElement(S.a,{title:"Users"}),a.a.createElement(Ee,null,a.a.createElement(k.a,{subTitle:"Пользователи",title:a.a.createElement("span",null,a.a.createElement(D.a,{className:"trigger",type:this.state.collapsedSiderMenu?"menu-unfold":"menu-fold",onClick:this.switchSiderMenu}),"Users"),extra:[a.a.createElement(U.a,{key:"add-user",className:"btn-user-add",type:"primary",icon:"user-add",size:"small",onClick:function(){return e.onOpenUserAddForm()}},"Добавить пользователя"),a.a.createElement(h.c,{key:"logout-1"})]})),a.a.createElement(ve,{className:"user-list"},a.a.createElement(F.a,null,a.a.createElement(R.a,{span:24},a.a.createElement(h.h,{overlayClassName:"table-users",striped:!1,thead:[a.a.createElement("th",{key:"ht-1"},a.a.createElement(h.a,null,a.a.createElement(h.f,{callback:this.props.setHeader,model:"code",value:this.props.header.code,placeholder:"Код"}),a.a.createElement(h.g,{id:"code",fsort:this.props.sort}))),a.a.createElement("th",{key:"ht-2"},a.a.createElement(h.a,null,a.a.createElement(h.f,{callback:this.props.setHeader,model:"name",value:this.props.header.name,placeholder:"Имя"}),a.a.createElement(h.g,{id:"name",fsort:this.props.sort}))),a.a.createElement("th",{key:"ht-3"},a.a.createElement(h.a,null,a.a.createElement(h.f,{callback:this.props.setHeader,model:"login",value:this.props.header.login,placeholder:"Логин"}),a.a.createElement(h.g,{id:"login",fsort:this.props.sort}))),a.a.createElement("th",{key:"ht-4"},a.a.createElement(h.a,null,a.a.createElement(h.i,null,"Админ"))),a.a.createElement("th",{key:"ht-5"},a.a.createElement(h.a,null,a.a.createElement(h.i,null,"Перепечать"))),a.a.createElement("th",{key:"ht-6"})]},this.props.items?this.props.items.map((function(t){return a.a.createElement(G,{key:t.operator_id,userId:t.operator_id,userCode:t.operator_code,userName:t.operator_name,userLogin:t.operator_login,isAdmin:t.is_admin,isReprintAdmin:t.is_reprint_admin,access:e.props.access,onDeleteUser:e.props.modelDelete})})):null)),a.a.createElement(R.a,{span:24},this.props.paginate?a.a.createElement(h.d,{url:"/",data:this.props.paginate,onQuery:this.props.modelItems}):null),a.a.createElement(pe,{title:"Добавить пользователя",visible:this.state.visibleUserAddForm,urlQuery:this.props.location.query,submitForm:this.props.modelAdd,onClose:this.onCloseUserAddForm,wrappedComponentRef:function(t){return e.form=t}}))))))}}])&&me(r.prototype,n),o&&me(r,o),t}(a.a.Component);Oe.defaultProps={loading:!0,location:{query:{}}};var we=Oe;function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var je=Object(i.connectAdvanced)((function(e){var t={},r={},n=Object(l.bindActionCreators)({model:w},e),o=function(e,t,r){return n.model(e,t,r)},a=function(){return n.model("current")},s=function(e){return n.model("items",e)},c=function(e){return n.model("header",e)},u=function(e){return n.model("add",e,(function(e){return s(t.location.query),e}))},p=function(e){return n.model("delete",{id:e},(function(e){return s(t.location.query),e}))},d=function(){c(t.location.query),s(t.location.query)},m=function(e){t.location.query.sort=e,s(t.location.query)};return function(e,n){var l=function(e){return null===e},f=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){Se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n,{loading:!!l(e.user.items),header:l(e.user.items)?[]:e.user.header,items:l(e.user.items)?null:e.user.items.data,paginate:l(e.user.items)?null:e.user.items.paginate,access:l(e.user.items)?null:e.user.items.access,current:l(e.user.items)?null:e.user.current,actionUser:o,modelCurrentUser:a,modelItems:s,modelHeader:c,modelServer:d,modelAdd:u,modelDelete:p,sort:m});return t=n,Object(i.shallowEqual)(r,f)||(r=f),r}}))(we);r(269);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ce(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fe,Re,Te,Ie=function(e){function t(){return Pe(this,t),Ce(this,ke(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return a.a.createElement(i.Provider,{store:y},a.a.createElement(je,{header:this.props.header,location:this.props.location,visibleUserAddForm:this.props.visibleUserAddForm,collapsedSiderMenu:this.props.collapsedSiderMenu}))}}])&&De(r.prototype,n),o&&De(r,o),t}(o.Component);Te={visibleUserAddForm:!1,collapsedSiderMenu:!0},(Re="defaultProps")in(Fe=Ie)?Object.defineProperty(Fe,Re,{value:Te,enumerable:!0,configurable:!0,writable:!0}):Fe[Re]=Te;t.default=Ie}}]);
//# sourceMappingURL=users.js.map
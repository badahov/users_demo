(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[9],{160:function(e,t,r){"use strict";var a=r(37),n=r.n(a);t.a={getComponent:function(e,t){Promise.all([r.e(1),r.e(0),r.e(3),r.e(2),r.e(5),r.e(4),r.e(9),r.e(17)]).then(r.bind(null,291)).then((function(e){return t(null,e.default)})).catch((function(){return n.a}))}}},284:function(e,t,r){},291:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(1),l=r.n(o),i=r(16),s=r(10),u=r(51),c=r(63),d=r(60),m=Object(s.a)(Object(c.a)("system"),u.a)(s.d)(Object(s.c)({system:Object(d.a)({name:"system",models:[{name:"user",points:["header","items","current"]}]})})),p=r(66),f=r.n(p),b=r(64),y=r(21),h=r(4),E="interface-users/items",v="interface-users/user-delete",g="interface-users/user-add",w="interface-users/user-current";function O(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return new y.a({pointApi:e,type:r,data:t})}function S(e,t,r){switch(e){case"userHeader":return{code:0!==t.code?t.code:"",name:0!==t.name?t.name:"",login:0!==t.login?t.login:"",status:0===t.status?"0":"1"};case"userItems":return new y.a({data:t,pointApi:E}).result();case"userDelete":return O(v,t).result(r);case"userAdd":return O(g,t).result(r);case"userCurrent":return new y.a({domain:h.a.domain.auth,type:"GET",pointApi:w}).result();default:return null}}var q=r(22),R=r.n(q),j=r(31),C=r(11),_=r(304),k=r(119),A=r(3),P=r(165),F=r(311),I=r(29),U=r(65),x=r(33),D=r(305),T=function(e){var t=e.isAdmin,r=e.isReprintAdmin,a=e.userCode,o=e.userName,l=e.userLogin,i=e.access,s=e.userId,u=e.onDeleteUser,c=t?"Да":"Нет",d=r?"Да":"Нет",m=i.user,p=m.update,f=m.delete;return n.a.createElement("tr",null,n.a.createElement("td",null,a),n.a.createElement("td",null,o),n.a.createElement("td",null,l),n.a.createElement("td",null,c),n.a.createElement("td",null,d),n.a.createElement("td",{className:"box-button"},n.a.createElement(I.a.Group,null,p?n.a.createElement(C.a,{className:"ant-btn ant-btn-primary ant-btn-sm ant-btn-icon-only",title:"Изменить",to:"/user/edit/".concat(s,"/data")},n.a.createElement(A.a,{type:"edit"})):null,function(e){return e?n.a.createElement(D.a,{title:"Удалить пользователя?",onConfirm:function(){return u(s)},okText:"Да",cancelText:"Нет",placement:"left",zIndex:1050},n.a.createElement(I.a,{type:"primary",size:"small",icon:"delete"})):null}(f))))};T.propTypes={access:l.a.shape({user:l.a.shape({delete:l.a.bool.isRequired,update:l.a.bool.isRequired}).isRequired}).isRequired,isAdmin:l.a.bool.isRequired,isReprintAdmin:l.a.bool.isRequired,userCode:l.a.number.isRequired,userId:l.a.number.isRequired,userLogin:l.a.string.isRequired,userName:l.a.string.isRequired,onDeleteUser:l.a.func.isRequired};var N=T,M=r(94),H=r.n(M),z=r(306),B=r(314),J=r(307),W=r(310),K=r(308);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Y={position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:2e3},$={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12}}},ee=function(e){function t(e){var r,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=Q(t).call(this,e),r=!n||"object"!==L(n)&&"function"!=typeof n?Z(a):n,X(Z(r),"handleSubmit",(function(e){var t=r.props,a=t.form,n=t.submitForm;e.preventDefault(),a.validateFieldsAndScroll((function(e,t){e||(delete t.confirm,n(t))}))})),X(Z(r),"handleConfirmBlur",(function(e){var t=e.target.value,a=r.state.confirmDirty;r.setState({confirmDirty:a||!!t})})),X(Z(r),"compareToFirstPassword",(function(e,t,a){var n=r.props.form;t&&t!==n.getFieldValue("password")?a("Пароли не совпадают!"):a()})),X(Z(r),"validateToNextPassword",(function(e,t,a){var n=r.props.form,o=r.state.confirmDirty;t&&o&&n.validateFields(["confirm"],{force:!0}),a()})),r.state={DrawerWidth:550,DrawerZIndex:1050},r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,e),r=t,(a=[{key:"render",value:function(){var e=this.props,t=e.title,r=e.onClose,a=e.visible,o=e.form.getFieldDecorator,l=this.state,i=l.DrawerWidth,s=l.DrawerZIndex;return n.a.createElement(z.a,{title:t,width:i,onClose:r,visible:a,zIndex:s},n.a.createElement(B.a,{labelCol:$.labelCol,wrapperCol:$.wrapperCol,onSubmit:this.handleSubmit},n.a.createElement(U.a,{gutter:16,style:{marginBottom:"20px"}},n.a.createElement(B.a.Item,{label:"Код",hasFeedback:!0},o("operator_code",{rules:[{required:!0,message:"Пожалуйста, ввидите код пользователя"}]})(n.a.createElement(J.a,{style:{width:"65%"},min:1,placeholder:"Код пользователя"}))),n.a.createElement(B.a.Item,{label:"Имя",hasFeedback:!0},o("operator_name",{rules:[{required:!0,message:"Пожалуйста, ввидите имя пользователя"}]})(n.a.createElement(W.a,{placeholder:"Имя пользователя"}))),n.a.createElement(B.a.Item,{label:"Логин",hasFeedback:!0},o("operator_login",{rules:[{required:!0,message:"Пожалуйста, ввидите логин пользователя"}]})(n.a.createElement(W.a,{placeholder:"Логин пользователя"}))),n.a.createElement(B.a.Item,{label:"Пароль",hasFeedback:!0},o("password",{rules:[{required:!0,message:"Пожалуйста, введите пароль!"},{validator:this.validateToNextPassword}]})(n.a.createElement(W.a.Password,null))),n.a.createElement(B.a.Item,{label:"Повторить пароль",hasFeedback:!0},o("confirm",{rules:[{required:!0,message:"Пожалуйста, повторите пароль!"},{validator:this.compareToFirstPassword}]})(n.a.createElement(W.a.Password,{onBlur:this.handleConfirmBlur}))),n.a.createElement(B.a.Item,{label:"Администратор"},o("is_admin",{valuePropName:"checked"})(n.a.createElement(K.a,null))),n.a.createElement(B.a.Item,{label:"Перепечать"},o("is_reprint_admin",{valuePropName:"checked"})(n.a.createElement(K.a,null)))),n.a.createElement(U.a,{style:Y},n.a.createElement(I.a,{onClick:r,style:{marginRight:8}},"Закрыить"),n.a.createElement(I.a,{type:"primary",htmlType:"submit"},"Отправить"))))}}])&&G(r.prototype,a),o&&G(r,o),t}(a.Component);ee.propTypes={form:l.a.objectOf(l.a.func).isRequired,title:l.a.string.isRequired,visible:l.a.bool.isRequired,submitForm:l.a.func.isRequired,onClose:l.a.func.isRequired};var te=ee,re=H.a.create({name:"user_add_form"})(te),ae=r(19),ne=r(36);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var de=_.a.Header,me=_.a.Content,pe=_.a.Sider,fe={},be=function(e){function t(e){var r,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=ie(t).call(this,e),r=!n||"object"!==oe(n)&&"function"!=typeof n?se(a):n,ce(se(r),"onCloseUserAddForm",(function(){r.setState({visibleUserAddForm:!1})})),ce(se(r),"onOpenUserAddForm",(function(){var e=r.state.visibleUserAddForm;r.setState({visibleUserAddForm:!e})})),ce(se(r),"switchSiderMenu",(function(){var e=r.state.collapsedSiderMenu;r.setState({collapsedSiderMenu:!e})})),r.state={siderWidth:200,menuSelectedKeys:["left-menu-1"],collapsedSiderMenu:e.collapsedSiderMenu,visibleUserAddForm:e.visibleUserAddForm},e.modelCurrentUser(),e.modelServer(),r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,e),r=t,(a=[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,a=r.items,n=r.header,o=r.modelItems,l=r.loading,i=r.location.query,s=this.state,u=s.page,c=s.collapsedSiderMenu,d=s.visibleUserAddForm;return new ae.b({params:["name","code","login"],header:n,page:u,query:i,nextHeader:e.header,action:function(){o(i)}}).isUpdate(),a!==e.items||JSON.stringify(n)!==JSON.stringify(e.header)||l!==e.loading||c!==t.collapsedSiderMenu||d!==t.visibleUserAddForm}},{key:"render",value:function(){var e=this,t=this.props,r=t.loading,a=t.setHeader,o=t.sort,l=t.items,i=t.access,s=t.modelDelete,u=t.paginate,c=t.modelItems,d=t.modelAdd,m=t.header,p=m.code,f=m.name,b=m.login,y=t.location.query,h=this.state,E=h.siderWidth,v=h.collapsedSiderMenu,g=h.menuSelectedKeys,w=h.visibleUserAddForm;return n.a.createElement(j.b,{context:fe},n.a.createElement(_.a,null,n.a.createElement(pe,{width:E,trigger:null,collapsible:!0,collapsed:v},n.a.createElement("div",{className:"logo"},"USER"),n.a.createElement(k.a,{theme:"dark",mode:"inline",defaultSelectedKeys:g},n.a.createElement(k.a.Item,{key:"left-menu-1"},n.a.createElement(C.a,{to:"/"},n.a.createElement(A.a,{type:"team"}),n.a.createElement("span",null,"Пользователи"))),n.a.createElement(k.a.Item,{key:"left-menu-2"},n.a.createElement(C.a,{to:"/role"},n.a.createElement(A.a,{type:"cluster"}),n.a.createElement("span",null,"Роли"))))),n.a.createElement(_.a,null,n.a.createElement(P.a,{tip:"Загрузка...",size:"large",spinning:r},n.a.createElement(j.a,{title:"Users"}),n.a.createElement(de,null,n.a.createElement(F.a,{subTitle:"Пользователи",title:n.a.createElement("span",null,n.a.createElement(A.a,{className:"trigger",type:v?"menu-unfold":"menu-fold",onClick:this.switchSiderMenu}),"Users"),extra:[n.a.createElement(I.a,{key:"add-user",className:"btn-user-add",type:"primary",icon:"user-add",size:"small",onClick:function(){return e.onOpenUserAddForm()}},"Добавить пользователя"),n.a.createElement(ae.c,{key:"logout-1"})]})),n.a.createElement(me,{className:"user-list"},n.a.createElement(U.a,null,n.a.createElement(x.a,{span:24},n.a.createElement(ae.g,{overlayClassName:"table-users",striped:!1,thead:[n.a.createElement("th",{key:"ht-1"},n.a.createElement(ae.a,null,n.a.createElement(ae.e,{callback:a,model:"code",value:p,placeholder:"Код"}),n.a.createElement(ae.f,{id:"code",fsort:o}))),n.a.createElement("th",{key:"ht-2"},n.a.createElement(ae.a,null,n.a.createElement(ae.e,{callback:a,model:"name",value:f,placeholder:"Имя"}),n.a.createElement(ae.f,{id:"name",fsort:o}))),n.a.createElement("th",{key:"ht-3"},n.a.createElement(ae.a,null,n.a.createElement(ae.e,{callback:a,model:"login",value:b,placeholder:"Логин"}),n.a.createElement(ae.f,{id:"login",fsort:o}))),n.a.createElement("th",{key:"ht-4"},n.a.createElement(ae.h,null,"Админ")),n.a.createElement("th",{key:"ht-5"},n.a.createElement(ae.h,null,"Перепечать")),n.a.createElement("th",{key:"ht-6"})]},l?R()(l,(function(e){return n.a.createElement(N,{key:e.operator_id,userId:e.operator_id,userCode:e.operator_code,userName:e.operator_name,userLogin:e.operator_login,isAdmin:e.is_admin,isReprintAdmin:e.is_reprint_admin,access:i,onDeleteUser:s})})):null)),n.a.createElement(x.a,{span:24},u?n.a.createElement(ae.d,{url:"/",data:u,onQuery:c}):null),n.a.createElement(re,{title:"Добавить пользователя",visible:w,urlQuery:y,submitForm:d,onClose:this.onCloseUserAddForm,wrappedComponentRef:function(t){e.form=t}})))))))}}])&&le(r.prototype,a),o&&le(r,o),t}(n.a.Component);be.defaultProps={items:null,paginate:null},be.propTypes={collapsedSiderMenu:l.a.bool.isRequired,items:l.a.arrayOf(l.a.object),loading:l.a.bool.isRequired,modelAdd:l.a.func.isRequired,modelCurrentUser:l.a.func.isRequired,modelDelete:l.a.func.isRequired,modelItems:l.a.func.isRequired,modelServer:l.a.func.isRequired,setHeader:l.a.func.isRequired,sort:l.a.func.isRequired,visibleUserAddForm:l.a.bool.isRequired,access:ne.a.isRequired,location:ne.c.isRequired,header:l.a.shape({code:l.a.string,login:l.a.string,name:l.a.string,status:l.a.string}).isRequired,paginate:ne.d};var ye=be;function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ve=Object(i.c)((function(e){var t="system",r={},a={},n=Object(b.a)(S,t,e),o=function(){return n("userCurrent")},l=function(e){return n("userItems",e)},s=function(e){return n("userHeader",e)},u=function(e){return n("userAdd",e,(function(e){return l(r.location.query),e}))},c=function(e){return n("userDelete",{id:e},(function(e){return l(r.location.query),e}))},d=function(){s(r.location.query),l(r.location.query)},m=function(e,t){r.location.query[e]=t,s(r.location.query)},p=function(e){r.location.query.sort=e,l(r.location.query)};return function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){Ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{loading:f()(e.system.userItems),header:f()(e.system.userItems)?{}:e.system.userHeader,items:f()(e.system.userItems)?null:e.system.userItems.data,paginate:f()(e.system.userItems)?null:e.system.userItems.paginate,access:f()(e.system.userItems)?{}:e.system.userItems.access,current:f()(e.system.userCurrent)?{}:e.system.userCurrent.data,setHeader:m,modelCurrentUser:o,modelItems:l,modelHeader:s,modelServer:d,modelAdd:u,modelDelete:c,sort:p});return r=t,Object(i.d)(a,n)||(a=n),a}}))(ye),ge=(r(284),function(e){var t=e.location,r=e.visibleUserAddForm,a=e.collapsedSiderMenu;return n.a.createElement(i.a,{store:m},n.a.createElement(ve,{location:t,visibleUserAddForm:r,collapsedSiderMenu:a}))});ge.defaultProps={visibleUserAddForm:!1,collapsedSiderMenu:!0},ge.propTypes={location:l.a.oneOfType([l.a.any]).isRequired,visibleUserAddForm:l.a.bool,collapsedSiderMenu:l.a.bool};t.default=ge}}]);
//# sourceMappingURL=users.js.map
(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[10],{156:function(e,t,r){"use strict";var a=r(42),n=r.n(a);t.a={getComponent:function(e,t){Promise.all([r.e(1),r.e(0),r.e(3),r.e(2),r.e(5),r.e(4),r.e(10),r.e(17)]).then(r.bind(null,286)).then((function(e){return t(null,e.default)})).catch((function(){return n.a}))}}},281:function(e,t,r){},286:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(1),l=r.n(o),s=r(14),i=r(11),u=r(48),c=r(59),m=r(56),d=Object(i.a)(Object(c.a)("system"),u.a)(i.d)(Object(i.c)({system:Object(m.a)({name:"system",models:[{name:"user",points:["header","items","current"]}]})})),p=r(62),f=r.n(p),b=r(60),y=r(21),h=r(4),E="interface-users/items",v="interface-users/user-delete",g="interface-users/user-add",w="interface-users/user-current";function O(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return new y.a({pointApi:e,type:r,data:t})}function S(e,t,r){switch(e){case"userHeader":return{code:0!==t.code?t.code:"",name:0!==t.name?t.name:"",login:0!==t.login?t.login:"",status:0===t.status?"0":"1"};case"userItems":return new y.a({data:t,pointApi:E}).result();case"userDelete":return O(v,t).result(r);case"userAdd":return O(g,t).result(r);case"userCurrent":return new y.a({domain:h.a.domain.auth,type:"GET",pointApi:w}).result();default:return null}}var j=r(159),C=r(10),_=r(298),k=r(115),q=r(3),P=r(163),A=r(305),F=r(29),I=r(61),U=r(31),R=r(15),x=r(299),D=function(e){var t=e.isAdmin,r=e.isReprintAdmin,a=e.userCode,o=e.userName,l=e.userLogin,s=e.access,i=e.userId,u=e.onDeleteUser,c=t?"Да":"Нет",m=r?"Да":"Нет",d=s.user,p=d.update,f=d.delete;return n.a.createElement("tr",null,n.a.createElement("td",null,a),n.a.createElement("td",null,o),n.a.createElement("td",null,l),n.a.createElement("td",null,c),n.a.createElement("td",null,m),n.a.createElement("td",{className:"box-button"},n.a.createElement(F.a.Group,null,p?n.a.createElement(C.a,{className:"ant-btn ant-btn-primary ant-btn-sm ant-btn-icon-only",title:"Изменить",to:"/user/edit/".concat(i,"/data")},n.a.createElement(q.a,{type:"edit"})):null,function(e){return e?n.a.createElement(x.a,{title:"Удалить пользователя?",onConfirm:function(){return u(i)},okText:"Да",cancelText:"Нет",placement:"left",zIndex:1050},n.a.createElement(F.a,{type:"primary",size:"small",icon:"delete"})):null}(f))))};D.propTypes={access:l.a.objectOf(l.a.shape({user:l.a.objectOf(l.a.shape({delete:l.a.bool.isRequired,update:l.a.bool.isRequired}))})).isRequired,isAdmin:l.a.bool.isRequired,isReprintAdmin:l.a.bool.isRequired,userCode:l.a.number.isRequired,userId:l.a.number.isRequired,userLogin:l.a.string.isRequired,userName:l.a.string.isRequired,onDeleteUser:l.a.func.isRequired};var T=D,M=r(162),N=r.n(M),H=r(300),z=r(308),B=r(301),W=r(304),K=r(302);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X={position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:2e3},Y={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12}}},$=function(e){function t(e){var r,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=J(t).call(this,e),r=!n||"object"!==L(n)&&"function"!=typeof n?Q(a):n,V(Q(r),"handleSubmit",(function(e){var t=r.props,a=t.form,n=t.submitForm;e.preventDefault(),a.validateFieldsAndScroll((function(e,t){e||(delete t.confirm,n(t))}))})),V(Q(r),"handleConfirmBlur",(function(e){var t=e.target.value,a=r.state.confirmDirty;r.setState({confirmDirty:a||!!t})})),V(Q(r),"compareToFirstPassword",(function(e,t,a){var n=r.props.form;t&&t!==n.getFieldValue("password")?a("Пароли не совпадают!"):a()})),V(Q(r),"validateToNextPassword",(function(e,t,a){var n=r.props.form,o=r.state.confirmDirty;t&&o&&n.validateFields(["confirm"],{force:!0}),a()})),r.state={DrawerWidth:550,DrawerZIndex:1050},r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,e),r=t,(a=[{key:"render",value:function(){var e=this.props,t=e.title,r=e.onClose,a=e.visible,o=e.form.getFieldDecorator,l=this.state,s=l.DrawerWidth,i=l.DrawerZIndex;return n.a.createElement(H.a,{title:t,width:s,onClose:r,visible:a,zIndex:i},n.a.createElement(z.a,{labelCol:Y.labelCol,wrapperCol:Y.wrapperCol,onSubmit:this.handleSubmit},n.a.createElement(I.a,{gutter:16,style:{marginBottom:"20px"}},n.a.createElement(z.a.Item,{label:"Код",hasFeedback:!0},o("operator_code",{rules:[{required:!0,message:"Пожалуйста, ввидите код пользователя"}]})(n.a.createElement(B.a,{style:{width:"65%"},min:1,placeholder:"Код пользователя"}))),n.a.createElement(z.a.Item,{label:"Имя",hasFeedback:!0},o("operator_name",{rules:[{required:!0,message:"Пожалуйста, ввидите имя пользователя"}]})(n.a.createElement(W.a,{placeholder:"Имя пользователя"}))),n.a.createElement(z.a.Item,{label:"Логин",hasFeedback:!0},o("operator_login",{rules:[{required:!0,message:"Пожалуйста, ввидите логин пользователя"}]})(n.a.createElement(W.a,{placeholder:"Логин пользователя"}))),n.a.createElement(z.a.Item,{label:"Пароль",hasFeedback:!0},o("password",{rules:[{required:!0,message:"Пожалуйста, введите пароль!"},{validator:this.validateToNextPassword}]})(n.a.createElement(W.a.Password,null))),n.a.createElement(z.a.Item,{label:"Повторить пароль",hasFeedback:!0},o("confirm",{rules:[{required:!0,message:"Пожалуйста, повторите пароль!"},{validator:this.compareToFirstPassword}]})(n.a.createElement(W.a.Password,{onBlur:this.handleConfirmBlur}))),n.a.createElement(z.a.Item,{label:"Администратор"},o("is_admin",{valuePropName:"checked"})(n.a.createElement(K.a,null))),n.a.createElement(z.a.Item,{label:"Перепечать"},o("is_reprint_admin",{valuePropName:"checked"})(n.a.createElement(K.a,null)))),n.a.createElement(I.a,{style:X},n.a.createElement(F.a,{onClick:r,style:{marginRight:8}},"Закрыить"),n.a.createElement(F.a,{type:"primary",htmlType:"submit"},"Отправить"))))}}])&&G(r.prototype,a),o&&G(r,o),t}(a.Component);$.propTypes={form:l.a.objectOf(l.a.func).isRequired,title:l.a.string.isRequired,visible:l.a.bool.isRequired,submitForm:l.a.func.isRequired,onClose:l.a.func.isRequired};var ee=$,te=N.a.create({name:"user_add_form"})(ee);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie=_.a.Header,ue=_.a.Content,ce=_.a.Sider,me={},de=function(e){function t(e){var r,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=ne(t).call(this,e),r=!n||"object"!==re(n)&&"function"!=typeof n?oe(a):n,se(oe(r),"shouldComponentUpdate",(function(e,t){var a=r.props,n=a.items,o=a.location,l=a.header,s=a.modelItems,i=a.loading,u=a.location.query,c=r.state,m=c.page,d=c.collapsedSiderMenu,p=c.visibleUserAddForm;return new R.b({params:["name","code","login"],query:o.query,nextHeader:e.header,header:l,page:m,action:function(){s(u)}}).isUpdate(),i!==e.loading||d!==t.collapsedSiderMenu||p!==t.visibleUserAddForm||l!==e.header||n!==e.items})),se(oe(r),"onCloseUserAddForm",(function(){r.setState({visibleUserAddForm:!1})})),se(oe(r),"onOpenUserAddForm",(function(){r.setState({visibleUserAddForm:!r.state.visibleUserAddForm})})),se(oe(r),"switchSiderMenu",(function(){r.setState({collapsedSiderMenu:!r.state.collapsedSiderMenu})})),r.state={siderWidth:200,menuSelectedKeys:["left-menu-1"],collapsedSiderMenu:e.collapsedSiderMenu,visibleUserAddForm:e.visibleUserAddForm},e.modelCurrentUser(),e.modelServer(),r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,e),r=t,(a=[{key:"render",value:function(){var e=this;return n.a.createElement(j.b,{context:me},n.a.createElement(_.a,null,n.a.createElement(ce,{width:this.state.siderWidth,trigger:null,collapsible:!0,collapsed:this.state.collapsedSiderMenu},n.a.createElement("div",{className:"logo"},"USER"),n.a.createElement(k.a,{theme:"dark",mode:"inline",defaultSelectedKeys:this.state.menuSelectedKeys},n.a.createElement(k.a.Item,{key:"left-menu-1"},n.a.createElement(C.a,{to:"/"},n.a.createElement(q.a,{type:"team"}),n.a.createElement("span",null,"Пользователи"))),n.a.createElement(k.a.Item,{key:"left-menu-2"},n.a.createElement(C.a,{to:"/role"},n.a.createElement(q.a,{type:"cluster"}),n.a.createElement("span",null,"Роли"))))),n.a.createElement(_.a,null,n.a.createElement(P.a,{tip:"Загрузка...",size:"large",spinning:this.props.loading},n.a.createElement(j.a,{title:"Users"}),n.a.createElement(ie,null,n.a.createElement(A.a,{subTitle:"Пользователи",title:n.a.createElement("span",null,n.a.createElement(q.a,{className:"trigger",type:this.state.collapsedSiderMenu?"menu-unfold":"menu-fold",onClick:this.switchSiderMenu}),"Users"),extra:[n.a.createElement(F.a,{key:"add-user",className:"btn-user-add",type:"primary",icon:"user-add",size:"small",onClick:function(){return e.onOpenUserAddForm()}},"Добавить пользователя"),n.a.createElement(R.c,{key:"logout-1"})]})),n.a.createElement(ue,{className:"user-list"},n.a.createElement(I.a,null,n.a.createElement(U.a,{span:24},n.a.createElement(R.g,{overlayClassName:"table-users",striped:!1,thead:[n.a.createElement("th",{key:"ht-1"},n.a.createElement(R.a,null,n.a.createElement(R.e,{callback:this.props.setHeader,model:"code",value:this.props.header.code,placeholder:"Код",isFocus:!0}),n.a.createElement(R.f,{id:"code",fsort:this.props.sort}))),n.a.createElement("th",{key:"ht-2"},n.a.createElement(R.a,null,n.a.createElement(R.e,{callback:this.props.setHeader,model:"name",value:this.props.header.name,placeholder:"Имя"}),n.a.createElement(R.f,{id:"name",fsort:this.props.sort}))),n.a.createElement("th",{key:"ht-3"},n.a.createElement(R.a,null,n.a.createElement(R.e,{callback:this.props.setHeader,model:"login",value:this.props.header.login,placeholder:"Логин"}),n.a.createElement(R.f,{id:"login",fsort:this.props.sort}))),n.a.createElement("th",{key:"ht-4"},n.a.createElement(R.h,null,"Админ")),n.a.createElement("th",{key:"ht-5"},n.a.createElement(R.h,null,"Перепечать")),n.a.createElement("th",{key:"ht-6"})]},this.props.items?this.props.items.map((function(t){return n.a.createElement(T,{key:t.operator_id,userId:t.operator_id,userCode:t.operator_code,userName:t.operator_name,userLogin:t.operator_login,isAdmin:t.is_admin,isReprintAdmin:t.is_reprint_admin,access:e.props.access,onDeleteUser:e.props.modelDelete})})):null)),n.a.createElement(U.a,{span:24},this.props.paginate?n.a.createElement(R.d,{url:"/",data:this.props.paginate,onQuery:this.props.modelItems}):null),n.a.createElement(te,{title:"Добавить пользователя",visible:this.state.visibleUserAddForm,urlQuery:this.props.location.query,submitForm:this.props.modelAdd,onClose:this.onCloseUserAddForm,wrappedComponentRef:function(t){return e.form=t}})))))))}}])&&ae(r.prototype,a),o&&ae(r,o),t}(n.a.Component);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var be=Object(s.c)((function(e){var t="system",r={},a={},n=Object(b.a)(S,t,e),o=function(){return n("userCurrent")},l=function(e){return n("userItems",e)},i=function(e){return n("userHeader",e)},u=function(e){return n("userAdd",e,(function(e){return l(r.location.query),e}))},c=function(e){return n("userDelete",{id:e},(function(e){return l(r.location.query),e}))},m=function(){i(r.location.query),l(r.location.query)},d=function(e,t){r.location.query[e]=t,i(r.location.query)},p=function(e){r.location.query.sort=e,l(r.location.query)};return function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{loading:f()(e.system.userItems),header:f()(e.system.userItems)?[]:e.system.userHeader,items:f()(e.system.userItems)?null:e.system.userItems.data,paginate:f()(e.system.userItems)?null:e.system.userItems.paginate,access:f()(e.system.userItems)?null:e.system.userItems.access,current:f()(e.system.userCurrent)?null:e.system.userCurrent.data,setHeader:d,modelCurrentUser:o,modelItems:l,modelHeader:i,modelServer:m,modelAdd:u,modelDelete:c,sort:p});return r=t,Object(s.d)(a,n)||(a=n),a}}))(de),ye=(r(281),function(e){var t=e.location,r=e.visibleUserAddForm,a=e.collapsedSiderMenu;return n.a.createElement(s.a,{store:d},n.a.createElement(be,{location:t,visibleUserAddForm:r,collapsedSiderMenu:a}))});ye.defaultProps={visibleUserAddForm:!1,collapsedSiderMenu:!0},ye.propTypes={location:l.a.oneOfType([l.a.any]),visibleUserAddForm:l.a.bool,collapsedSiderMenu:l.a.bool};t.default=ye}}]);
//# sourceMappingURL=users.js.map
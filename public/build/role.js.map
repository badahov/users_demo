{"version":3,"sources":["webpack:///./modules/role/index.js","webpack:///./modules/role/state.js","webpack:///./modules/role/api.js","webpack:///./modules/role/component/forms/add/main.jsx","webpack:///./modules/role/component/forms/add/index.jsx","webpack:///./modules/role/component/main.jsx","webpack:///./modules/role/component/index.js","webpack:///./modules/role/main.jsx"],"names":["path","getComponent","nextState","component","then","mad","noop","createStoreWithMiddleware","applyMiddleware","middleware","thunk","createStore","combineReducers","system","reducer","name","models","points","query","pointApi","data","type","Query","entryPoints","user","item","current","role","items","add","edit","delete","permission","switch","api","action","callback","result","json","roles","domain","appConfig","auth","ButtonGroup","Button","Group","Search","Input","UserAddFormModel","props","e","preventDefault","form","validateFieldsAndScroll","err","values","confirm","actionAdd","onClose","ev","id","parent","target","parentElement","listRoleItemId","querySelector","inputRoleName","btnRoleEdit","btnRoleDelete","btnRoleSave","style","display","actionDelete","status","msg","message","success","onRoleSelect","error","_errorMsg","actionEdit","nextProps","visible","setState","state","getFieldDecorator","this","title","width","zIndex","marginBottom","span","layout","onSubmit","handleSubmit","Item","hasFeedback","placeholder","htmlType","size","marginTop","bordered","dataSource","roleList","renderItem","className","actions","editable","onClick","onRoleEditAction","icon","onConfirm","onRoleDelete","okText","cancelText","placement","enterButton","defaultValue","onSearch","value","event","onRoleEdit","Component","visibleId","successionId","operationId","inputSourceId","stageId","Form","create","mapPropsToFields","createFormField","sourceTitle","Header","Layout","Content","Sider","Panel","Collapse","Meta","Card","Roles","collapsed","visibleSourceAddForm","i","length","selectRoleName","selectRoleId","modelPermissionItem","document","querySelectorAll","forEach","setAttribute","group","enabled","modelPermissionSwitch","permission_id","role_id","loading","modelServer","isLoad","trigger","collapsible","theme","mode","defaultSelectedKeys","key","to","ItemGroup","map","toggle","subTitle","extra","onOpen","tip","spinning","defaultActiveKey","modules","header","desc","grid","gutter","xs","sm","md","lg","xl","xxl","permissions","permissionsSwitch","content","classNames","avatar","modelRoleDelete","modelRoleEdit","modelRoleAdd","wrappedComponentRef","React","connectAdvanced","dispatch","module","sendTo","creator","modelRoleItems","nextOwnProps","isNull","userCurrent","roleItems","nextResult","permissionItem","access","shallowEqual","Users","Module","location","params","store","UserStore"],"mappings":"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","file":"role.js?hash=f0f4c6198c6adf7d14a0","sourcesContent":["import noop from 'lodash/noop';\n\nexport default {\n  path: 'role',\n  getComponent(nextState, component) {\n    import('./main').then((mad) => component(null, mad.default)).catch(() => noop);\n  },\n};","'use strict';\n\nimport { createStore, combineReducers, applyMiddleware } from 'redux';\n\nimport middleware from '../app/middleware';\nimport reducer from '../app/reducer';\n\nimport thunk from 'redux-thunk';\n// import {createLogger} from 'redux-logger';\n\nconst module = {\n  name: 'system',\n  models: [\n    {\n      name: 'user',\n      points: ['current']\n    },\n    {\n      name: 'role',\n      points: ['items']\n    },\n    {\n      name: 'permission',\n      points: ['item']\n    }\n  ]\n};\n\nconst createStoreWithMiddleware = applyMiddleware(\n  middleware('system'),\n  thunk,\n  // createLogger({collapsed:true}),\n)(createStore);\n\nexport default createStoreWithMiddleware(combineReducers({\n  system: reducer(module)\n}));\n","import Query from '../app/component/core/query';\nimport appConfig from '../../config';\n\nfunction query (pointApi, data, type = 'POST') {\n  return new Query({\n    pointApi,\n    type,\n    data,\n  });\n}\n\nconst entryPoints = {\n  user: {\n    item: 'interface-users/user',\n    current: 'interface-users/user-current',\n  },\n  role: {\n    items: 'interface-users/roles',\n    add: 'interface-users/role-add',\n    edit: 'interface-users/role-edit',\n    delete: 'interface-users/role-delete'\n  },\n  permission: {\n    item: 'interface-users/permission',\n    switch: 'interface-users/role-permission',\n  }\n};\n\nexport default function api(action, data, callback) {\n  switch (action) {\n    case 'roleItems':\n      return query(entryPoints.role.items, data, 'GET').result();\n    case 'roleAdd':\n      return query(entryPoints.role.add, data).result().then((json) => {\n        if (json) {\n          //return query(api.roles).result();\n        }\n      });\n    case 'roleEdit':\n      return query(entryPoints.role.edit, data).result().then((json) => {\n        if (json) {\n          //return query(api.roles).result(callback);\n        }\n      });\n    case 'roleDelete':\n      return query(entryPoints.role.delete, data).result(callback).then((json) => {\n        if (json) {\n          return query(api.roles).result();\n        }\n      });\n\n    case 'permissionItem':\n      return query(entryPoints.permission.item, data, 'GET').result();\n    case 'permissionSwitch':\n      return query(entryPoints.permission.switch, data).result().then((json) => {\n        // if (json) {\n        //   return query(api.permission, {id: data.role_id}, Query.get).result();\n        // }\n      });\n\n    case 'userItem':\n      return (new Query({ data, pointApi: entryPoints.item, type: 'GET', })).result();\n    case 'userCurrent':\n      return (new Query({\n        domain: appConfig.domain.auth,\n        type: 'GET',\n        pointApi: entryPoints.user.current\n      })).result();\n    case 'userEdit':\n      return (new Query({ data, pointApi: entryPoints.edit })).result();\n  }\n}\n","import React, { Component } from 'react';\n\nimport { Link } from 'react-router';\nimport { Form, Button, Row, Input, List, Drawer, Col, Icon, message, Popconfirm } from 'antd';\n\nconst ButtonGroup = Button.Group;\n\nconst { Search } = Input;\n\nclass UserAddFormModel extends Component {\n  static defaultProps = {\n    visible: true,\n    visibleId: null,\n    successionId: null,\n    operationId: null,\n    inputSourceId: null,\n    stageId: null,\n    title: null,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      visible: props.visible,\n    };\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        delete values.confirm;\n\n        this.props.actionAdd(values);\n      }\n    });\n  };\n\n  onClose = () => {\n    this.props.onClose();\n  };\n\n  onRoleEditAction = (ev, id) => {\n    let parent = ev.target.parentElement.parentElement.parentElement.parentElement;\n    let listRoleItemId = parent.querySelector(`.link-role-name-${id}`);\n    let inputRoleName = parent.querySelector(`.input-role-name-${id}`);\n    let btnRoleEdit = parent.querySelector(`.btn-role-edit-${id}`);\n    let btnRoleDelete = parent.querySelector(`.btn-role-delete-${id}`);\n    let btnRoleSave = parent.querySelector(`.btn-role-save-${id}`);\n\n    listRoleItemId.style.display = 'none';\n    inputRoleName.style.display = 'inline';\n\n    btnRoleEdit.style.display = 'none';\n    btnRoleDelete.style.display = 'none';\n    btnRoleSave ? btnRoleSave.style.display = 'inline' : null;\n  };\n\n  onRoleDelete = (id) => {\n    this.props.actionDelete({\n      id: id,\n    }, (json) => {\n      if (json.status === 'ok') {\n        if (json.msg) {\n          message.success(json.msg);\n\n          this.props.onRoleSelect(0);\n        }\n\n        if (json.result) {\n          return json.result;\n        } else {\n          return true;\n        }\n      } else if (json.msg) {\n        message.error(this._errorMsg(json.msg));\n        return false;\n      }\n    });\n  };\n\n  onRoleEdit = (ev, id, name) => {\n    let parent = ev.target.parentElement.parentElement.parentElement.parentElement;\n\n    this.props.actionEdit({\n      id: id,\n      name: name,\n    }, (json) => {\n      if (json.status === 'ok') {\n        if (json.msg) {\n          message.success(json.msg);\n        }\n\n        if (json.result) {\n          let listRoleItemId = parent.querySelector(`.link-role-name-${id}`);\n          let inputRoleName = parent.querySelector(`.input-role-name-${id}`);\n          let btnRoleEdit = parent.querySelector(`.btn-role-edit-${id}`);\n          let btnRoleDelete = parent.querySelector(`.btn-role-delete-${id}`);\n          let btnRoleSave = parent.querySelector(`.btn-role-save-${id}`);\n\n          listRoleItemId.style.display = 'inline';\n          inputRoleName.style.display = 'none';\n\n          btnRoleEdit.style.display = 'inline';\n          btnRoleDelete.style.display = 'inline';\n          btnRoleSave ? btnRoleSave.style.display = 'none' : null;\n\n          return json.result;\n        } else {\n          return true;\n        }\n      } else if (json.msg) {\n        message.error(this._errorMsg(json.msg));\n        return false;\n      }\n    });\n  };\n\n  shouldComponentUpdate = (nextProps, nextState) => {\n    if (this.props.visible !== nextProps.visible) {\n      this.setState({\n        visible: nextProps.visible,\n      });\n    }\n\n    return true;\n  };\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n\n    return (\n      <Drawer\n        title={this.props.title}\n        width={550}\n        onClose={this.onClose}\n        visible={this.state.visible}\n        zIndex={1050}\n      >\n        <Row style={{ marginBottom: '20px' }}>\n          <Col span={24}>\n            <Form layout=\"inline\" onSubmit={this.handleSubmit}>\n              <Form.Item hasFeedback>\n                {getFieldDecorator('name', {\n                  // rules: [\n                  //     { required: true, message: 'Пожалуйста, ввидите код пользователя' }\n                  // ],\n                })(<Input placeholder=\"Название новой роли\"/>)}\n              </Form.Item>\n\n              <Form.Item>\n                <Button type=\"primary\" htmlType=\"submit\">\n                  Добавить\n                </Button>\n              </Form.Item>\n            </Form>\n          </Col>\n          <Col span={24}>\n            <List\n              size=\"small\"\n              style={{ marginTop: '10px' }}\n              bordered\n              dataSource={this.props.roleList}\n              renderItem={item =>\n                <List.Item\n                  className={`list-role-item list-role-item-${item.id}`}\n                  actions={(item.editable) ? [\n                    <ButtonGroup>\n                      <Button\n                        className={`btn-role-edit btn-role-edit-${item.id}`}\n                        onClick={(ev) => this.onRoleEditAction(ev, item.id)} size=\"small\"\n                        icon=\"edit\"\n                      />\n                      <Popconfirm\n                        title=\"Удалить роль?\"\n                        onConfirm={() => this.onRoleDelete(item.id)}\n                        okText=\"Да\"\n                        cancelText=\"Нет\"\n                        placement=\"left\"\n                        zIndex={1050}\n                      >\n                        <Button\n                          className={`btn-role-delete btn-role-delete-${item.id}`}\n                          size=\"small\"\n                          icon=\"delete\"\n                        />\n                      </Popconfirm>\n                    </ButtonGroup>,\n                  ] : null}>\n                  <Link onClick={(ev) => {\n                    this.props.onRoleSelect(ev, item.id);\n                  }} className={`link-role-name link-role-name-${item.id}`}\n                        style={{ width: '100%' }}>{item.name}</Link>\n\n                  <Search\n                    className={`input-role-name input-role-name-${item.id}`}\n                    placeholder=\"Название новой роли\"\n                    enterButton={<Icon type=\"save\"/>}\n                    size=\"small\"\n                    defaultValue={item.name}\n                    onSearch={(value, event) => this.onRoleEdit(event, item.id, value)}\n                  />\n                </List.Item>}\n            />\n          </Col>\n        </Row>\n      </Drawer>\n    );\n  }\n}\n\nexport default UserAddFormModel;\n","import { Form } from 'antd';\nimport UserAddFormModel from './main';\n\nexport default Form.create({\n  name: 'user_add_form',\n  mapPropsToFields(props) {\n    return {\n      title: Form.createFormField({\n        ...props.sourceTitle,\n        value: props.sourceTitle,\n      }),\n    };\n  },\n})(UserAddFormModel);\n","import React from 'react';\nimport Helmet from 'react-helmet';\nimport classNames from 'classnames';\nimport { Link } from 'react-router';\n\nimport { Logout } from 'modules/app/core';\n\nimport {\n  Collapse,\n  Card,\n  List,\n  Menu,\n  PageHeader,\n  Layout,\n  Spin,\n  Icon,\n  Row,\n  Col,\n  Popover,\n  Button,\n} from 'antd';\n\nconst { Header, Content, Sider } = Layout;\nconst Panel = Collapse.Panel;\nconst { Meta } = Card;\n\nimport UserAddForm from './forms/add';\n\nclass Roles extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectRoleName: 'Гость',\n      selectRoleId: 0,\n\n      collapsed: true,\n      visibleSourceAddForm: false,\n      visibleId: null,\n      items: props.items,\n      loading: true,\n      operationId: '',\n    };\n\n    props.modelServer();\n  }\n\n  toggle = () => {\n    this.setState({\n      collapsed: !this.state.collapsed,\n    });\n  };\n\n  onClose = () => {\n    this.setState({\n      visibleSourceAddForm: false,\n    });\n  };\n\n  onOpen = () => {\n    this.setState({\n      visibleSourceAddForm: !this.state.visibleSourceAddForm,\n      visibleId: 1,\n    });\n  };\n\n  onRoleSelect = (ev, id) => {\n    for (let i = 0; i < this.props.role.length; i++) {\n      let item = this.props.role[i];\n\n      if (item.id === id) {\n        this.setState({\n          selectRoleName: item.name,\n          selectRoleId: item.id,\n        });\n\n        this.props.modelPermissionItem({ id: item.id });\n        break;\n      }\n    }\n\n    let listRoleItems = document.querySelectorAll('.list-role-item');\n    listRoleItems.forEach((item) => {\n      item.setAttribute('style', 'background: #fff');\n    });\n\n    let listRoleItemId = document.querySelector(`.list-role-item-${id}`);\n    listRoleItemId.setAttribute('style', 'background: #fafafa');\n  };\n\n  shouldComponentUpdate = (nextProps, nextState) => {\n    return nextProps.permission !== this.props.permission ||\n      nextState.visibleSourceAddForm !== this.state.visibleSourceAddForm ||\n      nextState.collapsed !== this.state.collapsed ||\n      nextProps.role !== this.props.role;\n  };\n\n  permissionsSwitch = (group, permission, enabled) => {\n    this.props.modelPermissionSwitch({\n      enabled: enabled,\n      permission_id: permission,\n      role_id: this.state.selectRoleId,\n    });\n  };\n\n  render() {\n    if (this.props.current) {\n      let isLoad = (this.props.current) ? false : true;\n\n      return (\n        <Layout>\n          <Sider width={300} trigger={null} collapsible collapsed={this.state.collapsed}>\n            <div className=\"logo\">\n              USER\n            </div>\n            <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={['2']}>\n              <Menu.Item key=\"1\">\n                <Link to=\"/\"><Icon type=\"team\"/><span>Пользователи</span></Link>\n              </Menu.Item>\n              <Menu.Item key=\"2\">\n                <Link to=\"/role\"><Icon type=\"cluster\"/><span>Роли</span></Link>\n              </Menu.Item>\n              <Menu.ItemGroup key=\"roles\" title=\"\">\n                {\n                  (this.props.role)\n                    ?\n                    this.props.role.map((item) =>\n                      <Menu.Item onClick={(ev) => {\n                        this.onRoleSelect(ev, item.id);\n                      }} key={`role-${item.id}`}>\n                        <Icon type=\"property-safety\"/>\n                        <span>{item.name}</span>\n                      </Menu.Item>,\n                    )\n                    : null\n                }\n              </Menu.ItemGroup>\n            </Menu>\n          </Sider>\n          <Layout>\n            <Helmet title={this.state.selectRoleName}/>\n            <Header>\n              <PageHeader\n                title={<span><Icon\n                  className=\"trigger\"\n                  type={this.state.collapsed ? 'menu-unfold' : 'menu-fold'}\n                  onClick={this.toggle}\n                />Управление ролями</span>}\n                subTitle={`текущая: ${this.state.selectRoleName}`}\n                extra={[\n                  <Button key=\"add-role\" className=\"btn-user-add\" onClick={() => this.onOpen()}\n                          type=\"primary\" size=\"small\">\n                    Управление ролями\n                  </Button>,\n                  <Logout key=\"logout-1\"/>,\n                ]}\n              />\n            </Header>\n            <Content className='user-list'>\n              <Spin tip=\"Загрузка...\" size=\"large\" spinning={isLoad}>\n                <Row>\n                  <Col span={24}>\n                    <Collapse defaultActiveKey={['1']}>\n                      {\n                        (this.props.permission.modules) ?\n                          this.props.permission.modules.map((item) =>\n                            <Panel header={`${item.name}: ${item.desc}`} key={item.group}>\n                              <List\n                                grid={{\n                                  gutter: 16,\n                                  xs: 1,\n                                  sm: 1,\n                                  md: 2,\n                                  lg: 3,\n                                  xl: 4,\n                                  xxl: 4,\n                                }}\n                                dataSource={item.permissions}\n                                renderItem={(item, i) => (\n                                  <List.Item>\n                                    <Link onClick={() => {\n                                      this.permissionsSwitch(item.group, item.id, item.enabled);\n                                    }}>\n                                      <Popover content={item.desc} title={item.name}>\n                                        <Card\n                                          className={\n                                            classNames('permissions-default', {\n                                              'permissions-enabled': item.enabled,\n                                            })\n                                          }\n                                          size=\"small\"\n                                        >\n                                          <Meta\n                                            avatar={\n                                              (item.enabled) ? <Icon type=\"check\"/> : <Icon\n                                                type=\"stop\"/>\n                                            }\n                                            title={item.name}\n                                          />\n                                        </Card>\n                                      </Popover>\n                                    </Link>\n                                  </List.Item>\n                                )}\n                              />\n                            </Panel>,\n                          )\n                          : null\n                      }\n                    </Collapse>\n                  </Col>\n                  <UserAddForm\n                    visible={this.state.visibleSourceAddForm}\n                    visibleId={this.state.visibleId}\n                    title='Роли'\n                    roleList={this.props.role}\n                    onRoleSelect={this.onRoleSelect}\n                    actionDelete={this.props.modelRoleDelete}\n                    actionEdit={this.props.modelRoleEdit}\n                    actionAdd={this.props.modelRoleAdd}\n                    onClose={this.onClose}\n                    wrappedComponentRef={(form) => this.form = form}\n                  />\n                </Row>\n              </Spin>\n            </Content>\n          </Layout>\n        </Layout>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default Roles;\n","import { shallowEqual } from 'react-redux';\nimport { connectAdvanced } from 'react-redux';\n\nimport creator from '../../app/creator';\nimport api from '../api';\n\nimport Users from './main';\n\nexport default connectAdvanced((dispatch) => {\n  const module = 'system';\n  let ownProps = {};\n  let result = {};\n\n  const sendTo = creator(api, module, dispatch);\n\n  const modelCurrentUser = () => sendTo('userCurrent');\n\n  const modelRoleItems = () => sendTo('roleItems');\n\n  const modelPermissionItem = (data) => sendTo('permissionItem', data);\n  const modelPermissionSwitch = (data) => sendTo('permissionSwitch', data);\n\n  const modelRoleAdd = (data) => sendTo('roleAdd', data, (json) => {\n    //modelItem(ownProps.location.query);\n    return json;\n  });\n\n  const modelRoleEdit = (data) => sendTo('roleEdit', data, (json) => {\n    //modelItem(ownProps.location.query);\n    return json;\n  });\n\n  const modelRoleDelete = (data) => sendTo('roleDelete', data, (json) => {\n    //modelItem(ownProps.location.query);\n    return json;\n  });\n\n  /**\n   * Downloading data from a remote server\n   * @private\n   */\n  const modelServer = () => {\n    modelCurrentUser();\n    modelRoleItems();\n    modelPermissionItem({ id: 0 });\n  };\n\n  return (nextState, nextOwnProps) => {\n    const isNull = (value) => value === null;\n\n    const loading    = isNull(nextState[module].userCurrent) ? true : false;\n    const role       = isNull(nextState[module].roleItems) ? null : nextState[module].roleItems;\n    const permission = isNull(nextState[module].permissionItem) ? null : nextState[module].permissionItem;\n    const access     = isNull(nextState[module].userCurrent) ? null : nextState[module].userCurrent.access;\n    const current    = isNull(nextState[module].userCurrent) ? null : nextState[module].userCurrent.data;\n\n    const nextResult = {\n      ...nextOwnProps,\n      loading,\n      permission,\n      role,\n      access,\n      current,\n      modelServer,\n      modelRoleItems,\n      modelPermissionItem,\n      modelPermissionSwitch,\n      modelRoleDelete,\n      modelRoleEdit,\n      modelRoleAdd,\n    };\n    ownProps = nextOwnProps;\n    if (!shallowEqual(result, nextResult)) {\n      result = nextResult\n    }\n\n    return result;\n  }\n})(Users);\n","import React from 'react';\nimport { Provider } from 'react-redux';\n\nimport UserStore from './state';\n\nimport Index from './component';\n\nimport './css/index.less';\n\nconst Module = (props) => {\n  const {location, params} = props;\n\n  return (\n    <Provider store={UserStore}>\n      <Index\n        location={location}\n        params={params}\n      />\n    </Provider>\n  );\n};\n\nexport default Module;\n"],"sourceRoot":""}
(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[9],{177:function(e,t,n){"use strict";var r=n(65);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(240),l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"type","POST"),i(this,"data",null),i(this,"pointApi",null),i(this,"domain",r.a.domain.api),i(this,"send",function(){return n._fetch()}),i(this,"result",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n.send().then(function(t){return e instanceof Function?e(t):"ok"===t.status?(t.msg&&n._success(t.msg),!t.result||t.result):t.msg?(n._error(n._errorMsg(t.msg)),!1):void 0})}),i(this,"_getUrl",function(){var t="";if(n.type===e.get){var o=null;n.data&&(o=n._getParams(n.data)),t=o?n.domain+r.a.server.setPoint+n.pointApi+r.a.server.prefix+o:n.domain+r.a.server.setPoint+n.pointApi}else t=n.domain+r.a.server.setPoint+n.pointApi;return t}),i(this,"_getFetchParam",function(){return n.type===e.get?{method:e.get,headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}:{method:e.post,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n.data),credentials:"include"}}),i(this,"_fetch",function(){var e=n._getUrl(),t=n._getFetchParam();return a(e,t).then(function(t){if(200===t.status)return t.json();if(500===t.status)throw n._error(r.a.error[t.status]),t.statusText;if(404===t.status)throw n._error(r.a.error[t.status]),t.statusText;if(417===t.status)throw t.json().then(function(e){e.status?n._error(r.a.error[t.status]):n._error(n._errorMsg(e.msg))}),t.statusText;if(423===t.status)throw n._error(r.a.error[t.status]),t.statusText;if(401!==t.status)throw 403===t.status?(n._error(r.a.error[t.status]),t.statusText):t.statusText;n._requestXdomainToken(e)})}),i(this,"_error",function(e){r.a.message.error(e)}),i(this,"_success",function(e){r.a.message.success(e)}),i(this,"_errorMsg",function(e){if("string"==typeof e)return e;var t=['<ul class="list-unstyled">'];return e.map(function(e){return t.push("<li>"+e+"</li>")}),t.push("</ul>"),t.join(" ")}),i(this,"_getParams",function(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&")}),void 0!==t.type&&(this.type=t.type),void 0!==t.data&&(this.data=t.data),void 0!==t.pointApi&&(this.pointApi=t.pointApi),void 0!==t.domain&&(this.domain=t.domain)}var t,n,l;return t=e,(n=[{key:"_requestXdomainToken",value:function(e){var t=r.a.domain.auth+r.a.server.setPoint+"/auth/get-xdomain-token",n=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);n.open("POST",t,!0),n.withCredentials=!0,n.send();var o=this;n.onload=function(){switch(this.status){case 401:o._loginPage();break;case 200:var t=JSON.parse(this.responseText),n=e.split("/"),i=n[0]+"//"+n[2]+r.a.server.setPoint+"auth/login",a=new FormData;a.append("xdomainToken",t.xdomainToken);var l=new XMLHttpRequest;l.open("POST",i,!0),l.withCredentials=!0,l.send(a),l.onload=function(){switch(this.status){case 401:o._loginPage();break;case 200:location.reload()}}}}}},{key:"_loginPage",value:function(){r.a.page.login()}}])&&o(t.prototype,n),l&&o(t,l),e}();i(l,"post","POST"),i(l,"get","GET");var s=n(1),c=n.n(s),u=n(0),p=n.n(u),f=n(23),d=n(459);function m(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach(function(t){j(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}function E(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){function t(){return h(this,t),E(this,_(t).apply(this,arguments))}return w(t,s["Component"]),g(t,[{key:"render",value:function(){return c.a.createElement(f.a,{query:this.props.query,to:{pathname:this.props.url,query:this.props.query},className:this.props.className},this.props.children)}}]),t}();j(P,"propTypes",{url:p.a.string.isRequired,query:p.a.object.isRequired});var R=function(e){function t(){var e,n;h(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return j(O(n=E(this,(e=_(t)).call.apply(e,[this].concat(o)))),"handlePrevLoading",function(){n.props.onQuery(n.props.prev_page_query)}),j(O(n),"handleNextLoading",function(){n.props.onQuery(n.props.next_page_query)}),j(O(n),"handleChange",function(e,t){n.props.onQuery(y({page:e},n.props.query))}),j(O(n),"itemRender",function(e,t,r){return c.a.createElement(P,{type:t,className:r.props.className,children:r.props.children,query:y({page:e},n.props.query),url:n.props.url})}),n}return w(t,s["Component"]),g(t,[{key:"render",value:function(){return c.a.createElement(d.a,{total:this.props.total,pageSize:this.props.page_size,current:this.props.current,onChange:this.handleChange,itemRender:this.itemRender})}}]),t}();j(R,"propTypes",{total:p.a.number.isRequired,page_size:p.a.number.isRequired,current:p.a.number.isRequired,query:p.a.object.isRequired,url:p.a.string.isRequired});var k=function(e){function t(){return h(this,t),E(this,_(t).apply(this,arguments))}return w(t,s["Component"]),g(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.url,r=e.onQuery,o=Array.isArray(t.query)?{}:t.query;return t.total>=t.page_size?c.a.createElement(R,{key:"paginate-1",total:t.total,page_size:t.page_size,current:parseInt(t.current),query:o,page_url:t.page_url,url:n||"/",onQuery:r}):null}}]),t}();j(k,"propTypes",{url:p.a.string.isRequired,data:p.a.object.isRequired,onQuery:p.a.func.isRequired});n(162);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A(this,I(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){return c.a.createElement("div",{className:"row-table-filter"},this.props.children)}}])&&T(n.prototype,r),o&&T(n,o),t}();function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=this,o=(e=D(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==N(o)&&"function"!=typeof o?U(r):o,M(U(n),"handlerClick",function(e){var r=[],o=e.target,i=e.target.className,a=e.target.id;if(void 0!==a){switch(e.target.parentElement.parentElement.parentElement.parentElement.querySelectorAll("div.".concat(t.classElement)).forEach(function(e){e.id!==a&&(e.classList.remove("sorting_desc","sorting_asc"),e.classList.add("sorting"))}),i){case t.classElement+" sorting":o.classList.remove("sorting"),o.classList.add("sorting_desc"),n.sort_status="desc",r.push({name:n.sort_id,status:n.sort_status});break;case t.classElement+" sorting_asc":o.classList.remove("sorting_asc"),o.classList.add("sorting_desc"),n.sort_status="desc",r.push({name:n.sort_id,status:n.sort_status});break;case t.classElement+" sorting_desc":o.classList.remove("sorting_desc"),o.classList.add("sorting_asc"),n.sort_status="asc",r.push({name:n.sort_id,status:n.sort_status})}n.props.fsort(r)}}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){return c.a.createElement("div",{className:"cell-2 sorting",onClick:this.handlerClick,id:this.props.id,"aria-controls":"DataTables_Table_1"})}}])&&L(n.prototype,r),o&&L(n,o),t}();M(z,"classElement","cell-2");var X=n(188);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Q(t).call(this,e),n=!o||"object"!==H(o)&&"function"!=typeof o?B(r):o,K(B(n),"handlerFocus",function(e){var t=e.target.placeholder;null!==e.target.parentElement.querySelector(".placeholder")||(e.target.parentElement.insertAdjacentHTML("beforeend",'<div class="placeholder">'+t+"</div>"),e.target.placeholder=""),e.target.setAttribute("style","border-bottom: 1px solid #ac2925;")}),K(B(n),"handlerBlur",function(e){if(0===e.target.value.length){if(null!==e.target.parentElement.querySelector(".placeholder")){var t=e.target.parentElement.querySelector(".placeholder").textContent;e.target.placeholder=t,e.target.parentElement.querySelector(".placeholder").remove()}e.target.setAttribute("style","border-bottom: 1px solid #e5e6e7;")}}),K(B(n),"shouldComponentUpdate",function(e,t){return e.value!==n.props.value}),n.textInput=c.a.createRef(),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,c.a.Component),n=t,(r=[{key:"componentDidUpdate",value:function(e,t,n){if(this.props.value){var r=this.textInput.current.placeholder,o=this.textInput.current.parentElement;null!==o.querySelector(".placeholder")||(o.insertAdjacentHTML("beforeend",'<div class="placeholder">'+r+"</div>"),this.textInput.current.placeholder="",this.textInput.current.setAttribute("style","border-bottom: 1px solid #ac2925;"))}}},{key:"render",value:function(){var e=this.props.width?this.props.width:0;return c.a.createElement("div",{className:"cell",style:{minWidth:e+"px"}},c.a.createElement(X.Field,{model:this.props.model},c.a.createElement("input",{key:"input-search",ref:this.textInput,onFocus:this.handlerFocus,onBlur:this.handlerBlur,style:{minWidth:e+"px"},className:"filter-search",placeholder:this.props.placeholder,type:"text"})))}}])&&G(n.prototype,r),o&&G(n,o),t}(),V=n(17),Y=n.n(V);n(243),n(196);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t,n){return t&&ee(e.prototype,t),n&&ee(e,n),e}function ne(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ae,le,se,ce=function(e){function t(){return $(this,t),ne(this,re(t).apply(this,arguments))}return oe(t,c.a.Component),te(t,[{key:"render",value:function(){var e=Y()("t-head-item","t-head-item-"+this.props.id);return c.a.createElement("th",{className:e},this.props.children)}}]),t}(),ue=function(e){function t(){return $(this,t),ne(this,re(t).apply(this,arguments))}return oe(t,s["Component"]),te(t,[{key:"render",value:function(){var e=Y()(this.props.className,this.props.overlayClassName,{"table-striped":this.props.striped,"table-middle":this.props.middle,"table-responsive":this.props.responsive});return c.a.createElement("table",{className:e},c.a.createElement("thead",{className:"table-thead"},c.a.createElement("tr",null,this.props.thead?this.props.thead.map(function(e,t){return c.a.createElement(ce,{key:t,id:t},e)}):null)),c.a.createElement("tbody",null,this.props.children))}}]),t}();se={striped:!0,middle:!0,responsive:!0,className:"table table-filter",overlayClassName:null},(le="defaultProps")in(ae=ue)?Object.defineProperty(ae,le,{value:se,enumerable:!0,configurable:!0,writable:!0}):ae[le]=se;var pe=n(473),fe=n(198),de=n(29);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ge=pe.a.confirm,Ee=function(e){function t(){var e,n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return o=this,n=!(i=(e=be(t)).call.apply(e,[this].concat(l)))||"object"!==me(i)&&"function"!=typeof i?he(o):i,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(he(n),"handleLogout",function(){ge({title:"Вы хотите выйти?",okText:"Да",okType:"danger",cancelText:"Нет",onOk:function(){var e=r.a.domain.auth+r.a.server.setPoint+"/auth/log-out",t=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);t.open("POST",e,!0),t.withCredentials=!0,t.send(),t.onload=function(){var e=r.a.domain.api+r.a.server.setPoint+"/auth/log-out",t=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);t.open("POST",e,!0),t.withCredentials=!0,t.send(),t.onload=function(){r.a.page.login()}}},onCancel:function(){console.log("Cancel handle logout")}})}),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,s["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement(fe.a,{type:"danger",size:"small",onClick:this.handleLogout},c.a.createElement(de.a,{type:"logout"})," Выход")}}])&&ye(n.prototype,o),i&&ye(n,i),t}();n.d(t,"d",function(){return l}),n.d(t,"c",function(){return k}),n.d(t,"a",function(){return x}),n.d(t,"f",function(){return z}),n.d(t,"e",function(){return W}),n.d(t,"g",function(){return ue}),n.d(t,"b",function(){return Ee})},187:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.a=function(e,t){var n=r(t.actions,3),o=n[0],i=n[1],a=n[2];"Promise"===t.promise.constructor.name?(e.dispatch({type:o,data:!0}),t.promise.then(function(t){e.dispatch({type:i,data:t}),e.dispatch({type:o,data:!1})},function(t){e.dispatch({type:a,error:t})})):(e.dispatch({type:o,data:!0}),e.dispatch({type:i,data:t.promise}),e.dispatch({type:o,data:!1}))}},196:function(e,t,n){},457:function(e,t,n){},468:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"user",function(){return m}),n.d(r,"role",function(){return b});var o=n(1),i=n.n(o),a=n(172),l=n(169),s=n(199),c=n(187),u={model:"role",api:{permission:"interface-users/permission",rolePermission:"interface-users/role-permission",roles:"interface-users/roles",roleAdd:"interface-users/role-add",roleEdit:"interface-users/role-edit",roleDelete:"interface-users/role-delete",userCurrent:"interface-users/user-current",userEdit:"interface-users/user-edit"},middleware:["PERMISSION","ROLE","USER_CURRENT","USER_ITEM"]},p=function(e){return function(t){return function(n){if(!u.middleware.includes(n.type))return t(n);Object(c.a)(e,n)}}},f=function(e){return function(t){return function(n){if(!u.middleware.includes(n.type))return t(n);Object(c.a)(e,n)}}},d=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return e.includes(n.type)?n.data:t}},m=Object(l.combineReducers)({action:d(["".concat("USER","_ITEM_LOADING")]),current:d(["".concat("USER","_CURRENT_LOADED")]),item:d(["".concat("USER","_ITEM_LOADED")])}),y=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return e.includes(n.type)?n.data:t}},b=Object(l.combineReducers)({permission:y(["PERMISSION_LOADED"]),role:y(["ROLE_LOADED"])}),h=Object(l.applyMiddleware)(p,f,s.a)(l.createStore)(Object(l.combineReducers)(r)),v=n(209),g=n.n(v),E=n(17),O=n.n(E),_=n(23),w=n(177),S=n(65),j=u.api;function P(e,t,n){return new w.d({pointApi:j.userEdit,data:e}).result().then(function(e){e&&n instanceof Function&&n(t)})}function R(){return{type:"USER_CURRENT",actions:["USER_CURRENT_LOADING","USER_CURRENT_LOADED","USER_CURRENT_LOAD_FAILURE"],promise:new w.d({domain:S.a.domain.auth,type:w.d.get,pointApi:j.userCurrent}).result()}}function k(e){return{type:"USER_EDIT",actions:["USER_EDIT_LOADED"],model:P(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}}var C=u.api;function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.d.post;return new w.d({pointApi:e,type:n,data:t})}function A(e,t,n){switch(e){case"item":return T(C.permission,t,w.d.get).result();case"switch":return T(C.rolePermission,t,w.d.post).result().then(function(e){if(e)return T(C.permission,{id:t.role_id},w.d.get).result()})}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;switch(e){case"items":return T(C.roles,t,w.d.get).result();case"add":return T(C.roleAdd,t,w.d.post).result().then(function(e){if(e)return T(C.roles).result()});case"edit":return T(C.roleEdit,t,w.d.post).result().then(function(e){if(e)return T(C.roles).result(n)});case"delete":return T(C.roleDelete,t,w.d.post).result(n).then(function(e){if(e)return T(C.roles).result()})}}function q(e,t,n){return{type:"PERMISSION",actions:["PERMISSION_LOADING","PERMISSION_LOADED","PERMISSION_LOAD_FAILURE"],promise:A(e,t)}}function x(e,t,n){return{type:"ROLE",actions:["ROLE_LOADING","ROLE_LOADED","ROLE_LOAD_FAILURE"],promise:I(e,t,n)}}var N=n(463),L=n(472),D=n(466),U=n(461),F=n(29),M=n(471),z=n(198),X=n(447),H=n(331),G=n(336),Q=n(476),B=n(465),J=n(474),K=n(160),W=n(460),V=n(469),Y=n(444);function Z(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(n,!0).forEach(function(t){ie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=z.a.Group,le=J.a.Search,se=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=ne(t).call(this,e),n=!o||"object"!==ee(o)&&"function"!=typeof o?re(r):o,ie(re(n),"handleSubmit",function(e){e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,t){e||(delete t.confirm,n.props.actionRole("add",t))})}),ie(re(n),"onClose",function(){n.props.onClose()}),ie(re(n),"onRoleEditAction",function(e,t){var n=e.target.parentElement.parentElement.parentElement.parentElement,r=n.querySelector(".link-role-name-".concat(t)),o=n.querySelector(".input-role-name-".concat(t)),i=n.querySelector(".btn-role-edit-".concat(t)),a=n.querySelector(".btn-role-delete-".concat(t)),l=n.querySelector(".btn-role-save-".concat(t));r.style.display="none",o.style.display="inline",i.style.display="none",a.style.display="none",l&&(l.style.display="inline")}),ie(re(n),"onRoleDelete",function(e){n.props.actionRole("delete",{id:e},function(e){return"ok"===e.status?(e.msg&&(K.a.success(e.msg),n.props.onRoleSelect(0)),!e.result||e.result):e.msg?(K.a.error(n._errorMsg(e.msg)),!1):void 0})}),ie(re(n),"onRoleEdit",function(e,t,r){var o=e.target.parentElement.parentElement.parentElement.parentElement;n.props.actionRole("edit",{id:t,name:r},function(e){if("ok"===e.status){if(e.msg&&K.a.success(e.msg),e.result){var r=o.querySelector(".link-role-name-".concat(t)),i=o.querySelector(".input-role-name-".concat(t)),a=o.querySelector(".btn-role-edit-".concat(t)),l=o.querySelector(".btn-role-delete-".concat(t)),s=o.querySelector(".btn-role-save-".concat(t));return r.style.display="inline",i.style.display="none",a.style.display="inline",l.style.display="inline",s&&(s.style.display="none"),e.result}return!0}if(e.msg)return K.a.error(n._errorMsg(e.msg)),!1})}),ie(re(n),"shouldComponentUpdate",function(e,t){return n.props.visible!==e.visible&&n.setState({visible:e.visible}),!0}),n.state={visible:e.visible},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return i.a.createElement(W.a,{title:this.props.title,width:550,onClose:this.onClose,visible:this.state.visible,zIndex:1050},i.a.createElement(H.a,{style:{marginBottom:"20px"}},i.a.createElement(G.a,{span:24},i.a.createElement(V.a,{layout:"inline",onSubmit:this.handleSubmit},i.a.createElement(V.a.Item,{hasFeedback:!0},t("name",{})(i.a.createElement(J.a,{placeholder:"Название новой роли"}))),i.a.createElement(V.a.Item,null,i.a.createElement(z.a,{type:"primary",htmlType:"submit"},"Добавить")))),i.a.createElement(G.a,{span:24},i.a.createElement(Q.a,{size:"small",style:{marginTop:"10px"},bordered:!0,dataSource:this.props.roleList,renderItem:function(t){return i.a.createElement(Q.a.Item,{className:"list-role-item list-role-item-".concat(t.id),actions:t.editable?[i.a.createElement(ae,null,i.a.createElement(z.a,{className:"btn-role-edit btn-role-edit-".concat(t.id),onClick:function(n){return e.onRoleEditAction(n,t.id)},size:"small",icon:"edit"}),i.a.createElement(Y.a,{title:"Удалить роль?",onConfirm:function(){return e.onRoleDelete(t.id)},okText:"Да",cancelText:"Нет",placement:"left",zIndex:1050},i.a.createElement(z.a,{className:"btn-role-delete btn-role-delete-".concat(t.id),size:"small",icon:"delete"})))]:null},i.a.createElement(_.a,{onClick:function(n){e.props.onRoleSelect(n,t.id)},className:"link-role-name link-role-name-".concat(t.id),style:{width:"100%"}},t.name),i.a.createElement(le,{className:"input-role-name input-role-name-".concat(t.id),placeholder:"Название новой роли",enterButton:i.a.createElement(F.a,{type:"save"}),size:"small",defaultValue:t.name,onSearch:function(n,r){return e.onRoleEdit(r,t.id,n)}}))}}))))}}])&&te(n.prototype,r),a&&te(n,a),t}();ie(se,"defaultProps",{visible:!0,visibleId:null,successionId:null,operationId:null,inputSourceId:null,stageId:null,title:null});var ce=V.a.create({name:"user_add_form",mapPropsToFields:function(e){return{title:V.a.createFormField($({},e.sourceTitle,{value:e.sourceTitle}))}}})(se);function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=N.a.Header,he=N.a.Content,ve=N.a.Sider,ge=L.a.Panel,Ee=D.a.Meta,Oe=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=fe(t).call(this,e),n=!o||"object"!==ue(o)&&"function"!=typeof o?de(r):o,ye(de(n),"toggle",function(){n.setState({collapsed:!n.state.collapsed})}),ye(de(n),"onClose",function(){n.setState({visibleSourceAddForm:!1})}),ye(de(n),"onOpen",function(){n.setState({visibleSourceAddForm:!n.state.visibleSourceAddForm,visibleId:1})}),ye(de(n),"onRoleSelect",function(e,t){for(var r=0;r<n.props.role.length;r++){var o=n.props.role[r];if(o.id===t){n.setState({selectRoleName:o.name,selectRoleId:o.id}),n.props.actionPermission("item",{id:o.id});break}}document.querySelectorAll(".list-role-item").forEach(function(e){e.setAttribute("style","background: #fff")}),document.querySelector(".list-role-item-".concat(t)).setAttribute("style","background: #fafafa")}),ye(de(n),"shouldComponentUpdate",function(e,t){return e.permission!==n.props.permission||t.visibleSourceAddForm!==n.state.visibleSourceAddForm||t.collapsed!==n.state.collapsed||e.role!==n.props.role}),ye(de(n),"permissionsSwitch",function(e,t,r){n.props.actionPermission("switch",{enabled:r,permission_id:t,role_id:n.state.selectRoleId})}),n.state={selectRoleName:"Гость",selectRoleId:0,collapsed:!0,visibleSourceAddForm:!1,visibleId:null,items:e.items,loading:!0,operationId:""},n.props.actionCurrent(),n.props.actionRole("items"),n.props.actionPermission("item",{id:0}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){var e=this;if(this.props.current){var t=!this.props.current;return i.a.createElement(N.a,null,i.a.createElement(ve,{width:300,trigger:null,collapsible:!0,collapsed:this.state.collapsed},i.a.createElement("div",{className:"logo"},"USER"),i.a.createElement(U.b,{theme:"dark",mode:"inline",defaultSelectedKeys:["2"]},i.a.createElement(U.b.Item,{key:"1"},i.a.createElement(_.a,{to:"/"},i.a.createElement(F.a,{type:"team"}),i.a.createElement("span",null,"Пользователи"))),i.a.createElement(U.b.Item,{key:"2"},i.a.createElement(_.a,{to:"/role"},i.a.createElement(F.a,{type:"cluster"}),i.a.createElement("span",null,"Роли"))),i.a.createElement(U.b.ItemGroup,{key:"roles",title:""},this.props.role?this.props.role.map(function(t){return i.a.createElement(U.b.Item,{onClick:function(n){e.onRoleSelect(n,t.id)},key:"role-".concat(t.id)},i.a.createElement(F.a,{type:"property-safety"}),i.a.createElement("span",null,t.name))}):null))),i.a.createElement(N.a,null,i.a.createElement(g.a,{title:this.state.selectRoleName}),i.a.createElement(be,null,i.a.createElement(M.a,{title:i.a.createElement("span",null,i.a.createElement(F.a,{className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle}),"Управление ролями"),subTitle:"текущая: ".concat(this.state.selectRoleName),extra:[i.a.createElement(z.a,{key:"add-role",className:"btn-user-add",onClick:function(){return e.onOpen()},type:"primary",size:"small"},"Управление ролями"),i.a.createElement(w.b,{key:"logout-1"})]})),i.a.createElement(he,{className:"user-list"},i.a.createElement(X.a,{tip:"Загрузка...",size:"large",spinning:t},i.a.createElement(H.a,null,i.a.createElement(G.a,{span:24},i.a.createElement(L.a,{defaultActiveKey:["1"]},this.props.permission.modules?this.props.permission.modules.map(function(t){return i.a.createElement(ge,{header:"".concat(t.name,": ").concat(t.desc),key:t.group},i.a.createElement(Q.a,{grid:{gutter:16,xs:1,sm:1,md:2,lg:3,xl:4,xxl:4},dataSource:t.permissions,renderItem:function(t,n){return i.a.createElement(Q.a.Item,null,i.a.createElement(_.a,{onClick:function(){e.permissionsSwitch(t.group,t.id,t.enabled)}},i.a.createElement(B.a,{content:t.desc,title:t.name},i.a.createElement(D.a,{className:O()("permissions-default",{"permissions-enabled":t.enabled}),size:"small"},i.a.createElement(Ee,{avatar:t.enabled?i.a.createElement(F.a,{type:"check"}):i.a.createElement(F.a,{type:"stop"}),title:t.name})))))}}))}):null)),i.a.createElement(ce,{visible:this.state.visibleSourceAddForm,visibleId:this.state.visibleId,title:"Роли",onRoleSelect:this.onRoleSelect,roleList:this.props.role,actionRole:this.props.actionRole,onClose:this.onClose,wrappedComponentRef:function(t){return e.form=t}}))))))}return null}}])&&pe(n.prototype,r),o&&pe(n,o),t}(),_e=Object(a.connect)(function(e){return{access:e.user.access,current:e.user.current,role:e.role.role,permission:e.role.permission}},function(e){return Object(l.bindActionCreators)({actionCurrent:R,actionEdit:k,actionPermission:q,actionRole:x,dispatch:e},e)})(Oe);n(457);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ke=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),je(this,Pe(t).apply(this,arguments))}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){return i.a.createElement(a.Provider,{store:h},i.a.createElement(_e,{header:this.props.header,location:this.props.location,params:this.props.params}))}}])&&Se(n.prototype,r),l&&Se(n,l),t}();t.default=ke}}]);
//# sourceMappingURL=9.js.map
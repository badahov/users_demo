(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[9],{101:function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.a=function(e,t){var r=n(t.actions,3),o=r[0],a=r[1],i=r[2];"Promise"===t.promise.constructor.name?(e.dispatch({type:o,data:!0}),t.promise.then(function(t){e.dispatch({type:a,data:t}),e.dispatch({type:o,data:!1})},function(t){e.dispatch({type:i,error:t})})):(e.dispatch({type:o,data:!0}),e.dispatch({type:a,data:t.promise}),e.dispatch({type:o,data:!1}))}},116:function(e,t,r){"use strict";r.d(t,"a",function(){return y});var n=r(19),o=r(1),a=r.n(o),i=r(472),c=r(141),u=r(59);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=i.a.confirm,y=function(e){function t(){var e,r,o,a,i,c,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,m=new Array(l),y=0;y<l;y++)m[y]=arguments[y];return o=this,r=!(a=(e=p(t)).call.apply(e,[this].concat(m)))||"object"!==s(a)&&"function"!=typeof a?f(o):a,i=f(r),u=function(){d({title:"Вы хотите выйти?",okText:"Да",okType:"danger",cancelText:"Нет",onOk:function(){var e=n.a.domain.auth+n.a.server.setPoint+"/auth/log-out",t=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);t.open("POST",e,!0),t.withCredentials=!0,t.send(),t.onload=function(){var e=n.a.domain.api+n.a.server.setPoint+"/auth/log-out",t=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);t.open("POST",e,!0),t.withCredentials=!0,t.send(),t.onload=function(){n.a.page.login()}}},onCancel:function(){console.log("Cancel handle logout")}})},(c="handleLogout")in i?Object.defineProperty(i,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[c]=u,r}var r,i,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o["Component"]),r=t,(i=[{key:"render",value:function(){return a.a.createElement(c.a,{type:"danger",size:"small",onClick:this.handleLogout},a.a.createElement(u.a,{type:"logout"})," Выход")}}])&&l(r.prototype,i),y&&l(r,y),t}()},451:function(e,t,r){},468:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"user",function(){return y});var o=r(1),a=r.n(o),i=r(73),c=r(67),u=r(118),s=r(101),l={model:"edit",api:{item:"interface-users/user",edit:"interface-users/user-edit",current:"interface-users/user-current"},middleware:["USER_ITEM","USER_CURRENT"]},p=function(e){return function(t){return function(r){if(!l.middleware.includes(r.type))return t(r);Object(s.a)(e,r)}}},f=r(90),m=f.a.model.toUpperCase(),d=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;return e.includes(r.type)?r.data:t}},y=Object(c.combineReducers)({action:d(["".concat(m,"_ITEM_LOADING")]),current:d(["".concat(m,"_CURRENT_LOADED")]),item:d(["".concat(m,"_ITEM_LOADED")])}),b=Object(c.applyMiddleware)(p,u.a)(c.createStore)(Object(c.combineReducers)(n)),h=r(128),v=r.n(h),g=r(91),_=r(19),E=l.api;function O(e,t,r){return new g.a({pointApi:E.edit,data:e}).result().then(function(e){e&&r instanceof Function&&r(t)})}var w=f.a.model.toUpperCase();function j(e){return{type:"".concat(w,"_ITEM"),actions:["".concat(w,"_ITEM_LOADING"),"".concat(w,"_ITEM_LOADED"),"".concat(w,"_ITEM_LOAD_FAILURE")],promise:(t=e,new g.a({pointApi:E.item,type:g.a.get,data:t}).result())};var t}function P(){return{type:"".concat(w,"_CURRENT"),actions:["".concat(w,"_CURRENT_LOADING"),"".concat(w,"_CURRENT_LOADED"),"".concat(w,"_CURRENT_LOAD_FAILURE")],promise:new g.a({domain:_.a.domain.auth,type:g.a.get,pointApi:E.current}).result()}}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"".concat(w,"_EDIT"),actions:["".concat(w,"_EDIT_LOADED")],model:O(e,t,r)}}var T=r(463),k=r(447),C=r(116),x=r(329),R=r(334),D=r(470),A=r(460),F=r(473),I=r(446),U=r(141);function N(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(r,!0).forEach(function(t){G(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var J={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:5}}},K=function(e){function t(){var e,r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=this,o=(e=H(t)).call.apply(e,[this].concat(i)),r=!o||"object"!==M(o)&&"function"!=typeof o?B(n):o,G(B(r),"handleSubmit",function(e){e.preventDefault(),r.props.form.validateFieldsAndScroll(function(e,t){e||(t.operator_id=Number(r.props.user_id),r.props.actionEdit(t))})}),G(B(r),"handleConfirmBlur",function(e){var t=e.target.value;r.setState({confirmDirty:r.state.confirmDirty||!!t})}),r}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,o["Component"]),r=t,(n=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=!this.props.item;return a.a.createElement(k.a,{tip:"Загрузка...",size:"large",spinning:t},a.a.createElement(x.a,null,a.a.createElement(R.a,{span:24},a.a.createElement(D.a,q({},J,{onSubmit:this.handleSubmit}),a.a.createElement(x.a,{gutter:16,style:{marginBottom:"50px"}},a.a.createElement(D.a.Item,{label:"Код",hasFeedback:!0},e("operator_code",{rules:[{required:!0,message:"Пожалуйста, ввидите код пользователя"}]})(a.a.createElement(A.a,{style:{width:"65%"},min:0,placeholder:"Код пользователя"}))),a.a.createElement(D.a.Item,{label:"Имя",hasFeedback:!0},e("operator_name",{rules:[{required:!0,message:"Пожалуйста, ввидите имя пользователя"}]})(a.a.createElement(F.a,{placeholder:"Имя пользователя"}))),a.a.createElement(D.a.Item,{label:"Логин",hasFeedback:!0},e("operator_login",{rules:[{required:!0,message:"Пожалуйста, ввидите логин пользователя"}]})(a.a.createElement(F.a,{placeholder:"Логин пользователя"}))),a.a.createElement(D.a.Item,{label:"Администратор"},e("is_admin",{valuePropName:"checked"})(a.a.createElement(I.a,null))),a.a.createElement(D.a.Item,{label:"Перепечать"},e("is_reprint_admin",{valuePropName:"checked"})(a.a.createElement(I.a,null)))),a.a.createElement(x.a,{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px 0 10px",background:"#fff",textAlign:"left"}},a.a.createElement(U.a,{type:"primary",htmlType:"submit"},"Изменить"))))))}}])&&X(r.prototype,n),i&&X(r,i),t}();G(K,"defaultProps",{item:null});var V=D.a.create({name:"user_data_form",mapPropsToFields:function(e){return{operator_code:D.a.createFormField(L({},e.item.operator_code,{value:e.item.operator_code})),operator_name:D.a.createFormField(L({},e.item.operator_name,{value:e.item.operator_name})),operator_login:D.a.createFormField(L({},e.item.operator_login,{value:e.item.operator_login})),is_admin:D.a.createFormField(L({},e.item.is_admin,{value:e.item.is_admin})),is_reprint_admin:D.a.createFormField(L({},e.item.is_reprint_admin,{value:e.item.is_reprint_admin}))}}})(K);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var re={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:5}}},ne=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Z(t).call(this,e),r=!o||"object"!==Q(o)&&"function"!=typeof o?$(n):o,te($(r),"handleSubmit",function(e){e.preventDefault(),r.props.form.validateFieldsAndScroll(function(e,t){e||(delete t.confirm,t.operator_id=Number(r.props.user_id),r.props.actionEdit(t))})}),te($(r),"handleConfirmBlur",function(e){var t=e.target.value;r.setState({confirmDirty:r.state.confirmDirty||!!t})}),te($(r),"compareToFirstPassword",function(e,t,n){var o=r.props.form;t&&t!==o.getFieldValue("password")?n("Пароли не совпадают!"):n()}),te($(r),"validateToNextPassword",function(e,t,n){var o=r.props.form;t&&r.state.confirmDirty&&o.validateFields(["confirm"],{force:!0}),n()}),r.state={confirmDirty:!1},r}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,o["Component"]),r=t,(n=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return a.a.createElement(x.a,null,a.a.createElement(R.a,{span:24},a.a.createElement(D.a,W({},re,{onSubmit:this.handleSubmit}),a.a.createElement(x.a,{gutter:16,style:{marginBottom:"50px"}},a.a.createElement(D.a.Item,{label:"Пароль",hasFeedback:!0},e("password",{rules:[{required:!0,message:"Пожалуйста, введите пароль!"},{validator:this.validateToNextPassword}]})(a.a.createElement(F.a.Password,null))),a.a.createElement(D.a.Item,{label:"Повторить пароль",hasFeedback:!0},e("confirm",{rules:[{required:!0,message:"Пожалуйста, повторите пароль!"},{validator:this.compareToFirstPassword}]})(a.a.createElement(F.a.Password,{onBlur:this.handleConfirmBlur})))),a.a.createElement(x.a,{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px 0 10px",background:"#fff",textAlign:"left"}},a.a.createElement(U.a,{type:"primary",htmlType:"submit"},"Изменить")))))}}])&&Y(r.prototype,n),i&&Y(r,i),t}(),oe=D.a.create({name:"user_password_form",mapPropsToFields:function(){return null}})(ne),ae=r(245);function ie(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(r,!0).forEach(function(t){de(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ye=ae.a.Option,be={labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:15}}},he=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=pe(t).call(this,e),r=!o||"object"!==ue(o)&&"function"!=typeof o?fe(n):o,de(fe(r),"handleSubmit",function(e){e.preventDefault(),r.props.form.validateFieldsAndScroll(function(e,t){if(!e){t.operator_id=Number(r.props.user_id);var n=[];t.roles.map(function(e){n.push({id:Number(e)})}),t.roles=n,r.props.actionEdit(t)}})}),de(fe(r),"handleSelectedChange",function(e){r.setState({selected:e})}),de(fe(r),"shouldComponentUpdate",function(e,t){return t.options!==r.state.options||t.selected!==r.state.selected}),new g.a({pointApi:"interface-users/role-select"}).send().then(function(e){var t=[];e.map(function(e){t.push(a.a.createElement(ye,{key:e.id},e.title))}),r.setState({options:t})}),r.state={options:[],selected:[]},r}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,o["Component"]),r=t,(n=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return a.a.createElement(x.a,null,a.a.createElement(R.a,{span:24},a.a.createElement(D.a,se({},be,{onSubmit:this.handleSubmit}),a.a.createElement(x.a,{gutter:16,style:{marginBottom:"50px"}},a.a.createElement(D.a.Item,{label:"Выбор ролей",hasFeedback:!0},e("roles",{})(a.a.createElement(ae.a,{mode:"multiple",style:{width:"100%"},placeholder:"Пожалуйста, выберите роли",onChange:this.handleSelectedChange},this.state.options)))),a.a.createElement(x.a,{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px 0 10px",background:"#fff",textAlign:"left"}},a.a.createElement(U.a,{type:"primary",htmlType:"submit"},"Изменить")))))}}])&&le(r.prototype,n),i&&le(r,i),t}(),ve=D.a.create({name:"user_roles_form",mapPropsToFields:function(e){var t=[];return e.item.roles&&e.item.roles.map(function(e){t.push(String(e.id))}),{roles:D.a.createFormField(ce({},e.operator_code,{value:t}))}}})(he),ge=r(6),_e=r(471),Ee=r(59),Oe=r(461);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ce=T.a.Header,xe=function(e){function t(){var e,r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=this,o=(e=Pe(t)).call.apply(e,[this].concat(i)),r=!o||"object"!==we(o)&&"function"!=typeof o?Se(n):o,ke(Se(r),"state",{current:"mail"}),ke(Se(r),"handleClick",function(e){r.setState({current:e.key})}),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,a.a.Component),r=t,(n=[{key:"render",value:function(){return a.a.createElement(Ce,null,a.a.createElement(_e.a,{title:a.a.createElement("span",null,a.a.createElement(Ee.a,{className:"trigger",type:this.props.collapsed?"menu-unfold":"menu-fold",onClick:this.props.toggle}),this.props.title),subTitle:this.props.subTitle,extra:this.props.extra}),a.a.createElement(Oe.b,{onClick:this.handleClick,mode:"horizontal"},a.a.createElement(Oe.b.Item,{key:"team"},a.a.createElement(ge.a,{to:"/"},a.a.createElement(Ee.a,{type:"team"}),"Пользователи")),a.a.createElement(Oe.b.Item,{key:"role"},a.a.createElement(ge.a,{to:"/role"},a.a.createElement(Ee.a,{type:"cluster"}),"Роли"))))}}])&&je(r.prototype,n),o&&je(r,o),t}();function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ae(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ue=T.a.Sider,Ne=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ae(this,Fe(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(t,a.a.Component),r=t,(n=[{key:"render",value:function(){var e="1";switch(this.props.page){case"data":e="1";break;case"password":e="3";break;case"roles":e="4"}return a.a.createElement(Ue,{width:250,trigger:null,collapsible:!0,collapsed:this.props.collapsed},a.a.createElement("div",{className:"logo"},"USER"),a.a.createElement(Oe.b,{theme:"dark",mode:"inline",defaultSelectedKeys:[e]},a.a.createElement(Oe.b.Item,{key:"1"},a.a.createElement(ge.a,{to:"/user/edit/".concat(this.props.user_id,"/data")},a.a.createElement(Ee.a,{type:"idcard"}),a.a.createElement("span",null,"Данные пользователя"))),null,a.a.createElement(Oe.b.Item,{key:"3"},a.a.createElement(ge.a,{to:"/user/edit/".concat(this.props.user_id,"/password")},a.a.createElement(Ee.a,{type:"safety"}),a.a.createElement("span",null,"Изменение пароля"))),a.a.createElement(Oe.b.Item,{key:"4"},a.a.createElement(ge.a,{to:"/user/edit/".concat(this.props.user_id,"/roles")},a.a.createElement(Ee.a,{type:"control"}),a.a.createElement("span",null,"Управление ролями")))))}}])&&De(r.prototype,n),o&&De(r,o),t}();function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ze=T.a.Content,Ge=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=qe(t).call(this,e),r=!o||"object"!==Le(o)&&"function"!=typeof o?Xe(n):o,Be(Xe(r),"toggle",function(){r.setState({collapsed:!r.state.collapsed})}),r.state={collapsed:!1,loading:!0},r.props.actionCurrent(),r.props.actionUser({id:e.params.user_id}),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(t,a.a.Component),r=t,(n=[{key:"render",value:function(){var e=this;if(this.props.item&&this.props.current){var t=!this.props.current;return a.a.createElement(T.a,null,a.a.createElement(Ne,{collapsed:this.state.collapsed,page:this.props.params.page,user_id:this.props.params.user_id}),a.a.createElement(T.a,null,a.a.createElement(v.a,{title:"Users"}),a.a.createElement(xe,{title:this.props.item.operator_name,subTitle:"login: ".concat(this.props.item.operator_login),collapsed:this.state.collapsed,toggle:this.toggle,extra:[a.a.createElement(C.a,{key:"logout-1"})]}),a.a.createElement(ze,{className:"user-edit"},a.a.createElement(k.a,{tip:"Загрузка...",size:"large",spinning:t},"data"===this.props.params.page?a.a.createElement(V,{title:"Добавить пользователя",user_id:this.props.params.user_id,item:this.props.item,actionEdit:this.props.actionEdit,wrappedComponentRef:function(t){return e.form=t}}):null,"password"===this.props.params.page?a.a.createElement(oe,{title:"Добавить пользователя",user_id:this.props.params.user_id,actionEdit:this.props.actionEdit,wrappedComponentRef:function(t){return e.form=t}}):null,"roles"===this.props.params.page?a.a.createElement(ve,{title:"Добавить пользователя",user_id:this.props.params.user_id,item:this.props.item,actionEdit:this.props.actionEdit,wrappedComponentRef:function(t){return e.form=t}}):null))))}return null}}])&&Me(r.prototype,n),o&&Me(r,o),t}();Be(Ge,"defaultProps",{params:{user_id:null}});var Je=Object(i.connect)(function(e){return{access:e.user.access,action:e.user.action,current:e.user.current,item:e.user.item.data}},function(e){return Object(c.bindActionCreators)({actionCurrent:P,actionUser:j,actionEdit:S,dispatch:e},e)})(Ge);r(451);function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ze=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qe(this,We(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(t,o["Component"]),r=t,(n=[{key:"render",value:function(){return a.a.createElement(i.Provider,{store:b},a.a.createElement(Je,{header:this.props.header,location:this.props.location,params:this.props.params}))}}])&&Ve(r.prototype,n),c&&Ve(r,c),t}();t.default=Ze},90:function(e,t,r){"use strict";t.a={model:"user",api:{items:"interface-users/items",delete:"interface-users/user-delete",add:"interface-users/user-add",current:"interface-users/user-current"},middleware:["USER_ADD","USER_DELETE","USER_ITEMS","USER_CURRENT","USER_HEADER"]}},91:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(19);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(178),c=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"type","POST"),a(this,"data",null),a(this,"pointApi",null),a(this,"domain",n.a.domain.api),a(this,"send",function(){return r._fetch()}),a(this,"result",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return r.send().then(function(t){return e instanceof Function?e(t):"ok"===t.status?(t.msg&&r._success(t.msg),!t.result||t.result):t.msg?(r._error(r._errorMsg(t.msg)),!1):void 0})}),a(this,"_getUrl",function(){var t="";if(r.type===e.get){var o=null;r.data&&(o=r._getParams(r.data)),t=o?r.domain+n.a.server.setPoint+r.pointApi+n.a.server.prefix+o:r.domain+n.a.server.setPoint+r.pointApi}else t=r.domain+n.a.server.setPoint+r.pointApi;return t}),a(this,"_getFetchParam",function(){return r.type===e.get?{method:e.get,headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}:{method:e.post,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r.data),credentials:"include"}}),a(this,"_fetch",function(){var e=r._getUrl(),t=r._getFetchParam();return i(e,t).then(function(t){if(200===t.status)return t.json();if(500===t.status)throw r._error(n.a.error[t.status]),t.statusText;if(404===t.status)throw r._error(n.a.error[t.status]),t.statusText;if(417===t.status)throw t.json().then(function(e){e.status?r._error(n.a.error[t.status]):r._error(r._errorMsg(e.msg))}),t.statusText;if(423===t.status)throw r._error(n.a.error[t.status]),t.statusText;if(401!==t.status)throw 403===t.status?(r._error(n.a.error[t.status]),t.statusText):t.statusText;r._requestXdomainToken(e)})}),a(this,"_error",function(e){n.a.message.error(e)}),a(this,"_success",function(e){n.a.message.success(e)}),a(this,"_errorMsg",function(e){if("string"==typeof e)return e;var t=['<ul class="list-unstyled">'];return e.map(function(e){return t.push("<li>"+e+"</li>")}),t.push("</ul>"),t.join(" ")}),a(this,"_getParams",function(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&")}),void 0!==t.type&&(this.type=t.type),void 0!==t.data&&(this.data=t.data),void 0!==t.pointApi&&(this.pointApi=t.pointApi),void 0!==t.domain&&(this.domain=t.domain)}var t,r,c;return t=e,(r=[{key:"_requestXdomainToken",value:function(e){var t=n.a.domain.auth+n.a.server.setPoint+"/auth/get-xdomain-token",r=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);r.open("POST",t,!0),r.withCredentials=!0,r.send();var o=this;r.onload=function(){switch(this.status){case 401:o._loginPage();break;case 200:var t=JSON.parse(this.responseText),r=e.split("/"),a=r[0]+"//"+r[2]+n.a.server.setPoint+"auth/login",i=new FormData;i.append("xdomainToken",t.xdomainToken);var c=new XMLHttpRequest;c.open("POST",a,!0),c.withCredentials=!0,c.send(i),c.onload=function(){switch(this.status){case 401:o._loginPage();break;case 200:location.reload()}}}}}},{key:"_loginPage",value:function(){n.a.history.push("/login")}}])&&o(t.prototype,r),c&&o(t,c),e}();a(c,"post","POST"),a(c,"get","GET")}}]);
//# sourceMappingURL=9.js.map
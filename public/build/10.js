(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[10],{105:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(20),o=n(1),a=n.n(o),i=n(434),u=n(131),c=n(59);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=i.a.confirm,y=function(e){function t(){var e,n,o,a,i,u,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,m=new Array(l),y=0;y<l;y++)m[y]=arguments[y];return o=this,n=!(a=(e=p(t)).call.apply(e,[this].concat(m)))||"object"!==s(a)&&"function"!=typeof a?f(o):a,i=f(n),c=function(){d({title:"Вы хотите выйти?",okText:"Да",okType:"danger",cancelText:"Нет",onOk:function(){var e=r.a.domain.auth+r.a.server.setPoint+"/auth/log-out",t=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);t.open("POST",e,!0),t.withCredentials=!0,t.send(),t.onload=function(){var e=r.a.domain.api+r.a.server.setPoint+"/auth/log-out",t=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);t.open("POST",e,!0),t.withCredentials=!0,t.send(),t.onload=function(){r.a.page.login()}}},onCancel:function(){console.log("Cancel handle logout")}})},(u="handleLogout")in i?Object.defineProperty(i,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[u]=c,n}var n,i,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o["Component"]),n=t,(i=[{key:"render",value:function(){return a.a.createElement(u.a,{type:"danger",size:"small",onClick:this.handleLogout},a.a.createElement(c.a,{type:"logout"})," Выход")}}])&&l(n.prototype,i),y&&l(n,y),t}()},409:function(e,t,n){},430:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"user",function(){return p});var o=n(1),a=n.n(o),i=n(68),u=n(65),c=n(107);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var l=function(e){return function(t){return function(n){switch(n.type){case"USER_CURRENT":case"USER_ITEM":var r=s(n.actions,3),o=r[0],a=r[1],i=r[2];e.dispatch({type:o,data:"start"}),n.promise.then(function(t){e.dispatch({type:a,data:t}),e.dispatch({type:o,data:"end"})},function(t){e.dispatch({type:i,error:t})});break;default:return t(n)}}}},p=Object(u.combineReducers)({action:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ITEM_LOADING":return t.data;default:return e}},current:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_CURRENT_LOADED":return t.data;default:return e}},item:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ITEM_LOADED":return t.data;default:return e}}}),f=Object(u.applyMiddleware)(l,c.a)(u.createStore)(Object(u.combineReducers)(r)),m=n(117),d=n.n(m),y=n(85),b=n(20),h={item:"interface-users/user",edit:"interface-users/user-edit",current:"interface-users/user-current"};function v(e,t,n){return new y.a({pointApi:h.edit,data:e}).result().then(function(e){e&&n instanceof Function&&n(t)})}function g(e){return{type:"USER_ITEM",actions:["USER_ITEM_LOADING","USER_ITEM_LOADED","USER_ITEM_LOAD_FAILURE"],promise:(t=e,new y.a({pointApi:h.item,type:y.a.get,data:t}).result())};var t}function _(){return{type:"USER_CURRENT",actions:["USER_CURRENT_LOADING","USER_CURRENT_LOADED","USER_CURRENT_LOAD_FAILURE"],promise:new y.a({domain:b.a.domain.auth,type:y.a.get,pointApi:h.current}).result()}}function E(e){return{type:"USER_EDIT",actions:["USER_EDIT_LOADED"],model:v(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}}var w=n(424),O=n(405),S=n(105),j=n(316),P=n(321),T=n(427),k=n(419),C=n(433),R=n(404),x=n(131);function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){q(e,t,n[t])})}return e}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:5}}},X=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),u=0;u<a;u++)i[u]=arguments[u];return r=this,o=(e=I(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==A(o)&&"function"!=typeof o?N(r):o,q(N(n),"handleSubmit",function(e){e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,t){e||(t.operator_id=Number(n.props.user_id),n.props.actionEdit(t))})}),q(N(n),"shouldComponentUpdate",function(e,t){return e.item===n.props.item}),q(N(n),"handleConfirmBlur",function(e){var t=e.target.value;n.setState({confirmDirty:n.state.confirmDirty||!!t})}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=!this.props.item;return a.a.createElement(O.a,{tip:"Загрузка...",size:"large",spinning:t},a.a.createElement(j.a,null,a.a.createElement(P.a,{span:24},a.a.createElement(T.a,D({},M,{onSubmit:this.handleSubmit}),a.a.createElement(j.a,{gutter:16,style:{marginBottom:"50px"}},a.a.createElement(T.a.Item,{label:"Код",hasFeedback:!0},e("operator_code",{rules:[{required:!0,message:"Пожалуйста, ввидите код пользователя"}]})(a.a.createElement(k.a,{style:{width:"65%"},min:0,placeholder:"Код пользователя"}))),a.a.createElement(T.a.Item,{label:"Имя",hasFeedback:!0},e("operator_name",{rules:[{required:!0,message:"Пожалуйста, ввидите имя пользователя"}]})(a.a.createElement(C.a,{placeholder:"Имя пользователя"}))),a.a.createElement(T.a.Item,{label:"Логин",hasFeedback:!0},e("operator_login",{rules:[{required:!0,message:"Пожалуйста, ввидите логин пользователя"}]})(a.a.createElement(C.a,{placeholder:"Логин пользователя"}))),a.a.createElement(T.a.Item,{label:"Администратор"},e("is_admin",{valuePropName:"checked"})(a.a.createElement(R.a,null))),a.a.createElement(T.a.Item,{label:"Перепечать"},e("is_reprint_admin",{valuePropName:"checked"})(a.a.createElement(R.a,null)))),a.a.createElement(j.a,{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px 0 10px",background:"#fff",textAlign:"left"}},a.a.createElement(x.a,{type:"primary",htmlType:"submit"},"Изменить"))))))}}])&&U(n.prototype,r),i&&U(n,i),t}();q(X,"defaultProps",{item:null});var H=T.a.create({name:"user_data_form",mapPropsToFields:function(e){return{operator_code:T.a.createFormField(F({},e.item.operator_code,{value:e.item.operator_code})),operator_name:T.a.createFormField(F({},e.item.operator_name,{value:e.item.operator_name})),operator_login:T.a.createFormField(F({},e.item.operator_login,{value:e.item.operator_login})),is_admin:T.a.createFormField(F({},e.item.is_admin,{value:e.item.is_admin})),is_reprint_admin:T.a.createFormField(F({},e.item.is_reprint_admin,{value:e.item.is_reprint_admin}))}}})(X);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:5}}},Y=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=J(t).call(this,e),n=!o||"object"!==B(o)&&"function"!=typeof o?K(r):o,Q(K(n),"handleSubmit",function(e){e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,t){e||(delete t.confirm,t.operator_id=Number(n.props.user_id),n.props.actionEdit(t))})}),Q(K(n),"handleConfirmBlur",function(e){var t=e.target.value;n.setState({confirmDirty:n.state.confirmDirty||!!t})}),Q(K(n),"compareToFirstPassword",function(e,t,r){var o=n.props.form;t&&t!==o.getFieldValue("password")?r("Пароли не совпадают!"):r()}),Q(K(n),"validateToNextPassword",function(e,t,r){var o=n.props.form;t&&n.state.confirmDirty&&o.validateFields(["confirm"],{force:!0}),r()}),n.state={confirmDirty:!1},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return a.a.createElement(j.a,null,a.a.createElement(P.a,{span:24},a.a.createElement(T.a,z({},W,{onSubmit:this.handleSubmit}),a.a.createElement(j.a,{gutter:16,style:{marginBottom:"50px"}},a.a.createElement(T.a.Item,{label:"Пароль",hasFeedback:!0},e("password",{rules:[{required:!0,message:"Пожалуйста, введите пароль!"},{validator:this.validateToNextPassword}]})(a.a.createElement(C.a.Password,null))),a.a.createElement(T.a.Item,{label:"Повторить пароль",hasFeedback:!0},e("confirm",{rules:[{required:!0,message:"Пожалуйста, повторите пароль!"},{validator:this.compareToFirstPassword}]})(a.a.createElement(C.a.Password,{onBlur:this.handleConfirmBlur})))),a.a.createElement(j.a,{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px 0 10px",background:"#fff",textAlign:"left"}},a.a.createElement(x.a,{type:"primary",htmlType:"submit"},"Изменить")))))}}])&&G(n.prototype,r),i&&G(n,i),t}(),Z=T.a.create({name:"user_password_form",mapPropsToFields:function(){return null}})(Y),$=n(225);function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ue(e,t,n[t])})}return e}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce=$.a.Option,se={labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:15}}},le=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=oe(t).call(this,e),n=!o||"object"!==te(o)&&"function"!=typeof o?ae(r):o,ue(ae(n),"handleSubmit",function(e){e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,t){if(!e){t.operator_id=Number(n.props.user_id);var r=[];t.roles.map(function(e){r.push({id:Number(e)})}),t.roles=r,n.props.actionEdit(t)}})}),ue(ae(n),"handleSelectedChange",function(e){n.setState({selected:e})}),ue(ae(n),"shouldComponentUpdate",function(e,t){return t.options!==n.state.options||t.selected!==n.state.selected}),new y.a({pointApi:"interface-users/role-select"}).send().then(function(e){var t=[];e.map(function(e){t.push(a.a.createElement(ce,{key:e.id},e.title))}),n.setState({options:t})}),n.state={options:[],selected:[]},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return a.a.createElement(j.a,null,a.a.createElement(P.a,{span:24},a.a.createElement(T.a,ne({},se,{onSubmit:this.handleSubmit}),a.a.createElement(j.a,{gutter:16,style:{marginBottom:"50px"}},a.a.createElement(T.a.Item,{label:"Выбор ролей",hasFeedback:!0},e("roles",{})(a.a.createElement($.a,{mode:"multiple",style:{width:"100%"},placeholder:"Пожалуйста, выберите роли",onChange:this.handleSelectedChange},this.state.options)))),a.a.createElement(j.a,{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px 0 10px",background:"#fff",textAlign:"left"}},a.a.createElement(x.a,{type:"primary",htmlType:"submit"},"Изменить")))))}}])&&re(n.prototype,r),i&&re(n,i),t}(),pe=T.a.create({name:"user_roles_form",mapPropsToFields:function(e){var t=[];return e.item.roles&&e.item.roles.map(function(e){t.push(String(e.id))}),{roles:T.a.createFormField(ee({},e.operator_code,{value:t}))}}})(le),fe=n(6),me=n(431),de=n(59),ye=n(420);function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var we=w.a.Header,Oe=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),u=0;u<a;u++)i[u]=arguments[u];return r=this,o=(e=ve(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==be(o)&&"function"!=typeof o?ge(r):o,Ee(ge(n),"state",{current:"mail"}),Ee(ge(n),"handleClick",function(e){console.log("click ",e),n.setState({current:e.key})}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement(we,null,a.a.createElement(me.a,{title:a.a.createElement("span",null,a.a.createElement(de.a,{className:"trigger",type:this.props.collapsed?"menu-unfold":"menu-fold",onClick:this.props.toggle}),this.props.title),subTitle:this.props.subTitle,extra:this.props.extra}),a.a.createElement(ye.b,{onClick:this.handleClick,mode:"horizontal"},a.a.createElement(ye.b.Item,{key:"team"},a.a.createElement(fe.a,{to:"/"},a.a.createElement(de.a,{type:"team"}),"Пользователи")),a.a.createElement(ye.b.Item,{key:"role"},a.a.createElement(fe.a,{to:"/role"},a.a.createElement(de.a,{type:"cluster"}),"Роли"))))}}])&&he(n.prototype,r),o&&he(n,o),t}();function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ce=w.a.Sider,Re=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pe(this,Te(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e="1";switch(this.props.page){case"data":e="1";break;case"password":e="3";break;case"roles":e="4"}return a.a.createElement(Ce,{width:250,trigger:null,collapsible:!0,collapsed:this.props.collapsed},a.a.createElement("div",{className:"logo"},"USER"),a.a.createElement(ye.b,{theme:"dark",mode:"inline",defaultSelectedKeys:[e]},a.a.createElement(ye.b.Item,{key:"1"},a.a.createElement(fe.a,{to:"/user/edit/".concat(this.props.user_id,"/data")},a.a.createElement(de.a,{type:"idcard"}),a.a.createElement("span",null,"Данные пользователя"))),null,a.a.createElement(ye.b.Item,{key:"3"},a.a.createElement(fe.a,{to:"/user/edit/".concat(this.props.user_id,"/password")},a.a.createElement(de.a,{type:"safety"}),a.a.createElement("span",null,"Изменение пароля"))),a.a.createElement(ye.b.Item,{key:"4"},a.a.createElement(fe.a,{to:"/user/edit/".concat(this.props.user_id,"/roles")},a.a.createElement(de.a,{type:"control"}),a.a.createElement("span",null,"Управление ролями")))))}}])&&je(n.prototype,r),o&&je(n,o),t}();function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ne=w.a.Content,Le=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Ae(t).call(this,e),n=!o||"object"!==xe(o)&&"function"!=typeof o?De(r):o,Ie(De(n),"toggle",function(){n.setState({collapsed:!n.state.collapsed})}),Ie(De(n),"shouldComponentUpdate",function(e,t){return e.item===n.props.item}),n.state={collapsed:!1,loading:!0},n.props.actionCurrent(),n.props.actionUser({id:e.params.user_id}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this;if(this.props.item&&this.props.current){var t=!this.props.current;return a.a.createElement(w.a,null,a.a.createElement(Re,{collapsed:this.state.collapsed,page:this.props.params.page,user_id:this.props.params.user_id}),a.a.createElement(w.a,null,a.a.createElement(d.a,{title:"Users"}),a.a.createElement(Oe,{title:this.props.item.operator_name,subTitle:"login: ".concat(this.props.item.operator_login),collapsed:this.state.collapsed,toggle:this.toggle,extra:[a.a.createElement(S.a,{key:"logout-1"})]}),a.a.createElement(Ne,{className:"user-edit"},a.a.createElement(O.a,{tip:"Загрузка...",size:"large",spinning:t},"data"===this.props.params.page?a.a.createElement(H,{title:"Добавить пользователя",user_id:this.props.params.user_id,item:this.props.item,actionEdit:this.props.actionEdit,wrappedComponentRef:function(t){return e.form=t}}):null,"password"===this.props.params.page?a.a.createElement(Z,{title:"Добавить пользователя",user_id:this.props.params.user_id,actionEdit:this.props.actionEdit,wrappedComponentRef:function(t){return e.form=t}}):null,"roles"===this.props.params.page?a.a.createElement(pe,{title:"Добавить пользователя",user_id:this.props.params.user_id,item:this.props.item,actionEdit:this.props.actionEdit,wrappedComponentRef:function(t){return e.form=t}}):null))))}return null}}])&&Fe(n.prototype,r),o&&Fe(n,o),t}();Ie(Le,"defaultProps",{params:{user_id:null}});var qe=Object(i.connect)(function(e){return{access:e.user.access,action:e.user.action,current:e.user.current,item:e.user.item.data}},function(e){return Object(u.bindActionCreators)({actionCurrent:_,actionUser:g,actionEdit:E,dispatch:e},e)})(Le);n(409);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ge=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),He(this,Be(t).apply(this,arguments))}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){return a.a.createElement(i.Provider,{store:f},a.a.createElement(qe,{header:this.props.header,location:this.props.location,params:this.props.params}))}}])&&Xe(n.prototype,r),u&&Xe(n,u),t}();t.default=Ge},85:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(20);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(169),u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"type","POST"),a(this,"data",null),a(this,"pointApi",null),a(this,"domain",r.a.domain.api),a(this,"send",function(){return n._fetch()}),a(this,"result",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n.send().then(function(t){return e instanceof Function?e(t):"ok"===t.status?(t.msg&&n._success(t.msg),!t.result||t.result):t.msg?(n._error(n._errorMsg(t.msg)),!1):void 0})}),a(this,"_getUrl",function(){var t="";if(n.type===e.get){var o=null;n.data&&(o=n._getParams(n.data)),t=o?n.domain+r.a.server.setPoint+n.pointApi+r.a.server.prefix+o:n.domain+r.a.server.setPoint+n.pointApi}else t=n.domain+r.a.server.setPoint+n.pointApi;return t}),a(this,"_getFetchParam",function(){return n.type===e.get?{method:e.get,headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}:{method:e.post,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n.data),credentials:"include"}}),a(this,"_fetch",function(){var e=n._getUrl(),t=n._getFetchParam();return i(e,t).then(function(t){if(200===t.status)return t.json();if(500===t.status)throw n._error(r.a.error[t.status]),t.statusText;if(404===t.status)throw n._error(r.a.error[t.status]),t.statusText;if(417===t.status)throw t.json().then(function(e){e.status?n._error(r.a.error[t.status]):n._error(n._errorMsg(e.msg))}),t.statusText;if(423===t.status)throw n._error(r.a.error[t.status]),t.statusText;if(401!==t.status)throw 403===t.status?(n._error(r.a.error[t.status]),t.statusText):t.statusText;n._requestXdomainToken(e)})}),a(this,"_error",function(e){r.a.message.error(e)}),a(this,"_success",function(e){r.a.message.success(e)}),a(this,"_errorMsg",function(e){if("string"==typeof e)return e;var t=['<ul class="list-unstyled">'];return e.map(function(e){return t.push("<li>"+e+"</li>")}),t.push("</ul>"),t.join(" ")}),a(this,"_getParams",function(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&")}),void 0!==t.type&&(this.type=t.type),void 0!==t.data&&(this.data=t.data),void 0!==t.pointApi&&(this.pointApi=t.pointApi),void 0!==t.domain&&(this.domain=t.domain)}var t,n,u;return t=e,(n=[{key:"_requestXdomainToken",value:function(e){var t=r.a.domain.auth+r.a.server.setPoint+"/auth/get-xdomain-token",n=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);n.open("POST",t,!0),n.withCredentials=!0,n.send();var o=this;n.onload=function(){switch(console.log("requestXdomainToken"),this.status){case 401:o._loginPage();break;case 200:var t=JSON.parse(this.responseText),n=e.split("/"),a=n[0]+"//"+n[2]+r.a.server.setPoint+"auth/login",i=new FormData;i.append("xdomainToken",t.xdomainToken);var u=new XMLHttpRequest;u.open("POST",a,!0),u.withCredentials=!0,u.send(i),u.onload=function(){switch(this.status){case 401:o._loginPage();break;case 200:location.reload()}}}}}},{key:"_loginPage",value:function(){r.a.history.push("/login")}}])&&o(t.prototype,n),u&&o(t,u),e}();a(u,"post","POST"),a(u,"get","GET")}}]);
//# sourceMappingURL=10.js.map
(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[10],{111:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return b});var r=n(1),o=n.n(r),a=n(8),i=n(439),c=n(138),u=n(62);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=i.a.confirm,h=e.env.API_AUTH,b=function(t){function n(){var t,r,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var c=arguments.length,u=new Array(c),l=0;l<c;l++)u[l]=arguments[l];return o=this,i=(t=p(n)).call.apply(t,[this].concat(u)),r=!i||"object"!==s(i)&&"function"!=typeof i?f(o):i,d(f(r),"loginPage",function(){a.c.push("/login")}),d(f(r),"handleLogout",function(){var t=f(r);y({title:"Вы хотите выйти?",okText:"Да",okType:"danger",cancelText:"Нет",onOk:function(){var n=h+e.env.SET_POINT+"/auth/log-out",r=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);r.open("POST",n,!0),r.withCredentials=!0,r.send(),r.onload=function(){var n=e.env.API+e.env.SET_POINT+"/auth/log-out",r=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);r.open("POST",n,!0),r.withCredentials=!0,r.send(),r.onload=function(){t.loginPage()}}},onCancel:function(){console.log("Cancel")}})}),r}var i,b,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,r["Component"]),i=n,(b=[{key:"render",value:function(){return o.a.createElement(c.a,{type:"danger",size:"small",onClick:this.handleLogout},o.a.createElement(u.a,{type:"logout"})," Выход")}}])&&l(i.prototype,b),v&&l(i,v),n}()}).call(this,n(27))},414:function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(90);function o(e){return new r.a({pointApi:"interface-users/user",type:r.a.get,data:e}).result()}function a(){return new r.a({domain:e.env.API_AUTH,type:r.a.get,pointApi:"interface-users/user-current"}).result()}function i(e,t,n){return new r.a({pointApi:"interface-users/user-edit",data:e}).result().then(function(e){e&&n instanceof Function&&n(t)})}}).call(this,n(27))},415:function(e,t,n){},437:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"user",function(){return p});var o=n(1),a=n.n(o),i=n(71),c=n(67),u=n(113);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var l=function(e){return function(t){return function(n){switch(n.type){case"USER_CURRENT":case"USER_ITEM":var r=s(n.actions,3),o=r[0],a=r[1],i=r[2];e.dispatch({type:o,data:"start"}),n.promise.then(function(t){e.dispatch({type:a,data:t}),e.dispatch({type:o,data:"end"})},function(t){e.dispatch({type:i,error:t})});break;default:return t(n)}}}},p=Object(c.combineReducers)({action:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ITEM_LOADING":return t.data;default:return e}},current:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_CURRENT_LOADED":return t.data;default:return e}},item:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ITEM_LOADED":return t.data;default:return e}}}),f=Object(c.applyMiddleware)(l,u.a)(c.createStore)(Object(c.combineReducers)(r)),m=n(124),d=n.n(m),y=n(8),h=n(414);function b(e){return{type:"USER_ITEM",actions:["USER_ITEM_LOADING","USER_ITEM_LOADED","USER_ITEM_LOAD_FAILURE"],promise:Object(h.c)(e)}}function v(){return{type:"USER_CURRENT",actions:["USER_CURRENT_LOADING","USER_CURRENT_LOADED","USER_CURRENT_LOAD_FAILURE"],promise:Object(h.a)()}}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"USER_EDIT",actions:["USER_EDIT_LOADED"],model:Object(h.b)(e,t,n)}}var E=n(431),_=n(428),w=n(62),O=n(438),S=n(410),T=n(111),P=n(323),j=n(328),R=n(434),k=n(427),C=n(440),x=n(409),A=n(138);function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){q(e,t,n[t])})}return e}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:5}}},H=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=N(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==F(o)&&"function"!=typeof o?L(r):o,q(L(n),"handleSubmit",function(e){e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,t){e||(t.operator_id=Number(n.props.user_id),n.props.actionEdit(t))})}),q(L(n),"shouldComponentUpdate",function(e,t){return e.item===n.props.item}),q(L(n),"handleConfirmBlur",function(e){var t=e.target.value;n.setState({confirmDirty:n.state.confirmDirty||!!t})}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=!this.props.item;return a.a.createElement(S.a,{tip:"Загрузка...",size:"large",spinning:t},a.a.createElement(P.a,null,a.a.createElement(j.a,{span:24},a.a.createElement(R.a,D({},B,{onSubmit:this.handleSubmit}),a.a.createElement(P.a,{gutter:16,style:{marginBottom:"50px"}},a.a.createElement(R.a.Item,{label:"Код",hasFeedback:!0},e("operator_code",{rules:[{required:!0,message:"Пожалуйста, ввидите код пользователя"}]})(a.a.createElement(k.a,{style:{width:"65%"},min:0,placeholder:"Код пользователя"}))),a.a.createElement(R.a.Item,{label:"Имя",hasFeedback:!0},e("operator_name",{rules:[{required:!0,message:"Пожалуйста, ввидите имя пользователя"}]})(a.a.createElement(C.a,{placeholder:"Имя пользователя"}))),a.a.createElement(R.a.Item,{label:"Логин",hasFeedback:!0},e("operator_login",{rules:[{required:!0,message:"Пожалуйста, ввидите логин пользователя"}]})(a.a.createElement(C.a,{placeholder:"Логин пользователя"}))),a.a.createElement(R.a.Item,{label:"Администратор"},e("is_admin",{valuePropName:"checked"})(a.a.createElement(x.a,null))),a.a.createElement(R.a.Item,{label:"Перепечать"},e("is_reprint_admin",{valuePropName:"checked"})(a.a.createElement(x.a,null)))),a.a.createElement(P.a,{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px 0 10px",background:"#fff",textAlign:"left"}},a.a.createElement(A.a,{type:"primary",htmlType:"submit"},"Изменить"))))))}}])&&U(n.prototype,r),i&&U(n,i),t}();q(H,"defaultProps",{item:null});var X=R.a.create({name:"user_data_form",mapPropsToFields:function(e){return{operator_code:R.a.createFormField(I({},e.item.operator_code,{value:e.item.operator_code})),operator_name:R.a.createFormField(I({},e.item.operator_name,{value:e.item.operator_name})),operator_login:R.a.createFormField(I({},e.item.operator_login,{value:e.item.operator_login})),is_admin:R.a.createFormField(I({},e.item.is_admin,{value:e.item.is_admin})),is_reprint_admin:R.a.createFormField(I({},e.item.is_reprint_admin,{value:e.item.is_reprint_admin}))}}})(H);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:5}}},Z=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=K(t).call(this,e),n=!o||"object"!==J(o)&&"function"!=typeof o?V(r):o,W(V(n),"handleSubmit",function(e){e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,t){e||(delete t.confirm,t.operator_id=Number(n.props.user_id),n.props.actionEdit(t))})}),W(V(n),"handleConfirmBlur",function(e){var t=e.target.value;n.setState({confirmDirty:n.state.confirmDirty||!!t})}),W(V(n),"compareToFirstPassword",function(e,t,r){var o=n.props.form;t&&t!==o.getFieldValue("password")?r("Пароли не совпадают!"):r()}),W(V(n),"validateToNextPassword",function(e,t,r){var o=n.props.form;t&&n.state.confirmDirty&&o.validateFields(["confirm"],{force:!0}),r()}),n.state={confirmDirty:!1},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return a.a.createElement(P.a,null,a.a.createElement(j.a,{span:24},a.a.createElement(R.a,z({},Y,{onSubmit:this.handleSubmit}),a.a.createElement(P.a,{gutter:16,style:{marginBottom:"50px"}},a.a.createElement(R.a.Item,{label:"Пароль",hasFeedback:!0},e("password",{rules:[{required:!0,message:"Пожалуйста, введите пароль!"},{validator:this.validateToNextPassword}]})(a.a.createElement(C.a.Password,null))),a.a.createElement(R.a.Item,{label:"Повторить пароль",hasFeedback:!0},e("confirm",{rules:[{required:!0,message:"Пожалуйста, повторите пароль!"},{validator:this.compareToFirstPassword}]})(a.a.createElement(C.a.Password,{onBlur:this.handleConfirmBlur})))),a.a.createElement(P.a,{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px 0 10px",background:"#fff",textAlign:"left"}},a.a.createElement(A.a,{type:"primary",htmlType:"submit"},"Изменить")))))}}])&&G(n.prototype,r),i&&G(n,i),t}(),$=R.a.create({name:"user_password_form",mapPropsToFields:function(){return null}})(Z),ee=n(230),te=n(90);function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){se(e,t,n[t])})}return e}function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=ee.a.Option,pe={labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:15}}},fe=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=ie(t).call(this,e),n=!o||"object"!==re(o)&&"function"!=typeof o?ce(r):o,se(ce(n),"handleSubmit",function(e){e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,t){if(!e){t.operator_id=Number(n.props.user_id);var r=[];t.roles.map(function(e){r.push({id:Number(e)})}),t.roles=r,n.props.actionEdit(t)}})}),se(ce(n),"handleSelectedChange",function(e){n.setState({selected:e})}),se(ce(n),"shouldComponentUpdate",function(e,t){return t.options!==n.state.options||t.selected!==n.state.selected}),new te.a({pointApi:"interface-users/role-select"}).send().then(function(e){var t=[];e.map(function(e){t.push(a.a.createElement(le,{key:e.id},e.title))}),n.setState({options:t})}),n.state={options:[],selected:[]},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return a.a.createElement(P.a,null,a.a.createElement(j.a,{span:24},a.a.createElement(R.a,oe({},pe,{onSubmit:this.handleSubmit}),a.a.createElement(P.a,{gutter:16,style:{marginBottom:"50px"}},a.a.createElement(R.a.Item,{label:"Выбор ролей",hasFeedback:!0},e("roles",{})(a.a.createElement(ee.a,{mode:"multiple",style:{width:"100%"},placeholder:"Пожалуйста, выберите роли",onChange:this.handleSelectedChange},this.state.options)))),a.a.createElement(P.a,{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px 0 10px",background:"#fff",textAlign:"left"}},a.a.createElement(A.a,{type:"primary",htmlType:"submit"},"Изменить")))))}}])&&ae(n.prototype,r),i&&ae(n,i),t}(),me=R.a.create({name:"user_roles_form",mapPropsToFields:function(e){var t=[];return e.item.roles&&e.item.roles.map(function(e){t.push(String(e.id))}),{roles:R.a.createFormField(ne({},e.operator_code,{value:t}))}}})(fe);function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t,n){return t&&be(e.prototype,t),n&&be(e,n),e}function ge(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?Ee(e):t}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Se=E.a.Header,Te=E.a.Content,Pe=E.a.Sider,je=function(e){function t(){return he(this,t),ge(this,_e(t).apply(this,arguments))}return we(t,a.a.Component),ve(t,[{key:"render",value:function(){var e="1";switch(this.props.page){case"data":e="1";break;case"password":e="3";break;case"roles":e="4"}return a.a.createElement(Pe,{width:250,trigger:null,collapsible:!0,collapsed:this.props.collapsed},a.a.createElement("div",{className:"logo"},"SUP"),a.a.createElement(_.b,{theme:"dark",mode:"inline",defaultSelectedKeys:[e]},a.a.createElement(_.b.Item,{key:"1"},a.a.createElement(y.a,{to:"/user/edit/".concat(this.props.user_id,"/data")},a.a.createElement(w.a,{type:"idcard"}),a.a.createElement("span",null,"Данные пользователя"))),null,a.a.createElement(_.b.Item,{key:"3"},a.a.createElement(y.a,{to:"/user/edit/".concat(this.props.user_id,"/password")},a.a.createElement(w.a,{type:"safety"}),a.a.createElement("span",null,"Изменение пароля"))),a.a.createElement(_.b.Item,{key:"4"},a.a.createElement(y.a,{to:"/user/edit/".concat(this.props.user_id,"/roles")},a.a.createElement(w.a,{type:"control"}),a.a.createElement("span",null,"Управление ролями")))))}}]),t}(),Re=function(e){function t(){var e,n;he(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return de(Ee(n=ge(this,(e=_e(t)).call.apply(e,[this].concat(o)))),"state",{current:"mail"}),de(Ee(n),"handleClick",function(e){console.log("click ",e),n.setState({current:e.key})}),n}return we(t,a.a.Component),ve(t,[{key:"render",value:function(){return a.a.createElement(Se,null,a.a.createElement(O.a,{title:a.a.createElement("span",null,a.a.createElement(w.a,{className:"trigger",type:this.props.collapsed?"menu-unfold":"menu-fold",onClick:this.props.toggle}),this.props.title),subTitle:this.props.subTitle,extra:this.props.extra}),a.a.createElement(_.b,{onClick:this.handleClick,mode:"horizontal"},a.a.createElement(_.b.Item,{key:"team"},a.a.createElement(y.a,{to:"/"},a.a.createElement(w.a,{type:"team"}),"Пользователи")),a.a.createElement(_.b.Item,{key:"role"},a.a.createElement(y.a,{to:"/role"},a.a.createElement(w.a,{type:"cluster"}),"Роли"))))}}]),t}(),ke=function(e){function t(e){var n;return he(this,t),de(Ee(n=ge(this,_e(t).call(this,e))),"toggle",function(){n.setState({collapsed:!n.state.collapsed})}),de(Ee(n),"shouldComponentUpdate",function(e,t){return e.item===n.props.item}),n.state={collapsed:!1,loading:!0},n.props.actionCurrent(),n.props.actionUser({id:e.params.user_id}),n}return we(t,a.a.Component),ve(t,[{key:"render",value:function(){var e=this;if(this.props.item&&this.props.current){var t=!this.props.current;return a.a.createElement(E.a,null,a.a.createElement(je,{collapsed:this.state.collapsed,page:this.props.params.page,user_id:this.props.params.user_id}),a.a.createElement(E.a,null,a.a.createElement(d.a,{title:"Users"}),a.a.createElement(Re,{title:this.props.item.operator_name,subTitle:"login: ".concat(this.props.item.operator_login),collapsed:this.state.collapsed,toggle:this.toggle,extra:[a.a.createElement(T.a,{key:"logout-1"})]}),a.a.createElement(Te,{className:"user-edit"},a.a.createElement(S.a,{tip:"Загрузка...",size:"large",spinning:t},"data"===this.props.params.page?a.a.createElement(X,{title:"Добавить пользователя",user_id:this.props.params.user_id,item:this.props.item,actionEdit:this.props.actionEdit,wrappedComponentRef:function(t){return e.form=t}}):null,"password"===this.props.params.page?a.a.createElement($,{title:"Добавить пользователя",user_id:this.props.params.user_id,actionEdit:this.props.actionEdit,wrappedComponentRef:function(t){return e.form=t}}):null,"roles"===this.props.params.page?a.a.createElement(me,{title:"Добавить пользователя",user_id:this.props.params.user_id,item:this.props.item,actionEdit:this.props.actionEdit,wrappedComponentRef:function(t){return e.form=t}}):null))))}return null}}]),t}(),Ce=Object(i.connect)(function(e){return{access:e.user.access,action:e.user.action,current:e.user.current,item:e.user.item.data}},function(e){return Object(c.bindActionCreators)({actionCurrent:v,actionUser:b,actionEdit:g,dispatch:e},e)})(ke);n(415);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ue=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ie(this,Fe(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){return a.a.createElement(i.Provider,{store:f},a.a.createElement(Ce,{header:this.props.header,location:this.props.location,params:this.props.params}))}}])&&Ae(n.prototype,r),c&&Ae(n,c),t}();t.default=Ue},80:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return f});var r=n(114),o=n.n(r),a=n(8),i=n(79),c=n.n(i),u=e.env.API_AUTH;function s(){return o.a.get("token")}function l(t){var n=u+e.env.SET_POINT+"/auth/get-xdomain-token",r=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);r.open("POST",n,!0),r.withCredentials=!0,r.send(),r.onload=function(){switch(this.status){case 401:p();break;case 200:var n=JSON.parse(this.responseText),r=t.split("/"),o=r[0]+"//"+r[2]+e.env.SET_POINT+"auth/login",a=new FormData;a.append("xdomainToken",n.xdomainToken);var i=new XMLHttpRequest;i.open("POST",o,!0),i.withCredentials=!0,i.send(a),i.onload=function(){JSON.parse(this.responseText);switch(this.status){case 401:p();break;case 200:location.reload()}}}}}function p(){a.c.push("/login")}function f(){a.c.push("/")}c.a.options={closeButton:!0,progressBar:!0,showMethod:"slideDown",timeOut:4e3}}).call(this,n(27))},90:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var r=n(79),o=n.n(r),a=n(80);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(176);o.a.options={closeButton:!0,progressBar:!0,showMethod:"slideDown",timeOut:4e3};var u=function t(n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"type","POST"),i(this,"data",null),i(this,"pointApi",null),i(this,"domain",e.env.API),i(this,"send",function(){return r._fetch()}),i(this,"result",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return r.send().then(function(t){return e instanceof Function?e(t):"ok"===t.status?(t.msg&&o.a.success(t.msg),!t.result||t.result):t.msg?(o.a.error(r._errorMsg(t.msg)),!1):void 0})}),i(this,"_getUrl",function(){var n="";if(r.type===t.get){var o=null;r.data&&(o=r._getParams(r.data)),n=o?r.domain+e.env.SET_POINT+r.pointApi+"&"+o:r.domain+e.env.SET_POINT+r.pointApi}else n=r.domain+e.env.SET_POINT+r.pointApi;return n}),i(this,"_getFetchParam",function(){return r.type===t.get?{method:t.get,headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}:{method:t.post,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r.data),credentials:"include"}}),i(this,"_fetch",function(){var t=r._getUrl(),n=r._getFetchParam();return c(t,n).then(function(n){if(200===n.status)return n.json();if(500===n.status)throw o.a.error(e.env.ERROR_500),n.statusText;if(404===n.status)throw o.a.error(e.env.ERROR_404),n.statusText;if(417===n.status)throw n.json().then(function(t){t.status?o.a.error(e.env.ERROR_417):o.a.error(r._errorMsg(t.msg))}),n.statusText;if(423===n.status)throw o.a.error(e.env.ERROR_423),n.statusText;if(401!==n.status)throw 403===n.status?(o.a.error(e.env.ERROR_403),n.statusText):n.statusText;Object(a.c)(t)})}),i(this,"_errorMsg",function(e){if("string"==typeof e)return e;var t=['<ul class="list-unstyled">'];return e.map(function(e){return t.push("<li>"+e+"</li>")}),t.push("</ul>"),t.join(" ")}),i(this,"_getParams",function(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&")}),void 0!==n.type&&(this.type=n.type),void 0!==n.data&&(this.data=n.data),void 0!==n.pointApi&&(this.pointApi=n.pointApi),void 0!==n.domain&&(this.domain=n.domain)};i(u,"post","POST"),i(u,"get","GET")}).call(this,n(27))}}]);
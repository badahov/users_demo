{"version":3,"sources":["webpack:///./modules/login/component/logout.jsx","webpack:///./modules/login/route.js","webpack:///./modules/login/store/middlewares/auth.js","webpack:///./modules/login/store/reducers/auth.js","webpack:///./modules/login/store/state.js","webpack:///./modules/login/config.js","webpack:///./modules/login/store/api/auth.js","webpack:///./modules/login/store/actions/auth.js","webpack:///./modules/login/component/login.jsx","webpack:///./modules/login/main.jsx"],"names":["__webpack_require__","d","__webpack_exports__","Logout","config__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_1___default","n","antd__WEBPACK_IMPORTED_MODULE_2__","antd__WEBPACK_IMPORTED_MODULE_3__","antd__WEBPACK_IMPORTED_MODULE_4__","confirm","Modal","title","okText","okType","cancelText","onOk","urlAuth","config","domain","auth","server","setPoint","xhr","XMLHttpRequest","XDomainRequest","open","withCredentials","send","onload","urlMain","api","xhr2","page","login","onCancel","console","log","Component","a","createElement","type","size","onClick","this","handleLogout","path","getComponent","location","cb","require","bind","catch","oe","middleware","store","next","action","startAction","_slicedToArray","actions","dispatch","promise","result","JSON","parse","responseText","status","message","error","home","onerror","_action$actions2","startCurrentUserAction","successCurrentUserAction","data","actionReducers","state","arguments","length","undefined","includes","combineForms","current","forgot","createStoreWithMiddleware","applyMiddleware","thunk","createStore","combineReducers","reducers","login_config","model","apiAuthLogin","url","appConfig","formData","FormData","key","append","authLogin","query","Content","Layout","Login","confirmDirty","autoCompleteResult","e","preventDefault","_this","props","form","validateFieldsAndScroll","err","values","Promise","resolve","setTimeout","rule","value","callback","validateFields","force","React","getFieldDecorator","react_default","layout","className","Helmet_default","row","col","span","offset","es_form","_extends","wrapperCol","xs","sm","md","lg","onSubmit","handleSubmit","Item","rules","required","whitespace","input","placeholder","validator","validateToNextPassword","Password","es_button","htmlType","WrappedRegistrationForm","Form","create","name","connect","bindActionCreators","main_Inbox","Inbox","es","localStore"],"mappings":"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","file":"login.js?hash=42138c65ad055cc3d25a","sourcesContent":["'use strict';\n\nimport config from 'config';\n\nimport React, {Component} from 'react';\n\nimport { Modal, Icon, Button } from 'antd';\nconst confirm = Modal.confirm;\n\nexport default class Logout extends Component\n{\n    handleLogout = () => {\n        confirm({\n            title: 'Вы хотите выйти?',\n            okText: 'Да',\n            okType: 'danger',\n            cancelText: 'Нет',\n            onOk() {\n                const urlAuth = config.domain.auth + config.server.setPoint + '/auth/log-out';\n\n                let XHR = (\"onload\" in new XMLHttpRequest()) ? XMLHttpRequest : XDomainRequest;\n                let xhr = new XHR();\n                xhr.open('POST', urlAuth, true);\n                xhr.withCredentials = true;\n                xhr.send();\n                xhr.onload = function() {\n                    const urlMain = config.domain.api + config.server.setPoint + '/auth/log-out';\n                    let XHR2 = (\"onload\" in new XMLHttpRequest()) ? XMLHttpRequest : XDomainRequest;\n                    let xhr2 = new XHR2();\n                    xhr2.open('POST', urlMain, true);\n                    xhr2.withCredentials = true;\n                    xhr2.send();\n                    xhr2.onload = function() {\n                        config.page.login();\n                    }\n                };\n            },\n            onCancel() {\n                console.log('Cancel handle logout');\n            },\n        });\n    };\n\n    render () {\n        return (\n            <Button type=\"danger\" size=\"small\" onClick={this.handleLogout}><Icon type=\"logout\" /> Выход</Button>\n        );\n    }\n}\n","'use strict';\n\nexport default {\n    path: '/login',\n    getComponent(location, cb) {\n        require.ensure([], (require) => {\n            cb(null, require('./main').default);\n        });\n    }\n};","'use strict';\n\nimport config from 'config';\n\nconst middleware = store => next => action => {\n    switch (action.type) {\n        case 'AUTH_LOGIN':\n            const [startAction] = action.actions;\n\n            store.dispatch({\n                type: startAction\n            });\n\n            action.promise.onload = function() {\n                let result = JSON.parse(this.responseText);\n\n                switch (action.promise.status) {\n                    case 403:\n                        config.message.error(config.error[action.promise.status]);\n                        break;\n                    case 401:\n                        config.message.error(config.error[action.promise.status]);\n                        break;\n                    case 200:\n                        if (result.status !== 'error') {\n                            config.page.home();\n                        }\n                        break;\n                }\n            };\n\n            action.promise.onerror = function() {\n                config.message.error('Error');\n            };\n            break;\n        case 'AUTH_CURRENT_USER':\n            const [startCurrentUserAction, successCurrentUserAction] = action.actions;\n\n            store.dispatch({\n                type: startCurrentUserAction\n            });\n\n            action.promise.onload = function() {\n                let data = JSON.parse(this.responseText);\n\n                switch (action.promise.status) {\n                    case 403:\n                        config.message.error(config.error[action.promise.status]);\n                        break;\n                    case 401:\n                        config.message.error(config.error[action.promise.status]);\n                        break;\n                    case 200:\n                        if (data.status !== 'error') {\n                            store.dispatch({\n                                type: successCurrentUserAction,\n                                data: data.result\n                            });\n                        }\n                        break;\n                }\n            };\n            break;\n        default:\n            return next(action);\n            break;\n    }\n\n};\n\nexport default middleware;\n","'use strict';\n\nimport {combineForms} from 'react-redux-form';\n\nconst actionReducers = status => (state = [], action) => {\n    if (status.includes(action.type)) {\n        return action.data;\n    } else {\n        return state;\n    }\n};\n\nexport default combineForms({\n    current: actionReducers([\n        'AUTH_CURRENT_USER_LOADED'\n    ]),\n    forgot: actionReducers([\n        'AUTH_AUTH_FORGOT_PASSWORD_LOADED'\n    ]),\n}, 'auth');\n","'use strict';\n\nimport { createStore, combineReducers, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\n//import createLogger from 'redux-logger';\n\nimport auth   from './middlewares/auth';\n\n//Найдет и загрузит все reducers из папки\nimport * as reducers from './reducers';\n\nconst createStoreWithMiddleware = applyMiddleware(\n    auth,\n    thunk//, createLogger()\n)(createStore);\n\nexport default createStoreWithMiddleware(combineReducers(reducers));\n","'use strict';\n\nexport default {\n    model: 'auth',\n    api: {\n        auth: 'auth/login',\n    }\n}","'use strict';\n\nimport appConfig from \"config\";\nimport config from \"../../config\";\n\nexport function apiAuthLogin(data)\n{\n    const url = appConfig.domain.auth + appConfig.server.setPoint + config.api.auth;\n\n    const formData = new FormData();\n\n    for (let key in data) {\n        formData.append(key, data[key] );\n    }\n\n    const XHR = (\"onload\" in new XMLHttpRequest()) ? XMLHttpRequest : XDomainRequest;\n\n    const xhr = new XHR();\n\n    xhr.open('POST', url, true);\n    xhr.withCredentials = true;\n\n    xhr.send( formData );\n\n    return xhr;\n}\n","'use strict';\n\nimport {apiAuthLogin} from '../api/auth';\n\nexport function authLogin(query) {\n    return {\n       type: 'AUTH_LOGIN',\n       actions: ['AUTH_LOGIN_LOADING', 'AUTH_LOGIN_LOADED', 'AUTH_LOGIN_LOAD_FAILURE'],\n       promise: apiAuthLogin(query),\n    };\n}\n","'use strict';\n\nconsole.log('login index');\n\nimport React from 'react';\nimport Helmet from \"react-helmet\";\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { authLogin } from '../store/actions/auth';\n\nimport {\n    Layout,\n    Form,\n    Input,\n    Row,\n    Col,\n    Button\n} from 'antd';\n\nconst { Content } = Layout;\n\nclass Login extends React.Component\n{\n    state = {\n        confirmDirty: false,\n        autoCompleteResult: [],\n    };\n\n    handleSubmit = e => {\n        e.preventDefault();\n        this.props.form.validateFieldsAndScroll((err, values) => {\n            if (!err) {\n                new Promise((resolve) => {\n                    this.props.authLogin( values );\n                    setTimeout(() => { resolve(true); }, 1000);\n                });\n            }\n        });\n    };\n\n    validateToNextPassword = (rule, value, callback) => {\n        const form = this.props.form;\n        if (value && this.state.confirmDirty) {\n            form.validateFields(['confirm'], { force: true });\n        }\n        callback();\n    };\n\n    render() {\n        const { getFieldDecorator } = this.props.form;\n\n        const formItemLayout = {\n            wrapperCol: {\n                xs: { span: 24 },\n                sm: { span: 24 },\n                md: { span: 14, offset: 5 },\n                lg: { span: 10, offset: 7 },\n            },\n        };\n        const tailFormItemLayout = {\n            wrapperCol: {\n                xs: {\n                    span: 24,\n                    offset: 0,\n                },\n                sm: {\n                    span: 24,\n                    offset: 0,\n                },\n            },\n        };\n\n        return (\n            <Layout className=\"auth\">\n                <Helmet title=\"Авторизация\" />\n                <Content>\n                    <Row className=\"form-box animated fadeInDown\">\n                        <Col span={10} offset={7}>\n                            <h1 className=\"logo-name\">USER</h1>\n                            <h3>Добро пожаловать</h3>\n                        </Col>\n                        <Col span={10} offset={7} >\n                            <Form {...formItemLayout} onSubmit={this.handleSubmit}>\n                                <Form.Item>\n                                    {getFieldDecorator('login', {\n                                        rules: [{ required: true, message: 'Впишите логин', whitespace: true }],\n                                    })(<Input placeholder=\"Логин\" />)}\n                                </Form.Item>\n\n                                <Form.Item>\n                                    {getFieldDecorator('password', {\n                                        rules: [\n                                            {\n                                                required: true,\n                                                message: 'Впишите пароль',\n                                            },\n                                            {\n                                                validator: this.validateToNextPassword,\n                                            },\n                                        ],\n                                    })(<Input.Password placeholder=\"Пароль\" />)}\n                                </Form.Item>\n\n                                <Form.Item {...tailFormItemLayout}>\n                                    <Button type=\"primary\" htmlType=\"submit\">\n                                        Войти\n                                    </Button>\n                                </Form.Item>\n                            </Form>\n                        </Col>\n                    </Row>\n                </Content>\n            </Layout>\n        );\n    }\n}\n\nconst WrappedRegistrationForm = Form.create({name: 'register'})(Login);\n\nexport default connect(\n    (state) => { return { login: state.auth.login }; },\n    (dispatch) => bindActionCreators({authLogin,dispatch}, dispatch)\n)(WrappedRegistrationForm);\n","'use strict';\n\nimport React, {Component} from 'react';\nimport {Provider} from 'react-redux';\n\nimport localStore from './store/state';\n\nimport Login from './component/login';\n\nimport './less/login.less';\n\nexport default class Inbox extends Component {\n    render() {\n        return (\n            <Provider store={localStore}>\n                <Login />\n            </Provider>\n        );\n    }\n}\n"],"sourceRoot":""}